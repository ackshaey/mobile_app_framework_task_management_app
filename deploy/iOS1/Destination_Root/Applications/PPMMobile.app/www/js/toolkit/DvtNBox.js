var DvtNBox=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtNBox,DvtBaseComponent,"DvtNBox");DvtNBox.newInstance=function(a,b,c){return new DvtNBox(a,b,c)};DvtNBox.getDefaults=function(a){return(new DvtNBoxDefaults).getDefaults(a)};
DvtNBox.prototype.Init=function(a,b,c){DvtNBox.superclass.Init.call(this,a,b,c);this.Defaults=new DvtNBoxDefaults;this.EventManager=new DvtNBoxEventManager(this);this.EventManager.addListeners(this);this._dragSource=new DvtDragSource(a);this._dropTarget=new DvtNBoxDropTarget(this);this.EventManager.setDragSource(this._dragSource);DvtAgent.isTouchDevice()||this.EventManager.setKeyboardHandler(this.CreateKeyboardHandler(this.EventManager));this.setId("nbox1000"+Math.floor(1E9*Math.random()));this.legend=
this._animation=null;this._peers=[]};
DvtNBox.prototype.SetOptions=function(a){a||(a=this.getSanitizedOptions());a?(this.Options=this.Defaults.calcOptions(a),DvtNBoxDataUtils.processDataObject(this),DvtAgent.isEnvironmentBrowser()||(this.Options[DvtNBoxConstants.ANIMATION_ON_DISPLAY]="none",this.Options[DvtNBoxConstants.ANIMATION_ON_DATA_CHANGE]="none")):this.Options||(this.Options=this.GetDefaults());this._displayables=[];a=this.Options[DvtNBoxConstants.SELECTION_MODE];this._selectionHandler="single"==a?new DvtSelectionHandler(DvtSelectionHandler.TYPE_SINGLE):
"multiple"==a?new DvtSelectionHandler(DvtSelectionHandler.TYPE_MULTIPLE):null;this.EventManager.setSelectionHandler(this._selectionHandler)};
DvtNBox.prototype.render=function(a,b,c){var d=DvtNBoxStyleUtils.getAnimationOnDataChange(this),e=null;this.Options&&"none"!==d&&(e={options:this.Options,getOptions:function(){return this.options},displayables:this._displayables,getDisplayables:function(){return this.displayables},id:this.getId(),getId:function(){return this.id}},e.getOptions=e.getOptions,e.getDisplayables=e.getDisplayables,e.getId=e.getId);this.__cleanUp();this.SetOptions(a);isNaN(b)||isNaN(c)||(this.Width=b,this.Height=c);b=new DvtContainer(this.getCtx());
this.addChild(b);DvtNBoxRenderer.render(this,b,new DvtRectangle(0,0,this.Width,this.Height));c=[this];var g=DvtNBoxDataUtils.getLegend(this);if(g&&g.sections){var h=DvtNBoxDataUtils.getDisplayable(this,g,"panelDrawer");h&&(c.push(h),h.isDisclosed()&&(g=DvtNBoxDataUtils.getDisplayable(this,g,"legend"),c.push(g)))}this.getCtx().setKeyboardFocusArray(c);this._updateKeyboardFocusEffect();this._animation&&(this._animationStopped=!0,this._animation.stop());var g=DvtNBoxStyleUtils.getAnimationOnDisplay(this),
h=DvtNBoxStyleUtils.getAnimationDuration(this),k=new DvtRectangle(0,0,this.Width,this.Height);c=!1;this._container?"none"!=d&&a&&((this._animation=DvtBlackBoxAnimationHandler.getCombinedAnimation(this.getCtx(),d,this._container,b,k,h))?c=!0:(this._deleteContainer=new DvtContainer(this.getCtx(),"DeleteContainer"),this.addChild(this._deleteContainer),a=new DvtNBoxDataAnimationHandler(this.getCtx(),this._deleteContainer,e,this),a.constructAnimation([e],[this]),this._animation=a.getAnimation())):"none"!==
g&&(this._animation=DvtBlackBoxAnimationHandler.getInAnimation(this.getCtx(),g,b,k,h));this._animation&&(this.setMouseEnabled(!1),this._animation.setOnEnd(this._onAnimationEnd,this),this._animation.play());c?this._oldContainer=this._container:this._container&&(this.removeChild(this._container),this._container.destroy());this._container=b;this.UpdateAriaAttributes()};DvtNBox.prototype.__cleanUp=function(){this.EventManager.hideTooltip();this._peers.length=0};
DvtNBox.prototype._onAnimationEnd=function(){this._oldContainer&&(this.removeChild(this._oldContainer),this._oldContainer.destroy(),this._oldContainer=null);this._deleteContainer&&(this.removeChild(this._deleteContainer),this._deleteContainer.destroy());this._deleteContainer=null;this._animationStopped=!1;this._animation=null;this.setMouseEnabled(!0)};DvtNBox.prototype.CreateKeyboardHandler=function(a){return new DvtNBoxKeyboardHandler(a,this)};DvtNBox.prototype.getChildContainer=function(){return this._container};
DvtNBox.prototype.getDeleteContainer=function(){return this._deleteContainer};DvtNBox.prototype.getDisplayables=function(){return this._displayables};DvtNBox.prototype._updateKeyboardFocusEffect=function(){var a=this.EventManager.getFocus(),b=!1;if(a){var c,b=a.isShowingKeyboardFocusEffect();a.getKeyboardFocusDisplayable&&(c=a.getKeyboardFocusDisplayable());c&&b&&c.showKeyboardFocusEffect();this.EventManager.setFocus(c)}};DvtNBox.prototype.__getEventManager=function(){return this.EventManager};
DvtNBox.prototype.processEvent=function(a,b){var c=a.getType(),d=this.getSanitizedOptions();c==DvtCategoryHideShowEvent.TYPE_HIDE||c==DvtCategoryHideShowEvent.TYPE_SHOW?a=this._processHideShowEvent(a):c==DvtCategoryRolloverEvent.TYPE_OVER||c==DvtCategoryRolloverEvent.TYPE_OUT?a=this._processRolloverEvent(a):c==DvtSelectionEvent.TYPE?a=this._processSelectionEvent(a):d._legend&&c==DvtPanelDrawerEvent.TYPE&&(c=a.getSubType()==DvtPanelDrawerEvent.SUBTYPE_HIDE?"undisclosed":"disclosed",a=new DvtSetPropertyEvent,
a.addParam(DvtNBoxConstants.LEGEND_DISCLOSURE,c),d[DvtNBoxConstants.LEGEND_DISCLOSURE]=c,this.render(d));a&&this.__dispatchEvent(a)};
DvtNBox.prototype._processHideShowEvent=function(a){var b=this.getSanitizedOptions(),c=b[DvtNBoxConstants.HIDDEN_CATEGORIES];c||(c=[]);var d=DvtArrayUtils.getIndex(c,a.getCategory());a.getType()==DvtCategoryHideShowEvent.TYPE_HIDE&&-1==d&&c.push(a.getCategory());a.getType()==DvtCategoryHideShowEvent.TYPE_SHOW&&-1!=d&&c.splice(d,1);0==c.length&&(c=null);a=new DvtSetPropertyEvent;a.addParam(DvtNBoxConstants.HIDDEN_CATEGORIES,c);b[DvtNBoxConstants.HIDDEN_CATEGORIES]=c;this.render(b);return a};
DvtNBox.prototype._processRolloverEvent=function(a){this._processHighlighting(a.categories);return a};
DvtNBox.prototype._processSelectionEvent=function(a){var b=a.getSelection(),c=null;if(b){a={};for(c=0;c<b.length;c++)a[b[c]]=!0;var b=this.getObjects(),d=null;if(DvtNBoxDataUtils.getGrouping(this))for(c=0;c<b.length;c++)if(b[c]instanceof DvtNBoxCategoryNode){if(a[b[c].getId()]){a[b[c].getId()]=!1;for(var e=b[c].getData().nodeIndices,g=0;g<e.length;g++){var h=DvtNBoxDataUtils.getNode(this,e[g]);a[h[DvtNBoxConstants.ID]]=!0}}}else b[c]instanceof DvtNBoxDrawer&&(d=b[c]);var b=[],c=[],k;for(k in a)a[k]&&
(b.push(k),c.push(k));a=new DvtSelectionEvent(b)}DvtNBoxDataUtils.setSelectedItems(this,c);d&&d.UpdateAccessibilityAttributes();return a};DvtNBox.prototype._distributeToChildren=function(a,b){this.legend&&this.legend!=b&&this.legend.processEvent(a,b)};DvtNBox.prototype.registerObject=function(a){this._peers.push(a)};DvtNBox.prototype.getObjects=function(){return this._peers};DvtNBox.prototype.getWidth=function(){return this.Width};DvtNBox.prototype.getHeight=function(){return this.Height};
DvtNBox.prototype.getSelectionHandler=function(){return this._selectionHandler};DvtNBox.prototype.isSelectionSupported=function(){return this._selectionHandler?!0:!1};DvtNBox.prototype.getShowPopupBehaviors=function(a){return this._popupBehaviors?this._popupBehaviors[a]:null};DvtNBox.prototype.animateUpdate=function(a,b){DvtNBoxRenderer.animateUpdate(a,b,this)};DvtNBox.prototype.getSanitizedOptions=function(){return DvtJSONUtils.clone(this.getOptions(),function(a){return 0!=a.indexOf("__")})};
DvtNBox.prototype.getSubcomponentStyles=function(){return{}};DvtNBox.prototype.__isDragAvailable=function(a){return this._selectionHandler?a[0]:null};
DvtNBox.prototype.__getDragTransferable=function(a){a.isSelected()||(this._selectionHandler.processClick(a,!1),this.EventManager.fireSelectionEvent());a=[];for(var b=this._selectionHandler.getSelection(),c=0;c<b.length;c++){var d=b[c];if(d instanceof DvtNBoxNode)a.push(d.getData()[DvtNBoxConstants.ID]);else if(d instanceof DvtNBoxCategoryNode)for(var d=d.getData().nodeIndices,e=0;e<d.length;e++)a.push(DvtNBoxDataUtils.getNode(this,d[e])[DvtNBoxConstants.ID])}return a};
DvtNBox.prototype.__getDragFeedback=function(){return this._selectionHandler.getSelection().slice(0)};DvtNBox.prototype.__getCellUnderPoint=function(a,b){for(var c=DvtNBoxDataUtils.getRowCount(this)*DvtNBoxDataUtils.getColumnCount(this),d=0;d<c;d++){var e=DvtNBoxDataUtils.getDisplayable(this,DvtNBoxDataUtils.getCell(this,d));if(e.contains(a,b))return e}return null};
DvtNBox.prototype.__showDropSiteFeedback=function(a){this._dropSiteFeedback&&(this._dropSiteFeedback.getParent().removeChild(this._dropSiteFeedback),this._dropSiteFeedback=null);a&&(this._dropSiteFeedback=a.renderDropSiteFeedback());return this._dropSiteFeedback};DvtNBox.prototype.getAutomation=function(){this.Automation||(this.Automation=new DvtNBoxAutomation(this));return this.Automation};
DvtNBox.prototype.GetComponentDescription=function(){return DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"NBOX",DvtNBoxDataUtils.getColumnCount(this)*DvtNBoxDataUtils.getRowCount(this))};DvtNBox.prototype.highlight=function(a){this.Options.highlightedCategories=DvtJSONUtils.clone(a);this._processHighlighting(a)};
DvtNBox.prototype._processHighlighting=function(a){var b=this.getNodeDisplayables(),c=DvtNBoxDataUtils.getRowCount(this)*DvtNBoxDataUtils.getColumnCount(this);this.getOptions().__highlightedMap=null;for(var d=DvtNBoxRenderer._calculateCellCounts(this),e=0;e<c;e++){var g=DvtNBoxDataUtils.getCell(this,e),h=DvtNBoxDataUtils.getDisplayable(this,g);DvtNBoxCellRenderer.renderHeader(this,g,h,d,!1)}d=DvtNBoxDataUtils.getHighlightedItems(this);c={};if(d)for(var e=0;e<d.length;e++)c[d[e][DvtNBoxConstants.ID]]=
!0;for(e=0;e<b.length;e++){if(d=a&&0<a.length){a:{d=b[e];if(d instanceof DvtNBoxNode){if(d.getCategories()){d="all"==this.getOptions()[DvtNBoxConstants.HIGHLIGHT_MATCH]?DvtArrayUtils.hasAllItems(a,d.getCategories()):DvtArrayUtils.hasAnyItem(a,d.getCategories());break a}}else if(d instanceof DvtNBoxCategoryNode)for(d=d.getData(),g=d.nodeIndices.length,h=0;h<g;h++){var k=DvtNBoxDataUtils.getNode(this,d.nodeIndices[h]);if(k[DvtNBoxConstants.CATEGORIES]&&("all"==this.getOptions()[DvtNBoxConstants.HIGHLIGHT_MATCH]?
DvtArrayUtils.hasAllItems(a,k[DvtNBoxConstants.CATEGORIES]):DvtArrayUtils.hasAnyItem(a,k[DvtNBoxConstants.CATEGORIES]))){d=!0;break a}}d=!1}d=!d}d?b[e].setAlpha(DvtNBoxStyleUtils.getFadedNodeAlpha(this)):b[e].setAlpha(1);if(b[e]instanceof DvtNBoxCategoryNode){g=0;d=b[e].getData();for(h=0;h<d.nodeIndices.length;h++)c[d.nodeIndices[h]]&&(g+=1);d.highlightedCount=g;g=null!=DvtNBoxStyleUtils.getStyledCategoryIndicatorIcon(this,d)||null!=DvtNBoxStyleUtils.getCategoryNodeIndicatorColor(this,d);DvtNBoxCategoryNodeRenderer._renderNodeCount(this,
b[e].getData(),b[e],d.__scale,g,d.__gap)}}};
DvtNBox.prototype.getNodeDisplayables=function(){for(var a=[],b=DvtNBoxDataUtils.getNodeCount(this),c=0;c<b;c++)a.push(DvtNBoxDataUtils.getNode(this,c));c=DvtNBoxDataUtils.getGroupBehavior(this);if(b=this.getOptions().__groups)if(c==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL)for(var d=DvtNBoxDataUtils.getRowCount(this)*DvtNBoxDataUtils.getColumnCount(this),c=0;c<d;c++){var e=b[c+""],g;for(g in e)a.push(e[g])}else for(g in b)a.push(b[g]);g=[];for(c=0;c<a.length;c++)(b=DvtNBoxDataUtils.getDisplayable(this,
a[c]))&&g.push(b);return g};DvtNBox.prototype.isDragAvailable=function(a,b,c){return this._dragSource.isDragAvailable(c)};DvtNBox.prototype.getDragTransferable=function(a,b){return this._dragSource.getDragTransferable(a,b)};DvtNBox.prototype.getDragOverFeedback=function(a,b){return this._dragSource.getDragOverFeedback(a,b)};DvtNBox.prototype.getDragContext=function(a,b){return this._dragSource.getDragContext(a,b)};
DvtNBox.prototype.getDragOffset=function(a,b){return this._dragSource.getDragOffset(a,b)};DvtNBox.prototype.getPointerOffset=function(a,b){return this._dragSource.getPointerOffset(a,b)};DvtNBox.prototype.initiateDrag=function(){this._dragSource.initiateDrag()};DvtNBox.prototype.dragDropEnd=function(){this._dragSource.dragDropEnd()};DvtNBox.prototype.acceptDrag=function(a,b,c){return this._dropTarget.acceptDrag(a,b,c)};DvtNBox.prototype.dragEnter=function(){this._dropTarget.dragEnter()};
DvtNBox.prototype.dragExit=function(){this._dropTarget.dragExit()};DvtNBox.prototype.getDropSite=function(a,b){return this._dropTarget.getDropSite(a,b)};var DvtNBoxConstants={};DvtObj.createSubclass(DvtNBoxConstants,DvtObj,"DvtNBoxConstants");DvtNBoxConstants.COLUMN="column";DvtNBoxConstants.COLUMNS="columns";DvtNBoxConstants.COLUMNS_TITLE="columnsTitle";DvtNBoxConstants.COLUMNS_TITLE_STYLE="columnsTitleStyle";DvtNBoxConstants.COLUMN_LABEL_STYLE="columnLabelStyle";
DvtNBoxConstants.MAXIMIZED_COLUMN="maximizedColumn";DvtNBoxConstants.ROW="row";DvtNBoxConstants.ROWS="rows";DvtNBoxConstants.ROWS_TITLE="rowsTitle";DvtNBoxConstants.ROWS_TITLE_STYLE="rowsTitleStyle";DvtNBoxConstants.ROW_LABEL_STYLE="rowLabelStyle";DvtNBoxConstants.MAXIMIZED_ROW="maximizedRow";DvtNBoxConstants.CELL="cell";DvtNBoxConstants.CELLS="cells";DvtNBoxConstants.CELL_DEFAULTS="cellDefaults";DvtNBoxConstants.NODES="nodes";DvtNBoxConstants.NODE_DEFAULTS="nodeDefaults";
DvtNBoxConstants.CATEGORIES="categories";DvtNBoxConstants.ICON="icon";DvtNBoxConstants.ICON_DEFAULTS="iconDefaults";DvtNBoxConstants.INDICATOR="indicator";DvtNBoxConstants.INDICATOR_ICON="indicatorIcon";DvtNBoxConstants.INDICATOR_ICON_DEFAULTS="indicatorIconDefaults";DvtNBoxConstants.INDICATOR_COLOR="indicatorColor";DvtNBoxConstants.X_PERCENTAGE="xPercentage";DvtNBoxConstants.Y_PERCENTAGE="yPercentage";DvtNBoxConstants.SELECTION="selection";DvtNBoxConstants.SELECTION_MODE="selectionMode";
DvtNBoxConstants.SELECTION_INFO="selectionInfo";DvtNBoxConstants.HIGHLIGHTED_CATEGORIES="highlightedCategories";DvtNBoxConstants.HIGHLIGHT_MATCH="highlightMatch";DvtNBoxConstants.HIDDEN_CATEGORIES="hiddenCategories";DvtNBoxConstants.HOVER_BEHAVIOR="hoverBehavior";DvtNBoxConstants.GROUP_CATEGORY="groupCategory";DvtNBoxConstants.GROUP_ATTRIBUTES="groupAttributes";DvtNBoxConstants.GROUP_BEHAVIOR="groupBehavior";DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL="withinCell";
DvtNBoxConstants.GROUP_BEHAVIOR_ACROSS_CELLS="acrossCells";DvtNBoxConstants.OTHER_COLOR="otherColor";DvtNBoxConstants.OTHER_THRESHOLD="otherThreshold";DvtNBoxConstants.ANIMATION_ON_DATA_CHANGE="animationOnDataChange";DvtNBoxConstants.ANIMATION_ON_DISPLAY="animationOnDisplay";DvtNBoxConstants.ANIMATION_DURATION="animationDuration";DvtNBoxConstants.DRAWER="_drawer";DvtNBoxConstants.LEGEND="_legend";DvtNBoxConstants.LEGEND_DISCLOSURE="legendDisclosure";DvtNBoxConstants.ID="id";
DvtNBoxConstants.LABEL="label";DvtNBoxConstants.LABEL_STYLE="labelStyle";DvtNBoxConstants.LABEL_HALIGN="labelHalign";DvtNBoxConstants.SECONDARY_LABEL="secondaryLabel";DvtNBoxConstants.SECONDARY_LABEL_STYLE="secondaryLabelStyle";DvtNBoxConstants.SHORT_DESC="shortDesc";DvtNBoxConstants.SHOW_COUNT="showCount";DvtNBoxConstants.STYLE="style";DvtNBoxConstants.STYLE_DEFAULTS="styleDefaults";DvtNBoxConstants.BORDER_COLOR="borderColor";DvtNBoxConstants.BORDER_RADIUS="borderRadius";
DvtNBoxConstants.BORDER_WIDTH="borderWidth";DvtNBoxConstants.COLOR="color";DvtNBoxConstants.PATTERN="pattern";DvtNBoxConstants.OPACITY="opacity";DvtNBoxConstants.SHAPE="shape";DvtNBoxConstants.SOURCE="source";DvtNBoxConstants.HEIGHT="height";DvtNBoxConstants.WIDTH="width";DvtBundle.addDefaultStrings(DvtBundle.NBOX_PREFIX,{HIGHLIGHTED_COUNT:"{0}/{1}",COMMA_SEP_LIST:"{0}, {1}",OTHER:"Other",LEGEND:"Legend",GROUP_NODE:"Group",ADDITIONAL_DATA:"Additional Data",SIZE:"Size"});
var DvtNBoxDefaults=function(){this.Init({skyros:DvtNBoxDefaults.VERSION_1,alta:DvtNBoxDefaults.SKIN_ALTA})};DvtObj.createSubclass(DvtNBoxDefaults,DvtBaseComponentDefaults,"DvtNBoxDefaults");
DvtNBoxDefaults.VERSION_1={skin:DvtCSSStyle.SKIN_ALTA,selectionMode:"multiple",animationOnDataChange:"none",animationOnDisplay:"none",legendDisplay:"auto",legendDisclosure:"disclosed",groupBehavior:"withinCell",otherColor:"#636363",otherThreshold:0,hoverBehavior:"none",highlightMatch:"all",highlightedCategories:[],styleDefaults:{animationDuration:333,hoverBehaviorDelay:200,columnLabelStyle:new DvtCSSStyle('font-size: 12px; color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif'),
rowLabelStyle:new DvtCSSStyle('font-size: 12px; color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif'),columnsTitleStyle:new DvtCSSStyle('font-size: 14px; color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif'),rowsTitleStyle:new DvtCSSStyle('font-size: 14px; color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif'),cellDefaults:{style:new DvtCSSStyle("background-color:#dddddd"),minimizedStyle:new DvtCSSStyle("background-color:#f0f0f0"),
labelStyle:new DvtCSSStyle('font-size: 14px; color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold'),countLabelStyle:new DvtCSSStyle('font-size: 14px; color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif'),bodyCountLabelStyle:new DvtCSSStyle('color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif'),dropTargetStyle:new DvtCSSStyle("background-color:rgba(217, 244, 250, .75);border-color:#ccf6ff"),showCount:"off",showMaximize:"on"},
__scrollbar:{scrollbarBackground:"linear-gradient(bottom, #dce2e7 0%, #f8f8f8 8%)",scrollbarBorderColor:"#dce2e7",scrollbarHandleColor:"#abb0b4",scrollbarHandleHoverColor:"#333333",scrollbarHandleActiveColor:"#333333"},__drawerDefaults:{background:"#dddddd",borderColor:"#c4ced7",borderRadius:1,headerBackground:"linear-gradient(to bottom, #f5f5f5 0%, #f0f0f0 100%)",labelStyle:new DvtCSSStyle('font-size: 14px; color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold'),
countLabelStyle:new DvtCSSStyle('font-size: 14px; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold'),countBorderRadius:1},nodeDefaults:{color:"#FFFFFF",labelStyle:new DvtCSSStyle('font-size: 12px; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif'),secondaryLabelStyle:new DvtCSSStyle('font-size: 11px; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif'),alphaFade:.2,borderRadius:1,hoverColor:"#FFFFFF",selectionColor:"#000000",iconDefaults:{preferredSize:19,
preferredSizeTouch:34,shapePaddingRatio:.15,sourcePaddingRatio:0,opacity:1,pattern:"none",borderWidth:1,borderRadius:0,shape:DvtSimpleMarker.CIRCLE},indicatorIconDefaults:{width:10,height:10,opacity:1,pattern:"none",borderWidth:1,borderRadius:0,shape:DvtSimpleMarker.CIRCLE}},__legendDefaults:{sectionStyle:'font-size: 12px; color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif; font-weight:bold',itemStyle:'font-size: 12px; color: #252525; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif',
markerColor:"#808080"},__categoryNodeDefaults:{labelStyle:new DvtCSSStyle('font-family:"Helvetica Neue", Helvetica, Arial, sans-serif')}},__layout:{componentGap:8,titleGap:4,titleComponentGap:4,nodeLabelOnlyStartLabelGap:5,nodeStartLabelGap:3,nodeEndLabelGap:5,nodeSingleLabelGap:2,nodeDualLabelGap:2,nodeInterLabelGap:0,nodeIndicatorGap:3,nodeSwatchSize:10,categoryNodeLabelGap:5,minimumCellSize:34,cellGap:3,gridGap:6,cellStartGap:6,cellEndGap:6,cellTopGap:6,cellBottomGap:6,cellLabelGap:6,countLabelGap:10,
markerGap:3,minimumLabelWidth:55,maximumLabelWidth:148,drawerButtonGap:10,drawerCountHorizontalGap:5,drawerCountVerticalGap:3,drawerStartGap:10,drawerLabelGap:7,drawerHeaderHeight:31}};DvtNBoxDefaults.SKIN_ALTA={};var DvtNBoxCell=function(){};DvtObj.createSubclass(DvtNBoxCell,DvtContainer,"DvtNBoxCell");DvtNBoxCell.newInstance=function(a,b){var c=new DvtNBoxCell;c.Init(a,b);return c};
DvtNBoxCell.prototype.Init=function(a,b){var c=DvtNBoxDataUtils.getRowIndex(a,b[DvtNBoxConstants.ROW]),d=DvtNBoxDataUtils.getColumnIndex(a,b[DvtNBoxConstants.COLUMN]);DvtNBoxCell.superclass.Init.call(this,a.getCtx(),null,"c:"+c+","+d);this._nbox=a;this._data=b;this._scrollContainer=!1};DvtNBoxCell.prototype.getData=function(){return this._data};
DvtNBoxCell.prototype.render=function(a,b,c,d){this._cellCounts=c;a.addChild(this);DvtNBoxDataUtils.setDisplayable(this._nbox,this._data,this);DvtNBoxCellRenderer.render(this._nbox,this._data,this,b,c,d);this._nbox.EventManager.associate(this,this)};DvtNBoxCell.prototype.getChildContainer=function(){return this._childContainer};DvtNBoxCell.prototype.setChildContainer=function(a){this._childContainer=a};DvtNBoxCell.prototype.animateUpdate=function(a,b){DvtNBoxCellRenderer.animateUpdate(a,b,this)};
DvtNBoxCell.prototype.animateDelete=function(a,b){DvtNBoxCellRenderer.animateDelete(a,this)};DvtNBoxCell.prototype.animateInsert=function(a){DvtNBoxCellRenderer.animateInsert(a,this)};DvtNBoxCell.prototype.isDoubleClickable=function(){return!0};
DvtNBoxCell.prototype.handleDoubleClick=function(){var a=DvtNBoxDataUtils.getMaximizedRow(this._nbox),b=DvtNBoxDataUtils.getMaximizedColumn(this._nbox),c=this._nbox.getSanitizedOptions(),d=new DvtSetPropertyEvent,e=c[DvtNBoxConstants.DRAWER];c[DvtNBoxConstants.DRAWER]=null;d.addParam(DvtNBoxConstants.DRAWER,null);e||a!=this._data[DvtNBoxConstants.ROW]||b!=this._data[DvtNBoxConstants.COLUMN]?(c[DvtNBoxConstants.MAXIMIZED_ROW]=this._data[DvtNBoxConstants.ROW],d.addParam(DvtNBoxConstants.MAXIMIZED_ROW,
this._data[DvtNBoxConstants.ROW]),c[DvtNBoxConstants.MAXIMIZED_COLUMN]=this._data[DvtNBoxConstants.COLUMN],d.addParam(DvtNBoxConstants.MAXIMIZED_COLUMN,this._data[DvtNBoxConstants.COLUMN])):(c[DvtNBoxConstants.MAXIMIZED_ROW]=null,d.addParam(DvtNBoxConstants.MAXIMIZED_ROW,null),c[DvtNBoxConstants.MAXIMIZED_COLUMN]=null,d.addParam(DvtNBoxConstants.MAXIMIZED_COLUMN,null));this._nbox.processEvent(d);this._nbox.render(c)};
DvtNBoxCell.prototype.contains=function(a,b){var c=DvtNBoxDataUtils.getDisplayable(this._nbox,this._data,"background"),d=this.getTranslateX()+c.getX(),e=this.getTranslateY()+c.getY(),g=d+c.getWidth(),c=e+c.getHeight();return d<=a&&a<=g&&e<=b&&b<=c};DvtNBoxCell.prototype.renderDropSiteFeedback=function(){return DvtNBoxCellRenderer.renderDropSiteFeedback(this._nbox,this)};
DvtNBoxCell.prototype.HandleKeyboardEvent=function(a){var b=DvtNBoxDataUtils.getMaximizedRow(this._nbox),c=DvtNBoxDataUtils.getMaximizedColumn(this._nbox),b=b==this._data[DvtNBoxConstants.ROW]&&c==this._data[DvtNBoxConstants.COLUMN]?!0:!1;(!b&&a.keyCode==DvtKeyboardEvent.ENTER||b&&a.keyCode==DvtKeyboardEvent.ESCAPE)&&this.handleDoubleClick()};
DvtNBoxCell.prototype.getAriaLabel=function(){var a=this.getCellIndex(),b=[];DvtNBoxDataUtils.isCellMaximized(this._nbox,a)?b.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"STATE_MAXIMIZED")):DvtNBoxDataUtils.isCellMinimized(this._nbox,a)&&b.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"STATE_MINIMIZED"));b.push([DvtBundle.getTranslatedString(DvtBundle.NBOX_PREFIX,"SIZE"),this.getNodeCount()]);return DvtDisplayable.generateAriaLabel(this.getData().shortDesc,b)};
DvtNBoxCell.prototype.getKeyboardBoundingBox=function(a){return DvtNBoxKeyboardHandler.getKeyboardBoundingBox(this,a)};DvtNBoxCell.prototype.getTargetElem=function(){return this.getElem()};DvtNBoxCell.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0;DvtNBoxDataUtils.getDisplayable(this._nbox,this.getData(),"focusEffect").show()};
DvtNBoxCell.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1;DvtNBoxDataUtils.getDisplayable(this._nbox,this.getData(),"focusEffect").hide()};DvtNBoxCell.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};
DvtNBoxCell.prototype.getNextNavigable=function(a){var b=null;this._nbox.EventManager.getKeyboardHandler().isNavigationEvent(a)&&(b=a.keyCode==DvtKeyboardEvent.OPEN_BRACKET?this._getFirstNavigableChild(a):this._getNextSibling(a));return b};
DvtNBoxCell.prototype._getNextSibling=function(a){for(var b=[],c=DvtNBoxDataUtils.getRowCount(this._nbox)*DvtNBoxDataUtils.getColumnCount(this._nbox),d=0;d<c;d++)b.push(DvtNBoxDataUtils.getDisplayable(this._nbox,DvtNBoxDataUtils.getCell(this._nbox,d)));return DvtKeyboardHandler.getNextNavigable(this,a,b)};
DvtNBoxCell.prototype._getFirstNavigableChild=function(a){var b=null,b=DvtNBoxDataUtils.getMaximizedRow(this._nbox),c=DvtNBoxDataUtils.getMaximizedColumn(this._nbox),d=DvtNBoxDataUtils.getDrawer(this._nbox);if(d&&b==this.getData()[DvtNBoxConstants.ROW]&&c==this.getData()[DvtNBoxConstants.COLUMN])b=DvtNBoxDataUtils.getDisplayable(this._nbox,d);else if(b=this.getChildContainer(),b.getScrollingPane&&(b=b.getScrollingPane()),0<b.getNumChildren()&&(b.getChildAt(0)instanceof DvtNBoxNode||b.getChildAt(0)instanceof
DvtNBoxNodeOverflow))b=DvtNBoxDataUtils.getFirstNavigableNode(this._nbox,b);else{c=[];for(d=0;d<b.getNumChildren();d++){var e=b.getChildAt(d);e instanceof DvtNBoxCategoryNode&&c.push(e)}b=DvtNBoxKeyboardHandler.getNextNavigableCategoryNode(null,a,c)}return b};DvtNBoxCell.prototype.getCellIndex=function(){return DvtNBoxDataUtils.getCellIndexByRowColumn(this._nbox,this.getData()[DvtNBoxConstants.ROW],this.getData()[DvtNBoxConstants.COLUMN])};
DvtNBoxCell.prototype.getLabel=function(){var a=this.getData()[DvtNBoxConstants.LABEL];return a?a:null};DvtNBoxCell.prototype.getBackground=function(){var a=DvtNBoxStyleUtils.getCellStyle(this._nbox,this.getCellIndex()),b=a.getStyle(DvtCSSStyle.BACKGROUND),a=a.getStyle(DvtCSSStyle.BACKGROUND_COLOR);return b?b:a};
DvtNBoxCell.prototype.hasOverflowIndicator=function(){var a=this._nbox.getOptions();if(a&&a.__layout&&a.__layout.__nodeLayout&&a.__layout.__nodeLayout.cellLayouts){var b=this.getCellIndex();if(a=a.__layout.__nodeLayout.cellLayouts[b])return a.overflow}return!1};DvtNBoxCell.prototype.getNodeCount=function(){this._cellCounts||(this._cellCounts=DvtNBoxRenderer._calculateCellCounts(this._nbox));var a=this.getCellIndex();return this._cellCounts.total[a]};
DvtNBoxCell.prototype.getNode=function(a){var b=this._nbox.getOptions()[DvtNBoxConstants.NODES];if(b)for(var c=0,d=0;d<b.length;d++)if(this.getData()[DvtNBoxConstants.ROW]==b[d][DvtNBoxConstants.ROW]&&this.getData()[DvtNBoxConstants.COLUMN]==b[d][DvtNBoxConstants.COLUMN]&&!DvtNBoxDataUtils.isNodeHidden(this._nbox,b[d])){if(a==c)return b[d];c++}return null};
DvtNBoxCell.prototype.getKeyboardFocusDisplayable=function(){return DvtNBoxDataUtils.getGroupBehavior(this._nbox)==DvtNBoxConstants.GROUP_BEHAVIOR_ACROSS_CELLS&&this._nbox.getOptions().__groups?null:DvtNBoxDataUtils.getDisplayable(this._nbox,DvtNBoxDataUtils.getCell(this._nbox,DvtNBoxDataUtils.getCellIndex(this._nbox,this.getData())))};var DvtNBoxNode=function(){};DvtObj.createSubclass(DvtNBoxNode,DvtContainer,"DvtNBoxNode");
DvtNBoxNode.newInstance=function(a,b){var c=new DvtNBoxNode;c.Init(a,b);return c};DvtNBoxNode.prototype.Init=function(a,b){DvtNBoxNode.superclass.Init.call(this,a.getCtx(),null,b[DvtNBoxConstants.ID]);this._nbox=a;this._data=b;this._nbox.registerObject(this);var c=this._nbox.getOptions()[DvtNBoxConstants.SELECTION_MODE];("single"==c||"multiple"==c||this.getAction())&&this.setCursor(DvtSelectionEffectUtils.getSelectingCursor());this._maxAlpha=1};DvtNBoxNode.prototype.getData=function(){return this._data};
DvtNBoxNode.prototype.getAction=function(){return this._data.action};DvtNBoxNode.prototype.render=function(a,b){DvtNBoxNodeRenderer.render(this._nbox,this._data,this,b);a.addChild(this);DvtNBoxDataUtils.setDisplayable(this._nbox,this._data,this);this._nbox.EventManager.associate(this,this)};DvtNBoxNode.prototype.isSelectable=function(){return!0};DvtNBoxNode.prototype.isSelected=function(){return this.getSelectionShape().isSelected()};
DvtNBoxNode.prototype.setSelected=function(a){this.getSelectionShape().setSelected(a);this.UpdateAccessibilityAttributes()};DvtNBoxNode.prototype.showHoverEffect=function(){this.getSelectionShape().showHoverEffect()};DvtNBoxNode.prototype.hideHoverEffect=function(){this.getSelectionShape().hideHoverEffect()};DvtNBoxNode.prototype.setSelectionShape=function(a){this._selectionShape=a};DvtNBoxNode.prototype.getSelectionShape=function(){return this._selectionShape};
DvtNBoxNode.prototype.getDatatip=function(a,b,c){return(a=this._nbox.getOptions().tooltip)?(b={id:this._data.id,label:this._data.label,secondaryLabel:this._data.secondaryLabel,row:this._data.row,column:this._data.column,color:DvtNBoxStyleUtils.getNodeColor(this._nbox,this._data),indicatorColor:DvtNBoxStyleUtils.getNodeIndicatorColor(this._nbox,this._data)},this._nbox.getCtx().getTooltipManager().getCustomTooltip(a,b)):this.getShortDesc()};DvtNBoxNode.prototype.getShortDesc=function(){return this._data[DvtNBoxConstants.SHORT_DESC]};
DvtNBoxNode.prototype.getDatatipColor=function(){return DvtNBoxStyleUtils.getNodeColor(this._nbox,this._data)};DvtNBoxNode.prototype.setMaxAlpha=function(a){this._maxAlpha=a;this.setAlpha(this.getAlpha())};DvtNBoxNode.prototype.getMaxAlpha=function(){return this._maxAlpha};DvtNBoxNode.prototype.setAlpha=function(a){DvtNBoxNode.superclass.setAlpha.call(this,Math.min(a,this._maxAlpha))};DvtNBoxNode.prototype.animateUpdate=function(a,b){DvtNBoxNodeRenderer.animateUpdate(a,b,this)};
DvtNBoxNode.prototype.animateDelete=function(a,b){DvtNBoxNodeRenderer.animateDelete(a,this)};DvtNBoxNode.prototype.animateInsert=function(a){DvtNBoxNodeRenderer.animateInsert(a,this)};DvtNBoxNode.prototype.isDoubleClickable=function(){return!0};DvtNBoxNode.prototype.handleDoubleClick=function(){this._getParentContainer().handleDoubleClick()};
DvtNBoxNode.prototype.getShowPopupBehaviors=function(){if(!this._showPopupBehaviors){this._showPopupBehaviors=[];var a=this._data.showPopupBehaviors;if(a)for(var b=0;b<a.length;b++)this._showPopupBehaviors.push(new DvtShowPopupBehavior(a[b].popupId,a[b].triggerType,a[b].alignId,a[b].align))}return this._showPopupBehaviors};
DvtNBoxNode.prototype.getPopupBounds=function(a){if(a&&a.getAlign()){a=DvtNBoxRenderer.getGlobalMatrix(this);var b=DvtNBoxDataUtils.getDisplayable(this._nbox,this._data,"background");return new DvtRectangle(a.getTx()+b.getX(),a.getTy()+b.getY(),b.getWidth(),b.getHeight())}return null};DvtNBoxNode.prototype.isDragAvailable=function(a){return this._nbox.__isDragAvailable(a)};DvtNBoxNode.prototype.getDragTransferable=function(a,b){return this._nbox.__getDragTransferable(this)};
DvtNBoxNode.prototype.getDragFeedback=function(a,b){return this._nbox.__getDragFeedback()};DvtNBoxNode.prototype._getParentContainer=function(){var a;a=DvtNBoxDataUtils.getDrawer(this._nbox);a||(a=DvtNBoxDataUtils.getCellIndex(this._nbox,this._data),a=DvtNBoxDataUtils.getCell(this._nbox,a));return a=DvtNBoxDataUtils.getDisplayable(this._nbox,a)};
DvtNBoxNode.prototype.UpdateAccessibilityAttributes=function(){if(!DvtAgent.deferAriaCreation()){var a=this.getAriaLabel();a&&this.setAriaProperty(DvtNBoxConstants.LABEL,a)}};DvtNBoxNode.prototype.getAriaLabel=function(){return DvtNBoxDataUtils.buildAriaDesc(this._nbox,this,this.getShortDesc(),this.isSelected())};DvtNBoxNode.prototype.getCategories=function(){return this.getData()[DvtNBoxConstants.CATEGORIES]?this.getData()[DvtNBoxConstants.CATEGORIES]:[]};
DvtNBoxNode.prototype.getKeyboardBoundingBox=function(a){return DvtNBoxKeyboardHandler.getKeyboardBoundingBox(this,a)};DvtNBoxNode.prototype.getTargetElem=function(){return this.getElem()};DvtNBoxNode.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0;this.showHoverEffect()};DvtNBoxNode.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1;this.hideHoverEffect()};DvtNBoxNode.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};
DvtNBoxNode.prototype.getNextNavigable=function(a){var b=null;if(a.keyCode==DvtKeyboardEvent.SPACE&&a.ctrlKey)return this;this._nbox.EventManager.getKeyboardHandler().isNavigationEvent(a)?b=a.keyCode==DvtKeyboardEvent.CLOSE_BRACKET?this._getParentContainer():a.keyCode==DvtKeyboardEvent.OPEN_BRACKET?this:DvtNBoxDataUtils.getNextNavigableNode(this._nbox,this,a):a.type==DvtMouseEvent.CLICK&&(b=this);return b};
DvtNBoxNode.prototype.HandleKeyboardEvent=function(a){if(DvtNBoxDataUtils.getDrawer(this._nbox)&&a.keyCode==DvtKeyboardEvent.ESCAPE)this.handleDoubleClick();else{var b=DvtNBoxDataUtils.getMaximizedRow(this._nbox),c=DvtNBoxDataUtils.getMaximizedColumn(this._nbox),b=b==this._data[DvtNBoxConstants.ROW]&&c==this._data[DvtNBoxConstants.COLUMN]?!0:!1;(!b&&a.keyCode==DvtKeyboardEvent.ENTER||b&&a.keyCode==DvtKeyboardEvent.ESCAPE)&&this.handleDoubleClick()}};
DvtNBoxNode.prototype.getKeyboardFocusDisplayable=function(){var a=DvtNBoxDataUtils.getNode(this._nbox,DvtNBoxDataUtils.getNodeIndex(this._nbox,this.getData()[DvtNBoxConstants.ID]));if(a){var b=DvtNBoxDataUtils.getDisplayable(this._nbox,a);if(b)return b;a=DvtNBoxDataUtils.getCell(this._nbox,DvtNBoxDataUtils.getCellIndex(this._nbox,a));a=DvtNBoxDataUtils.getDisplayable(this._nbox,a);b=DvtNBoxDataUtils.getLastNavigableNode(this._nbox,a.getChildContainer());return b instanceof DvtNBoxNodeOverflow?b:
(b=this._getParentDrawer())?b.getKeyboardFocusDisplayable():a.getKeyboardFocusDisplayable()}return null};DvtNBoxNode.prototype._getParentDrawer=function(){for(var a=this;a&&a.getParent;)if(a=a.getParent(),a instanceof DvtNBoxDrawer)return a;return null};var DvtNBoxNodeOverflow=function(){};DvtObj.createSubclass(DvtNBoxNodeOverflow,DvtContainer,"DvtNBoxNodeOverflow");DvtNBoxNodeOverflow.newInstance=function(a,b){var c=new DvtNBoxNodeOverflow;c.Init(a,b);return c};
DvtNBoxNodeOverflow.prototype.Init=function(a,b){DvtNBoxNodeOverflow.superclass.Init.call(this,a.getCtx());this._nbox=a;this._cell=b;this._button};
DvtNBoxNodeOverflow.prototype.render=function(a,b,c){var d=this._nbox.getOptions(),e=d._resources.overflow_ena.width,g=d._resources.overflow_ena.height,h=1;if(b<e||c<g)h=Math.min(b/e,c/g);var e=h*e,g=h*g,h=(b-e)/2,k=(c-g)/2,m=this._nbox.getCtx(),n=new DvtRect(m,0,0,b,c),t=new DvtRect(m,0,0,b,c),u=new DvtRect(m,0,0,b,c);n.setInvisibleFill();t.setInvisibleFill();u.setInvisibleFill();var v=new DvtContainer(m),w=new DvtContainer(m),x=new DvtContainer(m);v.addChild(n);w.addChild(t);x.addChild(u);v.addChild(new DvtImage(m,
d._resources.overflow_ena.src,h,k,e,g));w.addChild(new DvtImage(m,d._resources.overflow_ovr.src,h,k,e,g));x.addChild(new DvtImage(m,d._resources.overflow_dwn.src,h,k,e,g));this._button=new DvtButton(m,v,w,x,null,null,this.HandleClick,this);this.addChild(this._button);b=new DvtKeyboardFocusEffect(this._nbox.getCtx(),this,new DvtRectangle(-1,-1,b+2,c+2));DvtNBoxDataUtils.setDisplayable(this._nbox,this,b,"focusEffect");a.addChild(this);this._addAccessibilityAttributes();this._nbox.EventManager.associate(this,
this)};DvtNBoxNodeOverflow.prototype.getParentCell=function(){return this._cell};DvtNBoxNodeOverflow.prototype.getButton=function(){return this._button};DvtNBoxNodeOverflow.prototype.HandleClick=function(a){DvtEventManager.consumeEvent(a);this._cell.handleDoubleClick(!0)};DvtNBoxNodeOverflow.prototype.HandleKeyboardEvent=function(a){a.keyCode==DvtKeyboardEvent.ENTER&&this._cell.handleDoubleClick()};
DvtNBoxNodeOverflow.prototype._addAccessibilityAttributes=function(){this.setAriaRole("button");if(!DvtAgent.deferAriaCreation()){var a=this.getAriaLabel();a&&this.setAriaProperty(DvtNBoxConstants.LABEL,a)}};DvtNBoxNodeOverflow.prototype.getDatatip=function(a,b,c){return DvtBundle.getTranslatedString(DvtBundle.NBOX_PREFIX,"ADDITIONAL_DATA")};DvtNBoxNodeOverflow.prototype.getAriaLabel=function(){return this.getDatatip()};
DvtNBoxNodeOverflow.prototype.getKeyboardBoundingBox=function(a){return DvtNBoxKeyboardHandler.getKeyboardBoundingBox(this,a)};DvtNBoxNodeOverflow.prototype.getTargetElem=function(){return this.getElem()};DvtNBoxNodeOverflow.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0;DvtNBoxDataUtils.getDisplayable(this._nbox,this,"focusEffect").show()};
DvtNBoxNodeOverflow.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1;DvtNBoxDataUtils.getDisplayable(this._nbox,this,"focusEffect").hide()};DvtNBoxNodeOverflow.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};
DvtNBoxNodeOverflow.prototype.getNextNavigable=function(a){var b=null;this._nbox.EventManager.getKeyboardHandler().isNavigationEvent(a)&&(b=a.keyCode==DvtKeyboardEvent.CLOSE_BRACKET?this.getParentCell():DvtNBoxDataUtils.getNextNavigableNode(this._nbox,this,a));return b};
DvtNBoxNodeOverflow.prototype.getKeyboardFocusDisplayable=function(){var a=DvtNBoxDataUtils.getNode(this._nbox,DvtNBoxDataUtils.getNodeIndex(this._nbox,this.__prev[DvtNBoxConstants.ID])).__next;return DvtNBoxDataUtils.getDisplayable(this._nbox,a)};var DvtNBoxCategoryNode=function(){};DvtObj.createSubclass(DvtNBoxCategoryNode,DvtContainer,"DvtNBoxCategoryNode");DvtNBoxCategoryNode.newInstance=function(a,b){var c=new DvtNBoxCategoryNode;c.Init(a,b);return c};
DvtNBoxCategoryNode.prototype.Init=function(a,b){DvtNBoxCategoryNode.superclass.Init.call(this,a.getCtx(),null,isNaN(b[DvtNBoxConstants.CELL])?b[DvtNBoxConstants.ID]:b[DvtNBoxConstants.CELL]+":"+b[DvtNBoxConstants.ID]);this._nbox=a;this._data=b;this._nbox.registerObject(this);"multiple"==this._nbox.getOptions()[DvtNBoxConstants.SELECTION_MODE]&&this.setCursor(DvtSelectionEffectUtils.getSelectingCursor());this._maxAlpha=1};DvtNBoxCategoryNode.prototype.getData=function(){return this._data};
DvtNBoxCategoryNode.prototype.render=function(a,b,c){DvtNBoxCategoryNodeRenderer.render(this._nbox,this._data,this,b,c);a.addChild(this);DvtNBoxDataUtils.setDisplayable(this._nbox,this._data,this);this._nbox.EventManager.associate(this,this)};DvtNBoxCategoryNode.prototype.isSelectable=function(){return"multiple"==this._nbox.getOptions()[DvtNBoxConstants.SELECTION_MODE]};DvtNBoxCategoryNode.prototype.isSelected=function(){return this.getSelectionShape().isSelected()};
DvtNBoxCategoryNode.prototype.setSelected=function(a){this.getSelectionShape().setSelected(a);this.UpdateAccessibilityAttributes()};DvtNBoxCategoryNode.prototype.showHoverEffect=function(){this.getSelectionShape().showHoverEffect()};DvtNBoxCategoryNode.prototype.hideHoverEffect=function(){this.getSelectionShape().hideHoverEffect()};DvtNBoxCategoryNode.prototype.setSelectionShape=function(a){this._selectionShape=a};DvtNBoxCategoryNode.prototype.getSelectionShape=function(){return this._selectionShape};
DvtNBoxCategoryNode.prototype.getLabel=function(){for(var a=DvtNBoxDataUtils.getCategoryNodeLabels(this._nbox,this._data);1<a.length;){var b=DvtBundle.getTranslatedString(DvtBundle.NBOX_PREFIX,"COMMA_SEP_LIST",[a[0],a[1]]);a.splice(0,2,b)}return a[0]};
DvtNBoxCategoryNode.prototype.getDatatip=function(a,b,c){return(a=this._nbox.getOptions().tooltip)?(b={id:this._data.id,color:DvtNBoxStyleUtils.getCategoryNodeColor(this._nbox,this._data),indicatorColor:DvtNBoxStyleUtils.getCategoryNodeIndicatorColor(this._nbox,this._data),size:this._data.nodeIndices.length},"withinCell"==DvtNBoxDataUtils.getGroupBehavior(this._nbox)&&(b.row=DvtNBoxDataUtils.getCell(this._nbox,this._data.cell).row,b.column=DvtNBoxDataUtils.getCell(this._nbox,this._data.cell).column),
this._nbox.getCtx().getTooltipManager().getCustomTooltip(a,b)):this.getShortDesc()};DvtNBoxCategoryNode.prototype.getShortDesc=function(){return DvtNBoxDataUtils.getCategoryNodeLabels(this._nbox,this._data).join("\n")};DvtNBoxCategoryNode.prototype.getDatatipColor=function(){return DvtNBoxStyleUtils.getCategoryNodeColor(this._nbox,this._data)};DvtNBoxCategoryNode.prototype.setMaxAlpha=function(a){this._maxAlpha=a;this.setAlpha(this.getAlpha())};DvtNBoxCategoryNode.prototype.getMaxAlpha=function(){return this._maxAlpha};
DvtNBoxCategoryNode.prototype.setAlpha=function(a){DvtNBoxCategoryNode.superclass.setAlpha.call(this,Math.min(a,this._maxAlpha))};DvtNBoxCategoryNode.prototype.isDoubleClickable=function(){return!0};DvtNBoxCategoryNode.prototype.handleDoubleClick=function(){var a=this._nbox.getSanitizedOptions();a[DvtNBoxConstants.DRAWER]={id:this.getId()};var b=new DvtSetPropertyEvent;b.addParam(DvtNBoxConstants.DRAWER,this.getId());this._nbox.processEvent(b);this._nbox.render(a)};
DvtNBoxCategoryNode.prototype.animateUpdate=function(a,b){DvtNBoxCategoryNodeRenderer.animateUpdate(a,b,this)};DvtNBoxCategoryNode.prototype.animateDelete=function(a,b){DvtNBoxCategoryNodeRenderer.animateDelete(a,this)};DvtNBoxCategoryNode.prototype.animateInsert=function(a){DvtNBoxCategoryNodeRenderer.animateInsert(a,this)};DvtNBoxCategoryNode.prototype.isDragAvailable=function(a){return this._nbox.__isDragAvailable(a)};DvtNBoxCategoryNode.prototype.getDragTransferable=function(a,b){return this._nbox.__getDragTransferable(this)};
DvtNBoxCategoryNode.prototype.getDragFeedback=function(a,b){return this._nbox.__getDragFeedback()};DvtNBoxCategoryNode.prototype.HandleKeyboardEvent=function(a){a.keyCode==DvtKeyboardEvent.ENTER&&this.handleDoubleClick()};DvtNBoxCategoryNode.prototype.UpdateAccessibilityAttributes=function(){if(!DvtAgent.deferAriaCreation()){var a=this.getAriaLabel();a&&this.setAriaProperty(DvtNBoxConstants.LABEL,a)}};
DvtNBoxCategoryNode.prototype.getAriaLabel=function(){return DvtNBoxDataUtils.buildAriaDesc(this._nbox,this,this.getShortDesc(),this.isSelected())};
DvtNBoxCategoryNode.prototype.getCategories=function(){var a=this.getData()[DvtNBoxConstants.CATEGORIES];if(!a){for(var b=function(a,b){return a.filter(function(a){return-1<b.indexOf(a)})},c=this.getData().nodeIndices,a=null,d=0;d<c.length;d++){var e=DvtNBoxDataUtils.getNode(this._nbox,c[d])[DvtNBoxConstants.CATEGORIES];if(!e){a=[];break}a=null==a?e:b(a,e)}this.getData()[DvtNBoxConstants.CATEGORIES]=a}return a};
DvtNBoxCategoryNode.prototype.getKeyboardBoundingBox=function(a){return DvtNBoxKeyboardHandler.getKeyboardBoundingBox(this,a)};DvtNBoxCategoryNode.prototype.getTargetElem=function(){return this.getElem()};DvtNBoxCategoryNode.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0;this.showHoverEffect()};DvtNBoxCategoryNode.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1;this.hideHoverEffect()};
DvtNBoxCategoryNode.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};
DvtNBoxCategoryNode.prototype.getNextNavigable=function(a){var b=null;if(a.keyCode==DvtKeyboardEvent.SPACE&&a.ctrlKey)return this;if(a.keyCode==DvtKeyboardEvent.CLOSE_BRACKET&&DvtNBoxDataUtils.getGroupBehavior(this._nbox)==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL)a=DvtNBoxDataUtils.getCell(this._nbox,this._data.cell),b=DvtNBoxDataUtils.getDisplayable(this._nbox,a);else if(a.keyCode==DvtKeyboardEvent.CLOSE_BRACKET||a.keyCode==DvtKeyboardEvent.OPEN_BRACKET)b=this;else if(this._nbox.EventManager.getKeyboardHandler().isNavigationEvent(a))if(DvtNBoxDataUtils.getGroupBehavior(this._nbox)==
DvtNBoxConstants.GROUP_BEHAVIOR_ACROSS_CELLS){var b=this._nbox.getOptions().__groups,c=[],d;for(d in b){var e=DvtNBoxDataUtils.getDisplayable(this._nbox,b[d]);e&&c.push(e)}b=DvtNBoxKeyboardHandler.getNextNavigableCategoryNode(this,a,c)}else{d=this.getParent();b=[];for(c=0;c<d.getNumChildren();c++)d.getChildAt(c)instanceof DvtNBoxCategoryNode&&b.push(d.getChildAt(c));b=DvtNBoxKeyboardHandler.getNextNavigableCategoryNode(this,a,b)}else a.type==DvtMouseEvent.CLICK&&(b=this);return b};
DvtNBoxCategoryNode.prototype.getKeyboardFocusDisplayable=function(){var a=DvtNBoxDataUtils.getDrawer(this._nbox);return a?DvtNBoxDataUtils.getDisplayable(this._nbox,a):null};var DvtNBoxCategoryRolloverHandler=function(a,b){DvtNBoxCategoryRolloverHandler.superclass.constructor.call(this,a,b);this._nbox=b};DvtObj.createSubclass(DvtNBoxCategoryRolloverHandler,DvtCategoryRolloverHandler,"DvtNBoxCategoryRolloverHandler");
DvtNBoxCategoryRolloverHandler.prototype.GetRolloverCallback=function(a,b,c,d){return DvtObj.createCallback(this,function(){this.SetHighlightMode(!0);this._nbox.processEvent(a);this._callback&&this._callback.call(this._callbackObj,a,this._source)})};DvtNBoxCategoryRolloverHandler.prototype.GetRolloutCallback=function(a,b,c,d){return DvtObj.createCallback(this,function(){this.SetHighlightModeTimeout();this._nbox.processEvent(a);this._callback&&this._callback.call(this._callbackObj,a,this._source)})};
var DvtNBoxDrawer=function(){};DvtObj.createSubclass(DvtNBoxDrawer,DvtContainer,"DvtNBoxDrawer");DvtNBoxDrawer.newInstance=function(a,b){var c=new DvtNBoxDrawer;c.Init(a,b);return c};DvtNBoxDrawer.prototype.Init=function(a,b){DvtNBoxDrawer.superclass.Init.call(this,a.getCtx(),null,b.id+"_d");this._nbox=a;this._data=b;this._nbox.registerObject(this)};DvtNBoxDrawer.prototype.getData=function(){return this._data};
DvtNBoxDrawer.prototype.render=function(a,b){a.addChild(this);DvtNBoxDataUtils.setDisplayable(this._nbox,this._data,this);DvtNBoxDrawerRenderer.render(this._nbox,this._data,this,b);this._nbox.EventManager.associate(this,this)};DvtNBoxDrawer.prototype.getChildContainer=function(){return this._childContainer};DvtNBoxDrawer.prototype.setChildContainer=function(a){this._childContainer=a};DvtNBoxDrawer.prototype.isDoubleClickable=function(){return!0};DvtNBoxDrawer.prototype.handleDoubleClick=function(){this.closeDrawer()};
DvtNBoxDrawer.prototype.closeDrawer=function(){var a=this._nbox.getSanitizedOptions();a[DvtNBoxConstants.DRAWER]=null;var b=new DvtSetPropertyEvent;b.addParam(DvtNBoxConstants.DRAWER,null);this._nbox.processEvent(b);this._nbox.render(a)};DvtNBoxDrawer.prototype.animateUpdate=function(a,b){DvtNBoxDrawerRenderer.animateUpdate(a,b,this)};DvtNBoxDrawer.prototype.animateDelete=function(a,b){DvtNBoxDrawerRenderer.animateDelete(a,this)};
DvtNBoxDrawer.prototype.animateInsert=function(a){DvtNBoxDrawerRenderer.animateInsert(a,this)};DvtNBoxDrawer.prototype.HandleKeyboardEvent=function(a){a.keyCode==DvtKeyboardEvent.ESCAPE&&this.closeDrawer()};DvtNBoxDrawer.prototype.UpdateAccessibilityAttributes=function(){if(!DvtAgent.deferAriaCreation()){var a=this.getAriaLabel();a&&(DvtAgent.isTouchDevice()?DvtNBoxDataUtils.getDisplayable(this._nbox,this.getData(),"background"):this).setAriaProperty("label",a)}};
DvtNBoxDrawer.prototype.getAriaLabel=function(){var a=DvtNBoxDataUtils.getDisplayable(this._nbox,DvtNBoxDataUtils.getCategoryNode(this._nbox,this.getData().id)),b=DvtNBoxDataUtils.isDrawerSelected(this._nbox,a);return DvtNBoxDataUtils.buildAriaDesc(this._nbox,this,a.getShortDesc(),b)};DvtNBoxDrawer.prototype.getKeyboardBoundingBox=function(a){return DvtNBoxKeyboardHandler.getKeyboardBoundingBox(this,a)};DvtNBoxDrawer.prototype.getTargetElem=function(){return this.getElem()};
DvtNBoxDrawer.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0;DvtNBoxDataUtils.getDisplayable(this._nbox,this.getData(),"focusEffect").show()};DvtNBoxDrawer.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1;DvtNBoxDataUtils.getDisplayable(this._nbox,this.getData(),"focusEffect").hide()};DvtNBoxDrawer.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};
DvtNBoxDrawer.prototype.getNextNavigable=function(a){var b=null;this._nbox.EventManager.getKeyboardHandler().isNavigationEvent(a)&&(a.keyCode==DvtKeyboardEvent.OPEN_BRACKET?(a=this.getChildContainer(),a.getScrollingPane&&(a=a.getScrollingPane()),b=DvtNBoxDataUtils.getFirstNavigableNode(this._nbox,a)):a.keyCode==DvtKeyboardEvent.CLOSE_BRACKET&&(a=DvtNBoxDataUtils.getMaximizedCellIndex(this._nbox),b=DvtNBoxDataUtils.getDisplayable(this._nbox,DvtNBoxDataUtils.getCell(this._nbox,a))));return b};
DvtNBoxDrawer.prototype.getKeyboardFocusDisplayable=function(){var a=DvtNBoxDataUtils.getCategoryNode(this._nbox,this.getData()[DvtNBoxConstants.ID]);return a?DvtNBoxDataUtils.getDisplayable(this._nbox,a):null};var DvtNBoxDataAnimationHandler=function(a,b,c,d){this.Init(a,b,c,d)};DvtObj.createSubclass(DvtNBoxDataAnimationHandler,DvtDataAnimationHandler,"DvtNBoxDataAnimationHandler");DvtNBoxDataAnimationHandler.DELETE=0;DvtNBoxDataAnimationHandler.UPDATE=1;DvtNBoxDataAnimationHandler.INSERT=2;
DvtNBoxDataAnimationHandler.prototype.Init=function(a,b,c,d){DvtNBoxDataAnimationHandler.superclass.Init.call(this,a,b);this._oldNBox=c;this._newNBox=d};DvtNBoxDataAnimationHandler.prototype.getOldNBox=function(){return this._oldNBox};DvtNBoxDataAnimationHandler.prototype.getNewNBox=function(){return this._newNBox};DvtNBoxDataAnimationHandler.prototype.getAnimationDuration=function(){return DvtNBoxStyleUtils.getAnimationDuration(this._oldNBox)};var DvtNBoxDropTarget=function(a){this._view=a};
DvtObj.createSubclass(DvtNBoxDropTarget,DvtDropTarget,"DvtNBoxDropTarget");DvtNBoxDropTarget.prototype.acceptDrag=function(a,b,c){a=this._view.__getCellUnderPoint(a,b);if(!a)return this._view.__showDropSiteFeedback(null),null;a!=this._dropSite&&(this._view.__showDropSiteFeedback(a),this._dropSite=a);return c[0]};DvtNBoxDropTarget.prototype.dragExit=function(){this._view.__showDropSiteFeedback(null);this._dropSite=null};
DvtNBoxDropTarget.prototype.getDropSite=function(a,b){var c=this._view.__getCellUnderPoint(a,b);return c?(c=c.getData(),{row:c[DvtNBoxConstants.ROW],column:c[DvtNBoxConstants.COLUMN]}):null};var DvtNBoxEventManager=function(a){this.Init(a.getCtx(),a.processEvent,a);this._nbox=a};DvtObj.createSubclass(DvtNBoxEventManager,DvtEventManager,"DvtNBoxEventManager");DvtNBoxEventManager.prototype.OnClickInternal=function(a){a=this.GetLogicalObject(a.target);this._processActionEvent(a)};
DvtNBoxEventManager.prototype.OnDblClick=function(a){DvtNBoxEventManager.superclass.OnDblClick.call(this,a);this._handleDblClick(this.GetCurrentTargetForEvent(a))};DvtNBoxEventManager.prototype.OnComponentTouchDblClick=function(a){DvtNBoxEventManager.superclass.OnComponentTouchDblClick.call(this,a);this._handleDblClick(this.GetCurrentTargetForEvent(a))};DvtNBoxEventManager.prototype.HandleTouchHoverEndInternal=function(a){a=this.GetLogicalObject(a.target);this._processActionEvent(a)};
DvtNBoxEventManager.prototype.HandleTouchClickInternal=function(a){a=this.GetLogicalObject(a.target);this._processActionEvent(a)};DvtNBoxEventManager.prototype._handleDblClick=function(a){(a=this.GetLogicalObject(a))&&a.isDoubleClickable&&a.isDoubleClickable()&&a.handleDoubleClick&&a.handleDoubleClick()};
DvtNBoxEventManager.prototype.ProcessKeyboardEvent=function(a){var b=!1,c=a.keyCode,d=this.getFocus();if(c==DvtKeyboardEvent.ENTER||c==DvtKeyboardEvent.ESCAPE)d&&d.HandleKeyboardEvent&&d.HandleKeyboardEvent(a);else if(a.keyCode==DvtKeyboardEvent.SPACE&&a.ctrlKey){if(d instanceof DvtNBoxCategoryNode||d instanceof DvtNBoxNode)b=DvtNBoxEventManager.superclass.ProcessKeyboardEvent.call(this,a)}else b=DvtNBoxEventManager.superclass.ProcessKeyboardEvent.call(this,a);return b};
DvtNBoxEventManager.prototype.ProcessRolloverEvent=function(a,b,c){var d=this._nbox.getOptions();"dim"==d.hoverBehavior&&(b=b.getCategories?b.getCategories():[],d.highlightedCategories=c?b.slice():null,c=new DvtCategoryRolloverEvent(c?DvtCategoryRolloverEvent.TYPE_OVER:DvtCategoryRolloverEvent.TYPE_OUT,d.highlightedCategories),b=DvtStyleUtils.getTimeMilliseconds(d.styleDefaults.hoverBehaviorDelay),this.RolloverHandler.processEvent(c,this._nbox.getNodeDisplayables(),b,"any"==d.highlightMatch),a.stopPropagation())};
DvtNBoxEventManager.prototype.CreateCategoryRolloverHandler=function(a,b){return new DvtNBoxCategoryRolloverHandler(a,b)};DvtNBoxEventManager.prototype._processActionEvent=function(a){a&&a.getAction&&a.getAction()&&this.FireEvent(new DvtActionEvent(DvtActionEvent.SUBTYPE_ACTION,a.getAction(),a.getId()))};var DvtNBoxKeyboardHandler=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtNBoxKeyboardHandler,DvtKeyboardHandler,"DvtNBoxKeyboardHandler");
DvtNBoxKeyboardHandler.prototype.Init=function(a,b){DvtNBoxKeyboardHandler.superclass.Init.call(this,a);this._nbox=b};
DvtNBoxKeyboardHandler.prototype.processKeyDown=function(a){if(a.keyCode==DvtKeyboardEvent.TAB){var b=this._eventManager.getFocus(),c=null;DvtEventManager.consumeEvent(a);if(b)c=b;else{if(b=DvtNBoxDataUtils.getDrawer(this._nbox))c=DvtNBoxDataUtils.getDisplayable(this._nbox,b);else if(DvtNBoxDataUtils.getGroupBehavior(this._nbox)==DvtNBoxConstants.GROUP_BEHAVIOR_ACROSS_CELLS&&(b=this._nbox.getOptions().__groups)){var c=[],d;for(d in b){var e=DvtNBoxDataUtils.getDisplayable(this._nbox,b[d]);e&&c.push(e)}c=
DvtNBoxKeyboardHandler.getNextNavigableCategoryNode(null,a,c)}c||(a=DvtNBoxDataUtils.getColumnCount(this._nbox)*(DvtNBoxDataUtils.getRowCount(this._nbox)-1),c=DvtNBoxDataUtils.getDisplayable(this._nbox,DvtNBoxDataUtils.getCell(this._nbox,a)))}return c}return DvtNBoxKeyboardHandler.superclass.processKeyDown.call(this,a)};DvtNBoxKeyboardHandler.prototype.isSelectionEvent=function(a){return a.keyCode==DvtKeyboardEvent.TAB?!1:this.isNavigationEvent(a)&&!a.ctrlKey};
DvtNBoxKeyboardHandler.prototype.isMultiSelectEvent=function(a){return a.keyCode==DvtKeyboardEvent.SPACE&&a.ctrlKey};DvtNBoxKeyboardHandler.getKeyboardBoundingBox=function(a,b){var c=a.getDimensions(),d=a.localToStage(new DvtPoint(c.x,c.y)),c=a.localToStage(new DvtPoint(c.x+c.w,c.y+c.h));return new DvtRectangle(d.x,d.y,c.x-d.x,c.y-d.y)};
DvtNBoxKeyboardHandler.prototype.isNavigationEvent=function(a){var b=!1;switch(a.keyCode){case DvtKeyboardEvent.OPEN_BRACKET:case DvtKeyboardEvent.CLOSE_BRACKET:b=!0;break;default:b=DvtNBoxKeyboardHandler.superclass.isNavigationEvent.call(this,a)}return b};
DvtNBoxKeyboardHandler.getNextNavigableCategoryNode=function(a,b,c){if(!c||0>=c.length)return null;c[0]instanceof DvtNBoxCategoryNode&&c.sort(function(a,b){return a.getData().nodeIndices.length<b.getData().nodeIndices.length});if(null==a)return c[0];var d=a;b=b.keyCode==DvtKeyboardEvent.RIGHT_ARROW||b.keyCode==DvtKeyboardEvent.DOWN_ARROW?!0:!1;for(var e=c.length,g=0;g<e;g++)if(c[g]===a){d=c[b?g+1<e?g+1:g:0<=g-1?g-1:g];break}return d};var DvtNBoxAutomation=function(a){this.Init(a)};
DvtObj.createSubclass(DvtNBoxAutomation,DvtAutomation,"DvtNBoxAutomation");DvtNBoxAutomation.prototype.Init=function(a){this._nBox=a};
DvtNBoxAutomation.prototype.GetSubIdForDomElement=function(a){if(a){var b=this.getComponent(),c,d,e=this._getParentObject(a,"DvtNBoxCell");if(e){c=e.getData().row;var g=e.getData().column,e=e.getChildContainer();c=this._createBrackets([c,g]);c="cell"+c;if(a instanceof DvtNBoxCell)return this._createSubId(c,d);if(a instanceof DvtButton&&this._getParentObject(a,"DvtNBoxNodeOverflow"))return this._createSubId(c,"overflow");if(a instanceof DvtNBoxNode)for(g=0,e=DvtNBoxDataUtils.getFirstNavigableNode(b,
e);e;){if(e==a)return d="node"+this._createBrackets([g]),this._createSubId(c,d);e=DvtNBoxDataUtils.getDisplayable(b,e.getData().__next);g+=1}if(a instanceof DvtNBoxCategoryNode)return e=a.getData().id,d="groupNode",d=DvtNBoxDataUtils.getNode(b,a.getData().nodeIndices[0]).groupCategory?d+this._createBrackets([e]):d+this._createBraces(e.split(";")),this._createSubId(c,d)}if(e=this._getParentObject(a,"DvtNBoxDrawer")){c="dialog";if(a instanceof DvtNBoxDrawer)return this._createSubId(c,d);if(a instanceof
DvtButton)return this._createSubId(c,"closeButton");if(a instanceof DvtNBoxNode)for(var g=DvtNBoxDataUtils.getCategoryNode(b,e.getData().id).nodeIndices,h=0;h<g.length;h++)if(e=DvtNBoxDataUtils.getNode(b,g[h]),e=DvtNBoxDataUtils.getDisplayable(b,e),e==a)return d="node"+this._createBrackets([h]),this._createSubId(c,d)}if(a instanceof DvtNBoxCategoryNode)return e=a.getData().id,c="groupNode",c=DvtNBoxDataUtils.getNode(b,a.getData().nodeIndices[0]).groupCategory?c+this._createBrackets([e]):c+this._createBraces(e.split(";")),
this._createSubId(c,d)}return null};DvtNBoxAutomation.prototype._createSubId=function(a,b){var c=a;b&&(c+="#"+b);return c};
DvtNBoxAutomation.prototype.getDomElementForSubId=function(a){a=this._parseSubId(a);var b=a.component,c=a.action,d=null;a=this.getComponent();var e=null,g=null;if(0===b.lastIndexOf("cell",0)){d=this._parseBrackets(b);e=this._getCellIndexFromValues(d);e=DvtNBoxDataUtils.getCell(a,e);if(!e)return null;e=DvtNBoxDataUtils.getDisplayable(a,e);if(c){e=e.getChildContainer();if("overflow"==c)for(var h=e.getNumChildren();0<h;h--)if(e.getChildAt(h-1)instanceof DvtNBoxNodeOverflow){g=e.getChildAt(h-1).getButton();
break}if(0===c.lastIndexOf("node",0)){d=this._parseBrackets(c,!0);g=d[0];if(0>g)return null;b=DvtNBoxDataUtils.getFirstNavigableNode(a,e);for(h=0;h<g;)if(b=DvtNBoxDataUtils.getDisplayable(a,b.getData().__next),h+=1,"DvtNBoxNode"!=b.getTypeName())return null;g=b}if(0===c.lastIndexOf("groupNode",0)){var k;-1<c.indexOf("{")?d=this._parseBraces(c):k=c.substring(c.indexOf("[")+1,c.indexOf("]"));for(h=0;h<e.getNumChildren();h++)if(b=e.getChildAt(h),b instanceof DvtNBoxCategoryNode)if(a=b.getData().id,d&&
this._compareCategories(d,a.split(";"))){g=b;break}else if(k&&k==a){g=b;break}}}else g=e}else if(0===b.lastIndexOf("groupNode",0))for(e=a.getChildContainer(),-1<b.indexOf("{")?d=this._parseBraces(b):k=b.substring(b.indexOf("[")+1,b.indexOf("]")),h=0;h<e.getNumChildren();h++){if(b=e.getChildAt(h),b instanceof DvtNBoxCategoryNode)if(a=b.getData().id,d&&this._compareCategories(d,a.split(";"))){g=b;break}else if(k&&k==a){g=b;break}}else if("dialog"===b&&(e=a.getChildContainer()))for(h=0;h<e.getNumChildren();h++)if(e.getChildAt(h)instanceof
DvtNBoxDrawer){k=e.getChildAt(h);if(c){if("closeButton"==c)for(d=0;d<k.getNumChildren();d++)k.getChildAt(d)instanceof DvtButton&&(g=k.getChildAt(d));if(0===c.lastIndexOf("node",0)&&(d=this._parseBrackets(c,!0),c=d[0],k=DvtNBoxDataUtils.getCategoryNode(a,k.getData().id))){b=DvtNBoxDataUtils.getNode(a,k.nodeIndices[c]);if(!b)return null;g=DvtNBoxDataUtils.getDisplayable(a,b)}}else g=k;break}return g?g.getElem():null};
DvtNBoxAutomation.prototype._parseSubId=function(a){var b=null,c=null,d=a.indexOf("#");-1!==d?(b=a.substring(0,d),c=a.substring(d+1)):b=a;return{component:b,action:c}};DvtNBoxAutomation.prototype.getComponent=function(){return this._nBox};DvtNBoxAutomation.prototype._parseBrackets=function(a,b){var c=a.substring(a.indexOf("[")+1,a.indexOf("]")).split(",");if(b)for(var d=0;d<c.length;d++)c[d]=parseInt(c[d]);return 0<c.length?c:null};
DvtNBoxAutomation.prototype._createBrackets=function(a){return 0<a.length?"["+a.join(",")+"]":""};DvtNBoxAutomation.prototype._parseBraces=function(a){return a.substring(a.indexOf("{")+1,a.lastIndexOf("}")).split(",")};DvtNBoxAutomation.prototype._createBraces=function(a){for(var b="{",c=0;c<a.length;c++)b+=a[c].trim()+",";return b.substring(0,b.length-1)+"}"};
DvtNBoxAutomation.prototype._compareCategories=function(a,b){if(a.length!=b.length)return!1;a.sort();b.sort();for(var c=0;c<a.length;c++)if(a[c].trim()!=b[c].trim())return!1;return!0};DvtNBoxAutomation.prototype._getCellIndexFromValues=function(a){var b=this.getComponent(),c=DvtNBoxDataUtils.getColumnCount(b),d=DvtNBoxDataUtils.getRowIndex(b,a[0]);a=DvtNBoxDataUtils.getColumnIndex(b,a[1]);return null!=a&&null!=d?a+c*d:null};
DvtNBoxAutomation.prototype._getParentObject=function(a,b){for(var c=null,d=a;d;)if(d.getTypeName()==b){c=d;break}else d=d.getParent();return c};
DvtNBoxAutomation.prototype.getData=function(a,b){if(this._nBox)if("rowsTitle"==a){if(this._nBox.getOptions().rowsTitle)return this._nBox.getOptions().rowsTitle}else if("rowCount"==a){var c=this._nBox.getOptions().rows;if(c)return c.length}else if("row"==a){if(0<=DvtNBoxDataUtils.getRowIndex(this._nBox,b))return c={},c.label=DvtNBoxDataUtils.getRowLabel(this._nBox,b),c}else if("columnsTitle"==a){if(this._nBox.getOptions().columnsTitle)return this._nBox.getOptions().columnsTitle}else if("columnCount"==
a){if(c=this._nBox.getOptions().columns)return c.length}else if("column"==a){if(0<=DvtNBoxDataUtils.getColumnIndex(this._nBox,b))return c={},c.label=DvtNBoxDataUtils.getColumnLabel(this._nBox,b),c}else if("groupBehavior"==a)return DvtNBoxDataUtils.getGroupBehavior(this._nBox);return null};
DvtNBoxAutomation.prototype.getGroupNode=function(a){if(a&&DvtNBoxDataUtils.getGrouping(this._nBox)&&DvtNBoxDataUtils.getGroupBehavior(this._nBox)==DvtNBoxConstants.GROUP_BEHAVIOR_ACROSS_CELLS){if("string"===typeof a)return this._getGroupNodeData(a);var b="",c;for(c in a)b=a[c]?b+(c+":"+a[c]+";"):b+(c+";");return this._getGroupNodeData(b.substring(0,b.length-1))}return null};
DvtNBoxAutomation.prototype._getGroupNodeData=function(a){var b=DvtNBoxDataUtils.getCategoryNode(this._nBox,a);if(b){var c=DvtNBoxDataUtils.getDisplayable(this._nBox,b);if(c)return a={},a.selected=c.isSelected(),a.color=DvtNBoxStyleUtils.getCategoryNodeColor(this._nBox,b),a.indicatorColor=DvtNBoxStyleUtils.getCategoryNodeIndicatorColor(this._nBox,b),a.tooltip=c.getShortDesc(),a.size=b.nodeIndices?b.nodeIndices.length:-1,b=DvtNBoxDataUtils.getDisplayable(this._nBox,b,"indicatorIcon"),a.indicatorIcon=
this._getMarkerData(b),a}return null};DvtNBoxAutomation.prototype.getCell=function(a,b){var c=DvtNBoxDataUtils.getCellByRowColumn(this._nBox,a,b);if(c){var d=c.getCellIndex(),e={};e.label=c.getLabel();e.background=c.getBackground();e.getNodeCount=function(){return c.getNodeCount()};e.rowValue=a;e.columnValue=b;e.cellIndex=d;return e}return null};
DvtNBoxAutomation.prototype.getCellNode=function(a,b){if(this._nBox&&!DvtNBoxDataUtils.getGrouping(this._nBox)){var c=DvtNBoxDataUtils.getCellByRowColumn(this._nBox,a.rowValue,a.columnValue).getNode(b);return this._getNode(c)}return null};
DvtNBoxAutomation.prototype._getNode=function(a){if(a){var b=DvtNBoxDataUtils.getDisplayable(this._nBox,a);if(b){var c={};c.selected=b.isSelected();c.tooltip=b.getShortDesc();c.color=DvtNBoxStyleUtils.getNodeColor(this._nBox,a);c.indicatorColor=DvtNBoxStyleUtils.getNodeIndicatorColor(this._nBox,a);a.label&&(c.label=a.label);a.secondaryLabel&&(c.secondaryLabel=a.secondaryLabel);b=DvtNBoxDataUtils.getDisplayable(this._nBox,a,"icon");c.icon=this._getMarkerData(b);a=DvtNBoxDataUtils.getDisplayable(this._nBox,
a,"indicatorIcon");c.indicatorIcon=this._getMarkerData(a);return c}}return null};DvtNBoxAutomation.prototype.getCellGroupNode=function(a,b){if(b&&DvtNBoxDataUtils.getGrouping(this._nBox)&&DvtNBoxDataUtils.getGroupBehavior(this._nBox)==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL){if("string"===typeof b)return this._getGroupNodeData(a.cellIndex+":"+b);var c=a.cellIndex+":",d;for(d in b)c=b[d]?c+(d+":"+b[d]+";"):c+(d+";");return this._getGroupNodeData(c.substring(0,c.length-1))}return null};
DvtNBoxAutomation.prototype._getMarkerData=function(a){if(a){var b={};b.shape=a instanceof DvtSimpleMarker?a.getType():"none";a.getFill()&&(b.color=a.getFill().getColor());return b}return null};
DvtNBoxAutomation.prototype.getDialog=function(){var a=DvtNBoxDataUtils.getDrawer(this._nBox);if(a){var b=DvtNBoxDataUtils.getCategoryNode(this._nBox,a.id);if(b){var c=DvtNBoxDataUtils.getDisplayable(this._nBox,b),a={};a.label=c.getLabel();a.getNodeCount=function(){return b.nodeIndices?b.nodeIndices.length:-1};for(var c={},d=b.id.split(";"),e=0;e<d.length;e++){var g=d[e].split(":");g&&2==g.length&&(c[g[0]]=g[1])}a.groupInfo=c;return a}}return null};
DvtNBoxAutomation.prototype.getDialogNode=function(a){var b=DvtNBoxDataUtils.getDrawer(this._nBox);return b&&(b=DvtNBoxDataUtils.getCategoryNode(this._nBox,b.id))&&b.nodeIndices&&null!=b.nodeIndices[a]?(a=DvtNBoxDataUtils.getNode(this._nBox,b.nodeIndices[a]),this._getNode(a)):null};var DvtNBoxRenderer={};DvtObj.createSubclass(DvtNBoxRenderer,DvtObj,"DvtNBoxRenderer");
DvtNBoxRenderer.render=function(a,b,c){DvtNBoxRenderer._renderBackground(a,b,c);DvtNBoxRenderer._renderLegend(a,b,c);DvtNBoxRenderer._adjustAvailSpace(c);var d=DvtNBoxRenderer._calculateCellCounts(a),e=DvtNBoxCellRenderer.calculateCellLayout(a,d);DvtNBoxRenderer._renderTitles(a,b,e,c);DvtNBoxRenderer._adjustAvailSpace(c);DvtNBoxRenderer._renderCells(a,b,d,e,c);DvtNBoxRenderer._renderNodes(a,b,d,c);DvtNBoxRenderer._renderInitialSelection(a);DvtNBoxRenderer._fixZOrder(a)};
DvtNBoxRenderer._renderBackground=function(a,b,c){a=new DvtRect(a.getCtx(),c.x,c.y,c.w,c.h);a.setInvisibleFill();b.addChild(a)};
DvtNBoxRenderer._renderLegend=function(a,b,c){var d=DvtNBoxDataUtils.getLegend(a);if(d&&d.sections){var e=a.getOptions(),g=DvtAgent.isRightToLeft(a.getCtx()),h=new DvtPanelDrawer(a.getCtx(),a.processEvent,a);h.addEvtListener(DvtPanelDrawerEvent.TYPE,a.processEvent,!1,a);h.setDockSide(DvtPanelDrawer.DOCK_TOP);b.addChild(h);var k=DvtLegend.newInstance(a.getCtx(),a.processEvent,a);b.addChild(k);var m=k.getPreferredSize(d,c.w/3,c.h);k.render(d,m.w,m.h);b.removeChild(k);b=new DvtContainer(a.getCtx());
m=new DvtRect(a.getCtx(),0,0,m.w,m.h);m.setInvisibleFill();b.addChild(m);b.addChild(k);var n=e._resources.legend_ena,t=e._resources.legend_ovr,m=e._resources.legend_dwn,n=new DvtImage(a.getCtx(),n.src,0,0,n.width,n.height),t=new DvtImage(a.getCtx(),t.src,0,0,t.width,t.height),m=new DvtImage(a.getCtx(),m.src,0,0,m.width,m.height);h.addPanel(b,n,t,m,DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"LEGEND"),"legend");g&&h.setDiscloseDirection(DvtPanelDrawer.DIR_RIGHT);h.renderComponent();"disclosed"==
e[DvtNBoxConstants.LEGEND_DISCLOSURE]&&(h.setDisplayedPanelId("legend"),h.setDisclosed(!0,!0));e=h.getDimensions();h.setTranslate(g?0:c.w,0);g&&(c.x+=e.w);c.w-=e.w;DvtNBoxDataUtils.setDisplayable(a,d,k,"legend");DvtNBoxDataUtils.setDisplayable(a,d,h,"panelDrawer")}};
DvtNBoxRenderer._renderTitles=function(a,b,c,d){var e=a.getOptions(),g=DvtNBoxDataUtils.getColumnCount(a),h=DvtNBoxDataUtils.getRowCount(a),k=e.__layout.componentGap,m=e.__layout.titleGap,n=e.__layout.titleComponentGap,t=DvtAgent.isRightToLeft(a.getCtx());d.x+=k;d.y+=k;d.w-=2*k;d.h-=2*k;var u=DvtNBoxDataUtils.getMaximizedColumn(a),k=u?DvtNBoxDataUtils.getColumnIndex(a,u):-1,v=DvtNBoxDataUtils.getMaximizedRow(a),w=v?DvtNBoxDataUtils.getRowIndex(a,v):-1,x=null,y=null,z=[],A=[],B=0,C=0,D=0,F=0,E=0,H=
0,I=0,M=0;e[DvtNBoxConstants.COLUMNS_TITLE]&&(x=DvtNBoxRenderer.createText(a.getCtx(),e[DvtNBoxConstants.COLUMNS_TITLE],e[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.COLUMNS_TITLE_STYLE],DvtOutputText.H_ALIGN_CENTER,DvtOutputText.V_ALIGN_MIDDLE),b.addChild(x),B=DvtTextUtils.guessTextDimensions(x).h);e[DvtNBoxConstants.ROWS_TITLE]&&(y=DvtNBoxRenderer.createText(a.getCtx(),e[DvtNBoxConstants.ROWS_TITLE],e[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.ROWS_TITLE_STYLE],DvtOutputText.H_ALIGN_CENTER,
DvtOutputText.V_ALIGN_MIDDLE),b.addChild(y),C=DvtTextUtils.guessTextDimensions(y).h);for(e=0;e<g;e++){var J=DvtNBoxDataUtils.getColumn(a,e);if(J[DvtNBoxConstants.LABEL]){var G=DvtNBoxRenderer.createText(a.getCtx(),J[DvtNBoxConstants.LABEL],DvtNBoxStyleUtils.getColumnLabelStyle(a,e),DvtOutputText.H_ALIGN_CENTER,DvtOutputText.V_ALIGN_MIDDLE),E=Math.max(E,DvtTextUtils.guessTextDimensions(G).h);u&&u!=J[DvtNBoxConstants.ID]||(z[e]=G,b.addChild(z[e]))}}for(e=0;e<h;e++)u=DvtNBoxDataUtils.getRow(a,e),u[DvtNBoxConstants.LABEL]&&
(J=DvtNBoxRenderer.createText(a.getCtx(),u[DvtNBoxConstants.LABEL],DvtNBoxStyleUtils.getRowLabelStyle(a,e),DvtOutputText.H_ALIGN_CENTER,DvtOutputText.V_ALIGN_MIDDLE),H=Math.max(H,DvtTextUtils.guessTextDimensions(J).h),v&&v!=u[DvtNBoxConstants.ID]||(A[e]=J,b.addChild(A[e])));if(C||H)I=n,C&&H&&(D=m);if(B||E)M=n,B&&E&&(F=m);m=C+D+H+I;n=B+F+E+M;d.x+=t?0:m;d.w-=m;d.h-=n;x&&DvtTextUtils.fitText(x,d.w,B,b)&&(DvtNBoxRenderer.positionText(x,d.x+d.w/2,d.y+d.h+n-B/2),DvtNBoxDataUtils.setDisplayable(a,a.getOptions(),
x,DvtNBoxConstants.COLUMNS_TITLE));y&&DvtTextUtils.fitText(y,d.h,C,b)&&(DvtNBoxRenderer.positionText(y,d.x+(t?d.w:0)+(t?1:-1)*(m-C/2),d.y+d.h/2,t?Math.PI/2:-Math.PI/2),DvtNBoxDataUtils.setDisplayable(a,a.getOptions(),y,DvtNBoxConstants.ROWS_TITLE));for(e=0;e<g;e++)z[e]&&(x=DvtNBoxCellRenderer.getCellDimensions(a,-1==w?0:w,e,c,d),DvtTextUtils.fitText(z[e],x.w,E,b)&&(DvtNBoxRenderer.positionText(z[e],x.x+x.w/2,d.y+d.h+M+E/2),DvtNBoxDataUtils.setDisplayable(a,DvtNBoxDataUtils.getColumn(a,e),z[e],DvtNBoxConstants.LABEL)));
for(e=0;e<h;e++)A[e]&&(x=DvtNBoxCellRenderer.getCellDimensions(a,e,-1==k?0:k,c,d),DvtTextUtils.fitText(A[e],x.h,H,b)&&(DvtNBoxRenderer.positionText(A[e],d.x+(t?d.w:0)+(t?1:-1)*(I+H/2),x.y+x.h/2,t?Math.PI/2:-Math.PI/2),DvtNBoxDataUtils.setDisplayable(a,DvtNBoxDataUtils.getRow(a,e),A[e],DvtNBoxConstants.LABEL)))};DvtNBoxRenderer.createText=function(a,b,c,d,e){a=new DvtOutputText(a,b,0,0);a.setCSSStyle(c);a.setHorizAlignment(d);a.setVertAlignment(e);return a};
DvtNBoxRenderer._renderCells=function(a,b,c,d,e){for(var g=DvtNBoxDataUtils.getRowCount(a),h=DvtNBoxDataUtils.getColumnCount(a),k=0;k<g;k++)for(var m=0;m<h;m++){var n=DvtNBoxDataUtils.getCell(a,k*h+m);DvtNBoxCell.newInstance(a,n).render(b,d,c,e)}};
DvtNBoxRenderer._calculateCellCounts=function(a){var b=DvtNBoxDataUtils.getRowCount(a),c=DvtNBoxDataUtils.getColumnCount(a),d=b*c,b=[],c=null,e=DvtNBoxDataUtils.getHighlightedItems(a),g={};if(e)for(var c=[],h=0;h<e.length;h++)g[e[h][DvtNBoxConstants.ID]]=!0;for(h=0;h<d;h++)b[h]=0,c&&(c[h]=0);d=DvtNBoxDataUtils.getNodeCount(a);for(h=0;h<d;h++)if(e=DvtNBoxDataUtils.getNode(a,h),!DvtNBoxDataUtils.isNodeHidden(a,e)){var k=DvtNBoxDataUtils.getCellIndex(a,e);b[k]++;c&&g[e[DvtNBoxConstants.ID]]&&c[k]++}a=
{};a.total=b;c&&(a.highlighted=c);return a};DvtNBoxRenderer._renderNodes=function(a,b,c,d){0<DvtNBoxDataUtils.getNodeCount(a)&&(DvtNBoxDataUtils.getGrouping(a)?(DvtNBoxRenderer._renderCategoryNodes(a,b,d),DvtNBoxRenderer._renderDrawer(a,b,d)):DvtNBoxRenderer._renderIndividualNodes(a,b,c,d))};
DvtNBoxRenderer._renderIndividualNodes=function(a,b,c,d){b=a.getOptions().__layout.gridGap;d=DvtAgent.isRightToLeft(a.getCtx());var e=DvtNBoxNodeRenderer.calculateNodeLayout(a),g=e.indicatorSectionWidth+e.iconSectionWidth+e.labelSectionWidth+b,h=e.nodeHeight+b,k=DvtNBoxDataUtils.getNodeCount(a),m=[],n=["normal"],t=DvtNBoxStyleUtils.getFadedNodeAlpha(a),u=DvtNBoxDataUtils.getHighlightedItems(a),v={};if(u){for(var w=0;w<u.length;w++)v[u[w][DvtNBoxConstants.ID]]=!0;n=["highlighted","unhighlighted"]}for(var x=
0;x<n.length;x++)for(var y=0;y<k;y++){var z=DvtNBoxDataUtils.getNode(a,y);if(!DvtNBoxDataUtils.isNodeHidden(a,z)&&("normal"==n[x]||"highlighted"==n[x]&&v[z[DvtNBoxConstants.ID]]||"unhighlighted"==n[x]&&!v[z[DvtNBoxConstants.ID]])){var A=DvtNBoxDataUtils.getCellIndex(a,z);if(!DvtNBoxDataUtils.isCellMinimized(a,A)){u=DvtNBoxDataUtils.getCell(a,A);isNaN(m[A])&&(m[A]=0);var w=e.cellLayouts[A],B=w.cellRows,C=w.cellColumns;if(!(0==B||0==C||1==B&&1==C&&w.overflow)&&(B=B*C-(w.overflow?1:0),0>B||m[A]<B)){var D=
DvtNBoxDataUtils.getDisplayable(a,u).getChildContainer(),F=D instanceof DvtSimpleScrollableContainer?!0:!1,E=DvtNBoxNode.newInstance(a,z),B=u.__childArea.x+(u.__childArea.w-w.cellColumns*g+b)/2,H=F?b:u.__childArea.y,I=m[A]%C;d&&(I=C-I-1);w=Math.floor(m[A]/C);E.setTranslate(B+g*I,H+h*w);m[A]++;E.render(F?D.getScrollingPane():D,e);"unhighlighted"==n[x]&&E.setAlpha(t);u=(C=0<y?DvtNBoxDataUtils.getNode(a,y-1):null)?DvtNBoxDataUtils.getCellIndex(a,C):-1;C&&u==A&&(z.__prev=C,C.__next=z)}}}}k=DvtNBoxDataUtils.getRowCount(a);
t=DvtNBoxDataUtils.getColumnCount(a);v=[];for(n=0;n<k;n++)for(x=0;x<t;x++)D=n*t+x,DvtNBoxDataUtils.isCellMinimized(a,D)||(H=DvtNBoxDataUtils.getCell(a,D),u=DvtNBoxDataUtils.getDisplayable(a,H),w=e.cellLayouts[D],w.overflow&&(B=w.cellRows,C=w.cellColumns,0==B||0==C||1==B&&1==C&&w.overflow?v.push(D):(y=DvtNBoxNodeOverflow.newInstance(a,u),(C=DvtNBoxDataUtils.getLastNavigableNode(a,u.getChildContainer()))&&C instanceof DvtNBoxNode&&(y.__prev=C.getData(),C.getData().__next=y),DvtNBoxDataUtils.setDisplayable(a,
y,y),B=H.__childArea.x+(H.__childArea.w-w.cellColumns*g+b)/2,H=H.__childArea.y,I=m[D]%w.cellColumns,d&&(I=w.cellColumns-I-1),w=Math.floor(m[D]/w.cellColumns),y.setTranslate(B+g*I,H+h*w),y.render(u.getChildContainer(),g-b,h-b)))),DvtNBoxDataUtils.isCellMaximized(a,D)&&(D=DvtNBoxDataUtils.getDisplayable(a,DvtNBoxDataUtils.getCell(a,D)).getChildContainer(),D.prepareContentPane());0<v.length&&DvtNBoxCellRenderer.renderBodyCountLabels(a,c,v)};
DvtNBoxRenderer._renderCategoryNodes=function(a,b,c){var d={},e=DvtNBoxDataUtils.getNodeCount(a),g=DvtNBoxDataUtils.getGroupBehavior(a),h=DvtAgent.isRightToLeft(a.getCtx()),k=DvtNBoxDataUtils.getHighlightedItems(a),m={};if(k)for(var n=0;n<k.length;n++)m[k[n][DvtNBoxConstants.ID]]=!0;for(n=0;n<e;n++)if(k=DvtNBoxDataUtils.getNode(a,n),!DvtNBoxDataUtils.isNodeHidden(a,k)){var t=d;if(g==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL){var u=DvtNBoxDataUtils.getCellIndex(a,k)+"",t=d[u];t||(t={},d[u]=t)}var u=
DvtNBoxDataUtils.getNodeGroupId(k),v=t[u];v||(v={},v[DvtNBoxConstants.ID]=u,g==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL&&(v[DvtNBoxConstants.CELL]=DvtNBoxDataUtils.getCellIndex(a,k)),v.nodeIndices=[],v.highlightedCount=0,t[u]=v);v.nodeIndices.push(n);m[DvtNBoxDataUtils.getNode(a,n)[DvtNBoxConstants.ID]]&&v.highlightedCount++}if(g==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL){var n={},w;for(w in d)n[w]=DvtNBoxRenderer._processOtherThreshold(a,d[w])}else n=DvtNBoxRenderer._processOtherThreshold(a,
d);d=n;a.getOptions().__groups=d;if(g==DvtNBoxConstants.GROUP_BEHAVIOR_ACROSS_CELLS){w=[];for(v in d)w.push(v);w.sort(function(a,b){return d[a].nodeIndices.length<d[b].nodeIndices.length});g=Math.sqrt(.15*c.w*c.h/e);for(n=0;n<w.length;n++){v=w[n];t=m=0;e=d[v].nodeIndices.length;for(u=0;u<e;u++)k=DvtNBoxDataUtils.getNode(a,d[v].nodeIndices[u]),m+=DvtNBoxDataUtils.getXPercentage(a,k),t+=DvtNBoxDataUtils.getYPercentage(a,k);m/=e;t/=e;e=DvtNBoxCategoryNode.newInstance(a,d[v]);e.setTranslate(c.x+(h?1-
m:m)*c.w,c.y+(1-t)*c.h);e.render(b,g,0);e.setMaxAlpha(.8)}}else if(g==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL){n=DvtNBoxDataUtils.getRowCount(a);b=DvtNBoxDataUtils.getColumnCount(a);b*=n;c=[];for(n=0;n<b;n++)d[n]&&!DvtNBoxDataUtils.isCellMinimized(a,n)&&(h=DvtNBoxDataUtils.getCell(a,n),c[n]=DvtNBoxRenderer._forceLayoutGroups(d[n],h.__childArea.w,h.__childArea.h));g=40;for(n=0;n<b;n++)d[n]&&!DvtNBoxDataUtils.isCellMinimized(a,n)&&(g=Math.min(g,c[n].scale));for(n=0;n<b;n++)if(d[n]&&!DvtNBoxDataUtils.isCellMinimized(a,
n))for(v in k=c[n].positions,w=c[n].center,h=DvtNBoxDataUtils.getCell(a,n),m=DvtNBoxDataUtils.getDisplayable(a,h).getChildContainer(),k)e=DvtNBoxCategoryNode.newInstance(a,d[n][v]),e.setTranslate(h.__childArea.x+h.__childArea.w/2+g*(k[v].x-w.x),(m instanceof DvtSimpleScrollableContainer?0:h.__childArea.y)+h.__childArea.h/2+g*(k[v].y-w.y)),e.render(m,g,3)}};DvtNBoxRenderer.getRowDimensions=function(a,b,c){a=DvtNBoxDataUtils.getRowCount(a);var d=c.h/a;return new DvtRectangle(c.x,c.y+(a-b-1)*d,c.w,d)};
DvtNBoxRenderer.getColumnDimensions=function(a,b,c){var d=DvtNBoxDataUtils.getColumnCount(a),d=c.w/d;a=DvtAgent.isRightToLeft(a.getCtx());return new DvtRectangle(c.x+(a?c.w-d:0)+(a?-1:1)*b*d,c.y,d,c.h)};DvtNBoxRenderer._adjustAvailSpace=function(a){a.x=Math.round(a.x);a.y=Math.round(a.y);a.w=Math.round(a.w);a.h=Math.round(a.h)};DvtNBoxRenderer.positionText=function(a,b,c,d){a.setX(b);a.setY(c);if(d){var e=a.getMatrix();e.translate(-b,-c);e.rotate(d);e.translate(b,c);a.setMatrix(e)}};
DvtNBoxRenderer._renderInitialSelection=function(a){if(a.isSelectionSupported()){var b={},c=[],d=DvtNBoxDataUtils.getSelectedItems(a);if(d){for(var e=0;e<d.length;e++)c.push(d[e]),b[d[e]]=!0;var g=a.getObjects();if(DvtNBoxDataUtils.getGrouping(a))for(e=0;e<g.length;e++)if(g[e]instanceof DvtNBoxCategoryNode){for(var d=g[e].getData().nodeIndices,h=!0,k=0;k<d.length;k++){var m=DvtNBoxDataUtils.getNode(a,d[k]);if(!b[m[DvtNBoxConstants.ID]]){h=!1;break}}h&&c.push(g[e].getId())}}a.getSelectionHandler().processInitialSelections(c,
g)}};
DvtNBoxRenderer._forceLayoutGroups=function(a,b,c){var d=[],e;for(e in a)d.push(e);d.sort(function(b,c){return a[b].nodeIndices.length<a[c].nodeIndices.length});for(var g={},h=2*Math.PI/d.length,k=0;k<d.length;k++){var m=k*Math.cos(h*k),n=k*Math.sin(h*k);g[d[k]]=DvtVectorUtils.createVector(m,n)}h=1;m=-.25*c/Math.max(b,c);for(n=-.25*b/Math.max(b,c);.005<h;){for(var t={},k=0;k<d.length;k++){var u=d[k];e=g[u];var v=a[u].nodeIndices.length;t[u]=DvtVectorUtils.createVector(h*m*e.x,h*n*e.y);for(var w=0;w<
d.length;w++)if(k!=w){for(var x=d[w],y=a[x].nodeIndices.length,x=DvtVectorUtils.subtractVectors(e,g[x]),z=DvtVectorUtils.getMagnitude(x),A=Math.atan2(x.y,x.x);0>A;)A+=Math.PI/2;for(;A>=Math.PI/2;)A-=Math.PI/2;A=A<Math.PI/4?.5*(Math.sqrt(v)+Math.sqrt(y))/Math.cos(A):.5*(Math.sqrt(v)+Math.sqrt(y))/Math.sin(A);z<A&&(t[u]=DvtVectorUtils.addVectors(t[u],DvtVectorUtils.scaleVector(x,(A-z)/z*(y/(v+y))*(1-h))))}}for(k=0;k<d.length;k++)u=d[k],g[u]=DvtVectorUtils.addVectors(g[u],t[u]);h*=.98}h=Number.MAX_VALUE;
m=-Number.MAX_VALUE;n=Number.MAX_VALUE;t=-Number.MAX_VALUE;for(k=0;k<d.length;k++)e=d[k],u=Math.sqrt(a[e].nodeIndices.length),e=g[e],h=Math.min(h,e.x-u/2),m=Math.max(m,e.x+u/2),n=Math.min(n,e.y-u/2),t=Math.max(t,e.y+u/2);return{scale:Math.min(b/(m-h),c/(t-n)),center:new DvtPoint((h+m)/2,(n+t)/2),positions:g}};
DvtNBoxRenderer._processOtherThreshold=function(a,b){var c=DvtNBoxDataUtils.getNodeCount(a),c=DvtNBoxDataUtils.getOtherThreshold(a)*c;if(1>=c)return b;var d={},e={};if(DvtNBoxDataUtils.getGroupBehavior(a)==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL)for(var g in b){var h=b[g];e.cell=h.cell;break}e.id="other";e.nodeIndices=[];e.otherNode=!0;for(g in b)if(h=b[g],h.nodeIndices.length<c)for(var k=0;k<h.nodeIndices.length;k++)e.nodeIndices.push(h.nodeIndices[k]);else d[g]=h;0<e.nodeIndices.length&&(d.other=
e);return d};DvtNBoxRenderer._renderDrawer=function(a,b,c){var d=DvtNBoxDataUtils.getDrawer(a);d&&(DvtNBoxDataUtils.getCategoryNode(a,d.id)?DvtNBoxDrawer.newInstance(a,d).render(b,c):(a.getOptions()[DvtNBoxConstants.DRAWER]=null,b=new DvtSetPropertyEvent,b.addParam(DvtNBoxConstants.DRAWER,null),a.processEvent(b)))};DvtNBoxRenderer.getGlobalMatrix=function(a){var b=a.getMatrix().clone();for(a=a.getParent();a;){var c=a.getMatrix();b.translate(c.getTx(),c.getTy());a=a.getParent()}return b};
DvtNBoxRenderer.animateUpdate=function(a,b,c){DvtNBoxRenderer._animateCells(a,b,c);var d=DvtNBoxDataUtils.getDrawer(b),d=d?d.id:null,e=DvtNBoxDataUtils.getDrawer(c),e=e?e.id:null;d==e?DvtNBoxRenderer._animateNodes(a,b,c):DvtNBoxRenderer._animateDrawer(a,b,c)};
DvtNBoxRenderer._animateCells=function(a,b,c){for(var d=DvtNBoxDataUtils.getRowCount(b),e=DvtNBoxDataUtils.getRowCount(c),g=DvtNBoxDataUtils.getColumnCount(b),h=DvtNBoxDataUtils.getColumnCount(c),k=d*g,m=e*h,n=[],t=[],u=0;u<k;u++)n.push(DvtNBoxDataUtils.getDisplayable(b,DvtNBoxDataUtils.getCell(b,u)));for(u=0;u<m;u++)t.push(DvtNBoxDataUtils.getDisplayable(c,DvtNBoxDataUtils.getCell(c,u)));if(d==e&&g==h){d=!0;for(u=0;u<e;u++)if(g=DvtNBoxDataUtils.getRow(b,u)[DvtNBoxConstants.ID],k=DvtNBoxDataUtils.getRow(c,
u)[DvtNBoxConstants.ID],g!=k){d=!1;break}if(d)for(u=0;u<h;u++)if(e=DvtNBoxDataUtils.getColumn(b,u)[DvtNBoxConstants.ID],g=DvtNBoxDataUtils.getColumn(c,u)[DvtNBoxConstants.ID],e!=g){d=!1;break}if(d){a.constructAnimation(n,t);return}}a.constructAnimation(n,[]);a.constructAnimation([],t)};
DvtNBoxRenderer._animateNodes=function(a,b,c){for(var d=DvtNBoxDataUtils.getNodeCount(b),e=DvtNBoxDataUtils.getNodeCount(c),g=[],h=[],k=0;k<d;k++)g.push(DvtNBoxDataUtils.getDisplayable(b,DvtNBoxDataUtils.getNode(b,k)));for(k=0;k<e;k++)h.push(DvtNBoxDataUtils.getDisplayable(c,DvtNBoxDataUtils.getNode(c,k)));a.constructAnimation(g,h);DvtNBoxDataUtils.getDrawer(c)||(b=DvtNBoxRenderer._getSortedGroups(b),c=DvtNBoxRenderer._getSortedGroups(c),a.constructAnimation(b,c))};
DvtNBoxRenderer._getSortedGroups=function(a){var b=DvtNBoxDataUtils.getGroupBehavior(a),c=a.getOptions().__groups,d=[];if(c)if(b==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL)for(var b=DvtNBoxDataUtils.getRowCount(a),e=DvtNBoxDataUtils.getColumnCount(a),b=b*e,e=0;e<b;e++)for(var g=DvtNBoxRenderer._getSortedGroupsFromContainer(a,c[e+""]),h=0;h<g.length;h++)d.push(g[h]);else d=DvtNBoxRenderer._getSortedGroupsFromContainer(a,c);return d};
DvtNBoxRenderer._getSortedGroupsFromContainer=function(a,b){var c=[],d;for(d in b){var e=DvtNBoxDataUtils.getDisplayable(a,b[d]);e&&c.push(e)}c.sort(function(a,b){var c=a.getId(),d=b.getId();return c==d?0:c<d?-1:1});return c};DvtNBoxRenderer._animateDrawer=function(a,b,c){var d=DvtNBoxDataUtils.getDrawer(b),d=d?[DvtNBoxDataUtils.getDisplayable(b,d)]:null;b=(b=DvtNBoxDataUtils.getDrawer(c))?[DvtNBoxDataUtils.getDisplayable(c,b)]:[];a.constructAnimation(d,b)};
DvtNBoxRenderer.setFill=function(a,b){if(0==b.indexOf("linear-gradient")){var c=DvtGradientParser.parseCSSGradient(b);c&&a.setFill(new DvtLinearGradientFill(c.getAngle(),c.getColors(),c.getAlphas(),c.getRatios()))}else a.setSolidFill(b)};DvtNBoxRenderer._fixZOrder=function(a){var b=DvtNBoxDataUtils.getLegend(a);b&&b.sections&&(a=DvtNBoxDataUtils.getDisplayable(a,b,"panelDrawer"))&&a.getParent().addChild(a)};var DvtNBoxCellRenderer={};DvtObj.createSubclass(DvtNBoxCellRenderer,DvtObj,"DvtNBoxCellRenderer");
DvtNBoxCellRenderer.render=function(a,b,c,d,e,g){var h=a.getOptions(),k=h.__layout.cellGap,m=h.__layout.cellStartGap,n=h.__layout.cellEndGap,t=h.__layout.cellTopGap,h=h.__layout.cellBottomGap,u=DvtNBoxDataUtils.getRowIndex(a,b[DvtNBoxConstants.ROW]),v=DvtNBoxDataUtils.getColumnIndex(a,b[DvtNBoxConstants.COLUMN]),w=DvtNBoxCellRenderer.getCellDimensions(a,u,v,d,g);c.setTranslate(w.x+k/2,w.y+k/2);g=u*DvtNBoxDataUtils.getColumnCount(a)+v;k=new DvtRect(a.getCtx(),0,0,w.w-k,w.h-k);k.setPixelHinting(!0);
u=DvtNBoxStyleUtils.getCellStyle(a,g);DvtNBoxCellRenderer._applyStyleToRect(k,u);c.addChild(k);DvtNBoxDataUtils.setDisplayable(a,b,k,"background");u=new DvtKeyboardFocusEffect(a.getCtx(),c,new DvtRectangle(-1,-1,k.getWidth()+2,k.getHeight()+2));DvtNBoxDataUtils.setDisplayable(a,b,u,"focusEffect");e=DvtNBoxCellRenderer.renderHeader(a,b,c,e,!1);g=DvtNBoxDataUtils.isCellMaximized(a,g)?new DvtSimpleScrollableContainer(a.getCtx(),k.getWidth(),k.getHeight()-(e?d.headerSize:0)):new DvtContainer(a.getCtx());
c.addChild(g);c.setChildContainer(g);c=null;e?(c=DvtNBoxCellRenderer._isLabelVertical(a,b)?new DvtRectangle(d.headerSize,t,k.getWidth()-d.headerSize-n,k.getHeight()-t-h):new DvtRectangle(m,d.headerSize,k.getWidth()-m-n,k.getHeight()-d.headerSize-h),g instanceof DvtSimpleScrollableContainer&&g.setTranslate(0,d.headerSize)):c=new DvtRectangle(m,t,k.getWidth()-m-n,k.getHeight()-t-h);b.__childArea=c};
DvtNBoxCellRenderer.renderHeader=function(a,b,c,d,e){var g=DvtNBoxDataUtils.getDisplayable(a,b,DvtNBoxConstants.LABEL);g&&(g.getParent().removeChild(g),DvtNBoxDataUtils.setDisplayable(a,b,null,DvtNBoxConstants.LABEL));if(g=DvtNBoxDataUtils.getDisplayable(a,b,"countLabel"))g.getParent().removeChild(g),DvtNBoxDataUtils.setDisplayable(a,b,null,"countLabel");g=!1;if(b[DvtNBoxConstants.LABEL]){var h=a.getOptions(),k=h.__layout.countLabelGap,m=h.__layout.cellStartGap,n=h.__layout.cellEndGap,t=h.__layout.cellTopGap,
u=h.__layout.__cellLayout,h=DvtNBoxDataUtils.getRowIndex(a,b[DvtNBoxConstants.ROW]),v=DvtNBoxDataUtils.getColumnIndex(a,b[DvtNBoxConstants.COLUMN]),w=h*DvtNBoxDataUtils.getColumnCount(a)+v,v=DvtNBoxDataUtils.getDisplayable(a,b,"background"),h=DvtAgent.isRightToLeft(a.getCtx()),u=u.labelHeight,x=!1,y=DvtNBoxStyleUtils.getLabelHalign(a,b),z=0,A=0,B=null,C=z=0,D=null;e||"on"!=DvtNBoxStyleUtils.getCellShowCount(a,b)||(D=""+d.total[w],d.highlighted&&(D=DvtBundle.getTranslatedString(DvtBundle.NBOX_PREFIX,
"HIGHLIGHTED_COUNT",[d.highlighted[w],D])));DvtNBoxCellRenderer._isLabelVertical(a,b)?(D&&(B=DvtNBoxRenderer.createText(a.getCtx(),D,DvtNBoxStyleUtils.getCellCountLabelStyle(a),DvtOutputText.H_ALIGN_CENTER,DvtOutputText.V_ALIGN_MIDDLE),DvtTextUtils.fitText(B,v.getHeight()-m-n,u,c)?(DvtNBoxDataUtils.setDisplayable(a,b,B,"countLabel"),g=!0,z=B.getDimensions().w,A=z+k,C=v.getHeight()/2,z=t+u/2):x=!0),d=0,x||(e=DvtNBoxRenderer.createText(a.getCtx(),b[DvtNBoxConstants.LABEL],DvtNBoxStyleUtils.getCellLabelStyle(a,
w),DvtOutputText.H_ALIGN_CENTER,DvtOutputText.V_ALIGN_MIDDLE),DvtTextUtils.fitText(e,v.getHeight()-m-n-A,u,c)&&(DvtNBoxDataUtils.setDisplayable(a,b,e,DvtNBoxConstants.LABEL),d=e.getDimensions().w,g=!0,DvtNBoxRenderer.positionText(e,t+u/2,(v.getHeight()+A)/2,h?Math.PI/2:-Math.PI/2),d=(d+k)/2)),B&&DvtNBoxRenderer.positionText(B,z,C-d,h?Math.PI/2:-Math.PI/2)):(D&&(B=DvtNBoxRenderer.createText(a.getCtx(),D,DvtNBoxStyleUtils.getCellCountLabelStyle(a),y,DvtOutputText.V_ALIGN_MIDDLE),DvtTextUtils.fitText(B,
v.getWidth()-m-n,u,c)?(DvtNBoxDataUtils.setDisplayable(a,b,B,"countLabel"),g=!0,z=B.getDimensions().w,A=z+k,z=y==DvtOutputText.H_ALIGN_CENTER?v.getWidth()/2:y==DvtOutputText.H_ALIGN_RIGHT?v.getWidth()-n:m,C=t+u/2,DvtNBoxRenderer.positionText(B,z,C)):x=!0),d=0,x||(e=DvtNBoxRenderer.createText(a.getCtx(),b[DvtNBoxConstants.LABEL],DvtNBoxStyleUtils.getCellLabelStyle(a,w),y,DvtOutputText.V_ALIGN_MIDDLE),DvtTextUtils.fitText(e,v.getWidth()-m-n-A,u,c)&&(DvtNBoxDataUtils.setDisplayable(a,b,e,DvtNBoxConstants.LABEL),
d=e.getDimensions().w,g=!0,y==DvtOutputText.H_ALIGN_CENTER?(m=(v.getWidth()-(h?-1:1)*A)/2,d=(h?-1:1)*(d+k)/2):y==DvtOutputText.H_ALIGN_RIGHT?(m=v.getWidth()-n-(h?0:1)*A,d=(h?-1:0)*(d+k)):(m+=(h?1:0)*A,d=(h?0:1)*(d+k)),DvtNBoxRenderer.positionText(e,m,t+u/2))),B&&d&&DvtNBoxRenderer.positionText(B,z+d,C))}DvtNBoxCellRenderer._addAccessibilityAttributes(a,b,c);return g};
DvtNBoxCellRenderer.renderBodyCountLabels=function(a,b,c){for(var d=[],e=Number.MAX_VALUE,g=0;g<c.length;g++){var h=c[g],k=b.total[h],m=DvtNBoxDataUtils.getCell(a,h),h=m.__childArea,k=DvtNBoxRenderer.createText(a.getCtx(),""+k,DvtNBoxStyleUtils.getCellBodyCountLabelStyle(a),DvtOutputText.H_ALIGN_CENTER,DvtOutputText.V_ALIGN_MIDDLE);d.push(k);e=Math.min(e,k.getOptimalFontSize(h))}for(g=0;g<c.length;g++)d[g].setFontSize(e),h=c[g],m=DvtNBoxDataUtils.getCell(a,h),k=DvtNBoxDataUtils.getDisplayable(a,m),
h=m.__childArea,DvtTextUtils.fitText(d[g],h.w,h.h,k)&&(DvtNBoxCellRenderer.renderHeader(a,m,k,b,!0),DvtNBoxRenderer.positionText(d[g],h.x+h.w/2,h.y+h.h/2))};DvtNBoxCellRenderer._isLabelVertical=function(a,b){var c=DvtNBoxDataUtils.getMaximizedColumn(a),d=DvtNBoxDataUtils.getMaximizedRow(a);return!c||c==b[DvtNBoxConstants.COLUMN]||d&&d!=b[DvtNBoxConstants.ROW]?!1:!0};
DvtNBoxCellRenderer.getCellDimensions=function(a,b,c,d,e){var g=a.getOptions().__layout.cellGap,h=DvtAgent.isRightToLeft(a.getCtx());d=g+d.minimumCellSize;var k=DvtNBoxDataUtils.getRowCount(a),g=DvtNBoxDataUtils.getColumnCount(a),m=DvtNBoxRenderer.getRowDimensions(a,b,e),n=DvtNBoxRenderer.getColumnDimensions(a,c,e),t=DvtNBoxDataUtils.getMaximizedRow(a),u=DvtNBoxDataUtils.getMaximizedColumn(a),v=n.x,w=m.y,n=n.w,m=m.h,x=!0;t&&(w=DvtNBoxDataUtils.getRowIndex(a,t),b<w?(w=e.y+e.h-(b+1)*d,m=d,x=!1):b==
w?(w=e.y+(k-b-1)*d,m=e.h-(k-1)*d):(w=e.y+(k-b-1)*d,m=d,x=!1));u&&x&&(a=DvtNBoxDataUtils.getColumnIndex(a,u),c<a?(n=d,v=e.x+(h?e.w-d:0)+(h?-1:1)*c*d):c==a?(n=e.w-(g-1)*d,v=e.x+(h?e.w-n:0)+(h?-1:1)*c*d):(n=d,v=e.x+(h?-d:e.w)+(h?1:-1)*(g-c)*d));return new DvtRectangle(v,w,n,m)};
DvtNBoxCellRenderer.calculateCellLayout=function(a,b){var c=a.getOptions(),d=c.__layout.cellTopGap,e=c.__layout.cellBottomGap,g=c.__layout.cellLabelGap,h=c.__layout.minimumCellSize,k=0,m=DvtNBoxDataUtils.getCell(a,0);if(m[DvtNBoxConstants.LABEL]){var n=m[DvtNBoxConstants.LABEL_HALIGN],k=DvtNBoxRenderer.createText(a.getCtx(),m[DvtNBoxConstants.LABEL],DvtNBoxStyleUtils.getCellLabelStyle(a,0),n,DvtOutputText.V_ALIGN_MIDDLE),k=DvtTextUtils.guessTextDimensions(k).h;"on"==DvtNBoxStyleUtils.getCellShowCount(a,
m)&&(m=DvtNBoxRenderer.createText(a.getCtx(),b.total[0],DvtNBoxStyleUtils.getCellCountLabelStyle(a),n,DvtOutputText.V_ALIGN_MIDDLE),m=DvtTextUtils.guessTextDimensions(m).h,k=Math.max(k,m))}e=k+d+e;d=k+d+g;h=Math.max(e,h);h={labelHeight:k,headerSize:d,minimizedHeaderSize:e,minimumCellSize:h};return c.__layout.__cellLayout=h};
DvtNBoxCellRenderer.animateUpdate=function(a,b,c){var d=a.getOldNBox(),e=a.getNewNBox(),g=new DvtCustomAnimation(e.getCtx(),c,a.getAnimationDuration()),h=c.getChildContainer(),k=h.getMatrix();h.setMatrix(DvtNBoxRenderer.getGlobalMatrix(h));var m=c.getParent();m.addChildAt(h,m.getChildIndex(c)+1);g.getAnimator().addProp(DvtAnimator.TYPE_MATRIX,c,c.getMatrix,c.setMatrix,c.getMatrix());c.setMatrix(b.getMatrix());d=DvtNBoxDataUtils.getDisplayable(d,b.getData(),"background");m=DvtNBoxDataUtils.getDisplayable(e,
c.getData(),"background");g.getAnimator().addProp(DvtAnimator.TYPE_FILL,m,m.getFill,m.setFill,m.getFill());m.setFill(d.getFill());g.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,m,m.getWidth,m.setWidth,m.getWidth());m.setWidth(d.getWidth());g.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,m,m.getHeight,m.setHeight,m.getHeight());m.setHeight(d.getHeight());c.isShowingKeyboardFocusEffect()&&(e=DvtNBoxDataUtils.getDisplayable(e,c.getData(),"focusEffect").getEffect())&&(g.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,
e,e.getWidth,e.setWidth,e.getWidth()),e.setWidth(d.getWidth()+2),g.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,e,e.getHeight,e.setHeight,e.getHeight()),e.setHeight(d.getHeight()+2));DvtNBoxCellRenderer._animateLabels(a,b,c,"countLabel");DvtNBoxCellRenderer._animateLabels(a,b,c,DvtNBoxConstants.LABEL);DvtPlayable.appendOnEnd(g,function(){c.addChild(h);h.setMatrix(k)});a.add(g,DvtNBoxDataAnimationHandler.UPDATE)};
DvtNBoxCellRenderer._animateLabels=function(a,b,c,d){var e=a.getOldNBox(),g=a.getNewNBox(),h=DvtNBoxDataUtils.getDisplayable(e,b.getData(),d);d=DvtNBoxDataUtils.getDisplayable(g,c.getData(),d);b=DvtNBoxCellRenderer._isLabelVertical(e,b.getData());c=DvtNBoxCellRenderer._isLabelVertical(g,c.getData());if(h||d)h&&d&&b==c?(g=new DvtCustomAnimation(g.getCtx(),d,a.getAnimationDuration()),c=h.getHorizAlignment(),c="left"==c?-1:"center"==c?0:1,b=d.getHorizAlignment(),c=(("left"==b?-1:"center"==b?0:1)-c)*
d.measureDimensions().w/2,g.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,d,d.getX,d.setX,d.getX()),d.setX(h.getX()+c),g.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,d,d.getY,d.setY,d.getY()),d.setY(h.getY()),g.getAnimator().addProp(DvtAnimator.TYPE_MATRIX,d,d.getMatrix,d.setMatrix,d.getMatrix()),d.setMatrix(h.getMatrix()),a.add(g,DvtNBoxDataAnimationHandler.UPDATE)):(h&&(h.setMatrix(DvtNBoxRenderer.getGlobalMatrix(h)),g.getDeleteContainer().addChild(h),a.add(new DvtAnimFadeOut(g.getCtx(),h,a.getAnimationDuration()),
DvtNBoxDataAnimationHandler.UPDATE)),d&&(d.setAlpha(0),a.add(new DvtAnimFadeIn(g.getCtx(),d,a.getAnimationDuration()),DvtNBoxDataAnimationHandler.UPDATE)))};DvtNBoxCellRenderer.animateDelete=function(a,b){var c=a.getNewNBox(),d=b.getChildContainer();if(d){var e=DvtNBoxRenderer.getGlobalMatrix(d),g=b.getParent();g.addChildAt(d,g.getChildIndex(b)+1);d.setMatrix(e)}c.getDeleteContainer().addChild(b);a.add(new DvtAnimFadeOut(c.getCtx(),b,a.getAnimationDuration()),DvtNBoxDataAnimationHandler.UPDATE)};
DvtNBoxCellRenderer.animateInsert=function(a,b){var c=a.getNewNBox(),d=b.getChildContainer(),e=null;if(d){var e=d.getMatrix(),g=DvtNBoxRenderer.getGlobalMatrix(b),h=b.getParent();h.addChildAt(d,h.getChildIndex(b)+1);d.setMatrix(g)}b.setAlpha(0);c=new DvtAnimFadeIn(c.getCtx(),b,a.getAnimationDuration());d&&DvtPlayable.appendOnEnd(c,function(){b.addChild(d);d.setMatrix(e)});a.add(c,DvtNBoxDataAnimationHandler.UPDATE)};
DvtNBoxCellRenderer.renderDropSiteFeedback=function(a,b){var c=DvtNBoxDataUtils.getDisplayable(a,b.getData(),"background"),d=new DvtRect(a.getCtx(),c.getX(),c.getY(),c.getWidth(),c.getHeight());d.setPixelHinting(!0);var e=DvtNBoxStyleUtils.getCellDropTargetStyle(a);DvtNBoxCellRenderer._applyStyleToRect(d,e);b.addChildAt(d,b.getChildIndex(c)+1);return d};
DvtNBoxCellRenderer._applyStyleToRect=function(a,b){var c=b.getStyle(DvtCSSStyle.BACKGROUND),d=b.getStyle(DvtCSSStyle.BACKGROUND_COLOR);(c=c?c:d)&&DvtNBoxRenderer.setFill(a,c);"solid"==b.getStyle(DvtCSSStyle.BORDER_STYLE)&&(c=(c=b.getStyle(DvtCSSStyle.BORDER_COLOR))?c:"#000000",d=b.getStyle(DvtCSSStyle.BORDER_WIDTH),d=null==d?1:parseFloat(d),a.setSolidStroke(c,null,d))};
DvtNBoxCellRenderer._addAccessibilityAttributes=function(a,b,c){a=DvtAgent.isTouchDevice()?DvtNBoxDataUtils.getDisplayable(a,b,"background"):c;a.setAriaRole("img");DvtAgent.deferAriaCreation()||(c=c.getAriaLabel())&&a.setAriaProperty(DvtNBoxConstants.LABEL,c)};var DvtNBoxNodeRenderer={};DvtObj.createSubclass(DvtNBoxNodeRenderer,DvtObj,"DvtNBoxNodeRenderer");
DvtNBoxNodeRenderer.render=function(a,b,c,d){DvtNBoxNodeRenderer._renderNodeBackground(a,b,c,d);DvtNBoxNodeRenderer._renderNodeIndicator(a,b,c,d);DvtNBoxNodeRenderer._renderNodeIcon(a,b,c,d);DvtNBoxNodeRenderer._renderNodeLabels(a,b,c,d);DvtNBoxNodeRenderer._addAccessibilityAttributes(a,c)};
DvtNBoxNodeRenderer.calculateNodeLayout=function(a){for(var b=a.getOptions(),c=b.__layout.gridGap,d=b.__layout.nodeStartLabelGap,e=b.__layout.nodeLabelOnlyStartLabelGap,g=b.__layout.nodeEndLabelGap,h=DvtNBoxNodeRenderer._calculateSimpleNodeLayout(a),k=h.nodeHeight,m=h.indicatorSectionWidth,n=h.iconSectionWidth,t=m||n?d:e,u=0,d=[],v=0,w=0,w=DvtNBoxDataUtils.getMaximizedRow(a),x=DvtNBoxDataUtils.getMaximizedColumn(a),u=DvtNBoxDataUtils.getRowCount(a),v=DvtNBoxDataUtils.getColumnCount(a),y=0;y<u;y++)for(var z=
0;z<v;z++)d.push({cellRows:0,cellColumns:0,overflow:!1});for(var e=[],A=DvtNBoxDataUtils.getNodeCount(a),y=0;y<A;y++)z=DvtNBoxDataUtils.getNode(a,y),DvtNBoxDataUtils.isNodeHidden(a,z)||(z=DvtNBoxDataUtils.getCellIndex(a,z),isNaN(e[z])&&(e[z]=0),e[z]++);if(w&&x)u=null!=h.labelSectionWidth?h.labelSectionWidth:b.__layout.maximumLabelWidth+t+g,g=DvtNBoxDataUtils.getColumnIndex(a,x)+v*DvtNBoxDataUtils.getRowIndex(a,w),a=DvtNBoxDataUtils.getCell(a,g).__childArea,w=Math.floor((a.w+c)/(m+n+u+c)),0==w&&null==
h.labelSectionWidth&&(e=a.w-m-n,e>=b.__layout.minimumLabelWidth&&(u=e,w=Math.floor((a.w+c)/(m+n+u+c)))),d[g]={cellRows:-1,cellColumns:w,overflow:!1};else{A=[];if(w)for(u=DvtNBoxDataUtils.getRowIndex(a,w),z=0;z<v;z++)A.push(z+u*v);else if(x)for(w=DvtNBoxDataUtils.getColumnIndex(a,x),y=0;y<u;y++)A.push(w+y*v);else for(u=0;u<d.length;u++)A.push(u);if(null!=h.labelSectionWidth)u=h.labelSectionWidth,a=DvtNBoxDataUtils.getCell(a,A[0]),a=a.__childArea,v=Math.floor((a.h+c)/(k+c)),w=Math.floor((a.w+c)/(m+
n+u+c));else{for(x=h=0;x<A.length;x++)!isNaN(e[A[x]])&&e[A[x]]>e[h]&&(h=A[x]);a=DvtNBoxDataUtils.getCell(a,h);a=a.__childArea;v=Math.floor((a.h+c)/(k+c));w=Math.floor((a.w+c)/(m+n+b.__layout.minimumLabelWidth+t+g+c));if(v*w<e[h])u=Math.floor(Math.min(b.__layout.maximumLabelWidth+t+g,(a.w+c)/w-(m+n+c)));else for(u=Math.floor(Math.min(b.__layout.maximumLabelWidth+t+g,(a.w+c)/w-(m+n+c)));u<b.__layout.maximumLabelWidth+t+g;)if((w-1)*v>=e[h])w--,u=Math.floor(Math.min(b.__layout.maximumLabelWidth+t+g,(a.w+
c)/w-(m+n+c)));else break}for(x=0;x<A.length;x++)c=A[x],g=!1,e[c]>v*w&&(g=!0),d[c]={cellRows:v,cellColumns:w,overflow:g}}k={nodeHeight:k,indicatorSectionWidth:m,iconSectionWidth:n,labelSectionWidth:u,cellLayouts:d};return b.__layout.__nodeLayout=k};
DvtNBoxNodeRenderer.calculateNodeDrawerLayout=function(a,b){var c=a.getOptions(),d=c.__layout.gridGap,e=c.__layout.nodeStartLabelGap,g=c.__layout.nodeLabelOnlyStartLabelGap,h=c.__layout.nodeEndLabelGap,k=DvtNBoxNodeRenderer._calculateSimpleNodeLayout(a),m=k.nodeHeight,n=k.indicatorSectionWidth,t=k.iconSectionWidth,e=null!=k.labelSectionWidth?k.labelSectionWidth:c.__layout.maximumLabelWidth+(n||t?e:g)+h,g=b.__childArea,h=Math.floor((g.w+d)/(n+t+e+d));0==h&&null==k.labelSectionWidth&&(k=g.w-n-t,k>=
c.__layout.minimumLabelWidth&&(e=k,h=Math.floor((g.w+d)/(n+t+e+d))));d={nodeHeight:m,indicatorSectionWidth:n,iconSectionWidth:t,labelSectionWidth:e,drawerLayout:{rows:-1,columns:h}};return c.__layout.__nodeDrawerLayout=d};
DvtNBoxNodeRenderer._calculateSimpleNodeLayout=function(a){var b=a.getOptions(),c=b.__layout.nodeIndicatorGap,d=b.__layout.nodeSingleLabelGap,e=b.__layout.nodeDualLabelGap,g=b.__layout.nodeInterLabelGap,h=b.__layout.nodeSwatchSize,k=DvtNBoxDataUtils.getNode(a,0),m=b=0,n=0,t=null,u=DvtNBoxDataUtils.getIndicatorIcon(a,k),v=DvtNBoxStyleUtils.getNodeIndicatorColor(a,k),w=DvtNBoxDataUtils.getIcon(a,k);u?(v=u[DvtNBoxConstants.HEIGHT],m=u[DvtNBoxConstants.WIDTH]+2*c,b=Math.max(b,v+2*c)):v&&(m=h);k[DvtNBoxConstants.LABEL]?
(c=DvtNBoxRenderer.createText(a.getCtx(),k[DvtNBoxConstants.LABEL],DvtNBoxStyleUtils.getNodeLabelStyle(a,k),DvtOutputText.H_ALIGN_LEFT,DvtOutputText.V_ALIGN_MIDDLE),c=DvtTextUtils.guessTextDimensions(c).h,b=Math.max(b,c+2*d),k[DvtNBoxConstants.SECONDARY_LABEL]&&(a=DvtNBoxRenderer.createText(a.getCtx(),k[DvtNBoxConstants.SECONDARY_LABEL],DvtNBoxStyleUtils.getNodeSecondaryLabelStyle(a,k),DvtOutputText.H_ALIGN_LEFT,DvtOutputText.V_ALIGN_MIDDLE),a=DvtTextUtils.guessTextDimensions(a).h,b=Math.max(b,c+
a+2*e+g))):(t=0,k[DvtNBoxConstants.COLOR]&&(u&&!DvtNBoxStyleUtils.getNodeIndicatorColor(a,k)||w&&!w[DvtNBoxConstants.SOURCE]||(t=m?m:h)));w&&(n=Math.max(b,DvtAgent.isTouchDevice()?w.preferredSizeTouch:w.preferredSize),e=(w[DvtNBoxConstants.SOURCE]?w.sourcePaddingRatio:w.shapePaddingRatio)*n,g=w[DvtNBoxConstants.HEIGHT]?w[DvtNBoxConstants.HEIGHT]:n-2*e,n=(w[DvtNBoxConstants.WIDTH]?w[DvtNBoxConstants.WIDTH]:n-2*e)+2*e,b=Math.max(b,g+2*e));return{nodeHeight:b,indicatorSectionWidth:m,iconSectionWidth:n,
labelSectionWidth:t}};
DvtNBoxNodeRenderer._renderNodeBackground=function(a,b,c,d){var e=d.indicatorSectionWidth+d.iconSectionWidth+d.labelSectionWidth,g=d.nodeHeight;d=DvtNBoxStyleUtils.getNodeBorderRadius(a);var h=DvtNBoxStyleUtils.getNodeHoverColor(a),k=DvtNBoxStyleUtils.getNodeSelectionColor(a),m=new DvtRect(a.getCtx(),0,0,e,g);m.setFill(null);d&&(m.setRx(d),m.setRy(d));m.setHoverStroke(new DvtSolidStroke(h,null,2),new DvtSolidStroke(k,null,4));m.setSelectedStroke(new DvtSolidStroke(k,null,4),null);m.setSelectedHoverStroke(new DvtSolidStroke(h,
null,2),new DvtSolidStroke(k,null,6));c.addChild(m);c.setSelectionShape(m);e=new DvtRect(a.getCtx(),0,0,e,g);d&&(e.setRx(d),e.setRy(d));d=DvtNBoxStyleUtils.getNodeColor(a,b);e.setSolidFill(d);DvtNBoxStyleUtils.getNodeBorderColor(a,b)&&DvtNBoxStyleUtils.getNodeBorderWidth(a,b)&&e.setSolidStroke(DvtNBoxStyleUtils.getNodeBorderColor(a,b),null,DvtNBoxStyleUtils.getNodeBorderWidth(a,b));c.addChild(e);DvtNBoxDataUtils.setDisplayable(a,b,e,"background")};
DvtNBoxNodeRenderer._renderNodeIndicator=function(a,b,c,d){var e=DvtNBoxStyleUtils.getNodeColor(a,b),g=DvtColorUtils.getContrastingTextColor(e),h=DvtAgent.isRightToLeft(a.getCtx())?d.labelSectionWidth+d.iconSectionWidth:0,k=DvtNBoxStyleUtils.getNodeIndicatorColor(a,b);if(k){var g=DvtColorUtils.getContrastingTextColor(k),m=new DvtRect(a.getCtx(),h,0,d.indicatorSectionWidth,d.nodeHeight);m.setSolidFill(k);DvtNBoxNodeRenderer._clipIfNecessary(a,m,d);c.addChild(m);DvtNBoxDataUtils.setDisplayable(a,b,
m,DvtNBoxConstants.INDICATOR)}if(k=DvtNBoxDataUtils.getIndicatorIcon(a,b))g=k[DvtNBoxConstants.COLOR]?k[DvtNBoxConstants.COLOR]:g,d=k[DvtNBoxConstants.SOURCE]?new DvtImageMarker(a.getCtx(),h+d.indicatorSectionWidth/2,d.nodeHeight/2,k[DvtNBoxConstants.WIDTH],k[DvtNBoxConstants.HEIGHT],k[DvtNBoxConstants.SOURCE]):new DvtSimpleMarker(a.getCtx(),k[DvtNBoxConstants.SHAPE],DvtCSSStyle.SKIN_ALTA,h+d.indicatorSectionWidth/2,d.nodeHeight/2,k[DvtNBoxConstants.WIDTH],k[DvtNBoxConstants.HEIGHT]),"none"!=k[DvtNBoxConstants.PATTERN]?
d.setFill(new DvtPatternFill(k[DvtNBoxConstants.PATTERN],g,e)):d.setSolidFill(g),c.addChild(d),DvtNBoxDataUtils.setDisplayable(a,b,d,DvtNBoxConstants.INDICATOR_ICON)};
DvtNBoxNodeRenderer._renderNodeIcon=function(a,b,c,d){var e=DvtNBoxStyleUtils.getNodeColor(a,b),g=DvtColorUtils.getContrastingTextColor(e),h=DvtAgent.isRightToLeft(a.getCtx()),k=DvtNBoxDataUtils.getIcon(a,b);if(k){var m=(k[DvtNBoxConstants.SOURCE]?k.sourcePaddingRatio:k.shapePaddingRatio)*d.nodeHeight,n=k[DvtNBoxConstants.WIDTH]?k[DvtNBoxConstants.WIDTH]:d.iconSectionWidth-2*m,m=k[DvtNBoxConstants.HEIGHT]?k[DvtNBoxConstants.HEIGHT]:d.nodeHeight-2*m,h=d[h?"labelSectionWidth":"indicatorSectionWidth"]+
d.iconSectionWidth/2,t=d.nodeHeight/2,g=k[DvtNBoxConstants.COLOR]?k[DvtNBoxConstants.COLOR]:g,n=k[DvtNBoxConstants.SOURCE]?new DvtImageMarker(a.getCtx(),h,t,n,m,k[DvtNBoxConstants.SOURCE]):new DvtSimpleMarker(a.getCtx(),k[DvtNBoxConstants.SHAPE],DvtCSSStyle.SKIN_ALTA,h,t,n,m);"none"!=k[DvtNBoxConstants.PATTERN]?n.setFill(new DvtPatternFill(k[DvtNBoxConstants.PATTERN],g,e)):n.setSolidFill(g);0!=d.indicatorSectionWidth&&0!=d.labelSectionWidth||DvtNBoxNodeRenderer._clipIfNecessary(a,n,d);c.addChild(n)}DvtNBoxDataUtils.setDisplayable(a,
b,n,DvtNBoxConstants.ICON)};
DvtNBoxNodeRenderer._renderNodeLabels=function(a,b,c,d){var e=a.getOptions(),g=e.__layout.nodeInterLabelGap,h=e.__layout.nodeLabelOnlyStartLabelGap,k=e.__layout.nodeStartLabelGap,e=e.__layout.nodeEndLabelGap,h=d.indicatorSectionWidth||d.iconSectionWidth?k:h,k=DvtNBoxStyleUtils.getNodeColor(a,b),k=DvtColorUtils.getContrastingTextColor(k),m=DvtAgent.isRightToLeft(a.getCtx()),n=m?DvtOutputText.H_ALIGN_RIGHT:DvtOutputText.H_ALIGN_LEFT,m=m?d.labelSectionWidth-h:d.indicatorSectionWidth+d.iconSectionWidth+
h;if(b[DvtNBoxConstants.LABEL]){var t=DvtNBoxRenderer.createText(a.getCtx(),b[DvtNBoxConstants.LABEL],DvtNBoxStyleUtils.getNodeLabelStyle(a,b),n,DvtOutputText.V_ALIGN_MIDDLE),u=DvtTextUtils.guessTextDimensions(t).h;DvtTextUtils.fitText(t,d.labelSectionWidth-h-e,u,c)&&(DvtNBoxRenderer.positionText(t,m,d.nodeHeight/2),t.getCSSStyle()&&t.getCSSStyle().getStyle("color")?t.setSolidFill(t.getCSSStyle().getStyle("color")):t.setSolidFill(k),DvtNBoxDataUtils.setDisplayable(a,b,t,DvtNBoxConstants.LABEL));if(b[DvtNBoxConstants.SECONDARY_LABEL]){var n=
DvtNBoxRenderer.createText(a.getCtx(),b[DvtNBoxConstants.SECONDARY_LABEL],DvtNBoxStyleUtils.getNodeSecondaryLabelStyle(a,b),n,DvtOutputText.V_ALIGN_MIDDLE),v=DvtTextUtils.guessTextDimensions(n).h;DvtTextUtils.fitText(n,d.labelSectionWidth-h-e,v,c)&&(c=(d.nodeHeight-u-v-g)/2,DvtNBoxRenderer.positionText(t,m,c+u/2),DvtNBoxRenderer.positionText(n,m,c+u+g+v/2),n.getCSSStyle()&&n.getCSSStyle().getStyle("color")?n.setSolidFill(n.getCSSStyle().getStyle("color")):n.setSolidFill(k),DvtNBoxDataUtils.setDisplayable(a,
b,n,DvtNBoxConstants.SECONDARY_LABEL))}}};DvtNBoxNodeRenderer._clipIfNecessary=function(a,b,c){if(a=DvtNBoxStyleUtils.getNodeBorderRadius(a)){var d=c.indicatorSectionWidth+c.iconSectionWidth+c.labelSectionWidth;c=c.nodeHeight;var e=new DvtClipPath;e.addRect(0,0,d,c,a,a);b.setClipPath(e)}};
DvtNBoxNodeRenderer.animateUpdate=function(a,b,c){var d=a.getOldNBox(),e=a.getNewNBox(),g=DvtNBoxRenderer.getGlobalMatrix(b),h=DvtNBoxRenderer.getGlobalMatrix(c),k=c.getMatrix(),m=c.getParent();b.setAlpha(0);a.getNewNBox().addChild(c);c.setMatrix(g);var n=DvtNBoxDataUtils.getNodeScrollableContainer(d,b),t=DvtNBoxDataUtils.getNodeScrollableContainer(e,c);if(n||t){var g=new DvtClipPath,u;n&&(u=DvtNBoxRenderer.getGlobalMatrix(n),u=new DvtRectangle(u.getTx(),u.getTy(),n.getWidth(),n.getHeight()));t&&
(n=DvtNBoxRenderer.getGlobalMatrix(t),t=new DvtRectangle(n.getTx(),n.getTy(),t.getWidth(),t.getHeight()),u=u?u.getUnion(t):t);u&&(g.addRect(u.x,u.y,u.w,u.h),c.setClipPath(g))}h=new DvtAnimMoveTo(c.getCtx(),c,new DvtPoint(h.getTx(),h.getTy()),a.getAnimationDuration());DvtPlayable.appendOnEnd(h,function(){m.addChild(c);c.setMatrix(k);c.setClipPath(null)});a.add(h,DvtNBoxDataAnimationHandler.UPDATE);h=new DvtCustomAnimation(e.getCtx(),c,a.getAnimationDuration());DvtNBoxNodeRenderer._animateFill(h,d,
e,b,c,"background");DvtNBoxNodeRenderer._animateFill(h,d,e,b,c,DvtNBoxConstants.LABEL);DvtNBoxNodeRenderer._animateFill(h,d,e,b,c,DvtNBoxConstants.SECONDARY_LABEL);DvtNBoxNodeRenderer._animateFill(h,d,e,b,c,DvtNBoxConstants.INDICATOR);DvtNBoxNodeRenderer._animateFill(h,d,e,b,c,DvtNBoxConstants.INDICATOR_ICON);DvtNBoxNodeRenderer._animateFill(h,d,e,b,c,DvtNBoxConstants.ICON);a.add(h,DvtNBoxDataAnimationHandler.UPDATE)};
DvtNBoxNodeRenderer._animateFill=function(a,b,c,d,e,g){b=DvtNBoxDataUtils.getDisplayable(b,d.getData(),g);c=DvtNBoxDataUtils.getDisplayable(c,e.getData(),g);b&&c&&(a.getAnimator().addProp(DvtAnimator.TYPE_FILL,c,c.getFill,c.setFill,c.getFill()),c.setFill(b.getFill()))};
DvtNBoxNodeRenderer.animateDelete=function(a,b){var c=DvtNBoxDataAnimationHandler.DELETE,d=a.getOldNBox(),e=a.getNewNBox(),g=b.getData()[DvtNBoxConstants.ID],g=DvtNBoxDataUtils.getNodeIndex(e,g);if(!isNaN(g)&&(g=DvtNBoxDataUtils.getNode(e,g),!DvtNBoxDataUtils.isNodeHidden(e,g)&&(c=DvtNBoxDataAnimationHandler.UPDATE,DvtNBoxDataUtils.getGrouping(e)))){var h=e.getOptions().__groups;DvtNBoxDataUtils.getGroupBehavior(e)==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL&&(h=h[DvtNBoxDataUtils.getCellIndex(e,
g)]);if(g=h[DvtNBoxDataUtils.getNodeGroupId(g)])if(g=DvtNBoxDataUtils.getDisplayable(e,g))g=DvtNBoxRenderer.getGlobalMatrix(g),h=d.getOptions().__layout.__nodeLayout,h=new DvtPoint((h.indicatorSectionWidth+h.iconSectionWidth+h.labelSectionWidth)/2,h.nodeHeight/2),a.add(new DvtAnimMoveTo(e.getCtx(),b,new DvtPoint(g.getTx()-h.x,g.getTy()-h.y),a.getAnimationDuration()),c)}b.setMatrix(DvtNBoxRenderer.getGlobalMatrix(b));if(g=DvtNBoxDataUtils.getNodeScrollableContainer(d,b))d=new DvtClipPath,h=DvtNBoxRenderer.getGlobalMatrix(g),
g=new DvtRectangle(h.getTx(),h.getTy(),g._width,g._height),d.addRect(g.x,g.y,g.w,g.h),b.setClipPath(d);e.getDeleteContainer().addChild(b);a.add(new DvtAnimFadeOut(e.getCtx(),b,a.getAnimationDuration()),c)};
DvtNBoxNodeRenderer.animateInsert=function(a,b){var c=DvtNBoxDataAnimationHandler.INSERT,d=a.getOldNBox(),e=a.getNewNBox(),g=b.getData()[DvtNBoxConstants.ID],g=DvtNBoxDataUtils.getNodeIndex(d,g);if(!isNaN(g)&&(g=DvtNBoxDataUtils.getNode(d,g),!DvtNBoxDataUtils.isNodeHidden(d,g)&&(c=DvtNBoxDataAnimationHandler.UPDATE,DvtNBoxDataUtils.getGrouping(d)))){var h=d.getOptions().__groups;DvtNBoxDataUtils.getGroupBehavior(d)==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL&&(h=h[DvtNBoxDataUtils.getCellIndex(d,
g)]);if(g=h[DvtNBoxDataUtils.getNodeGroupId(g)])if(g=DvtNBoxDataUtils.getDisplayable(d,g)){var k=b.getMatrix(),m=b.getParent(),d=DvtNBoxRenderer.getGlobalMatrix(b),g=DvtNBoxRenderer.getGlobalMatrix(g),h=e.getOptions().__layout.__nodeLayout,h=new DvtPoint((h.indicatorSectionWidth+h.iconSectionWidth+h.labelSectionWidth)/2,h.nodeHeight/2);g.translate(-h.x,-h.y);e.addChild(b);b.setMatrix(g);d=new DvtAnimMoveTo(e.getCtx(),b,new DvtPoint(d.getTx(),d.getTy()),a.getAnimationDuration());DvtPlayable.appendOnEnd(d,
function(){b.setMatrix(k);m.addChild(b)});a.add(d,c)}}b.setAlpha(0);e=new DvtAnimFadeIn(e.getCtx(),b,a.getAnimationDuration());a.add(e,c)};DvtNBoxNodeRenderer._addAccessibilityAttributes=function(a,b){b.setAriaRole("img");if(!DvtAgent.deferAriaCreation()){var c=b.getAriaLabel();c&&b.setAriaProperty(DvtNBoxConstants.LABEL,c)}};var DvtNBoxCategoryNodeRenderer={};DvtObj.createSubclass(DvtNBoxCategoryNodeRenderer,DvtObj,"DvtNBoxCategoryNodeRenderer");
DvtNBoxCategoryNodeRenderer.render=function(a,b,c,d,e){DvtNBoxCategoryNodeRenderer._renderNodeBackground(a,b,c,d,e);var g=DvtNBoxCategoryNodeRenderer._renderNodeIndicator(a,b,c,d,e);DvtNBoxCategoryNodeRenderer._renderNodeCount(a,b,c,d,g,e);DvtNBoxCategoryNodeRenderer._addAccessibilityAttributes(a,c)};
DvtNBoxCategoryNodeRenderer._renderNodeBackground=function(a,b,c,d,e){b.__scale=d;b.__gap=e;e=DvtNBoxCategoryNodeRenderer.getSideLength(b);d=DvtNBoxStyleUtils.getNodeBorderRadius(a);var g=DvtNBoxStyleUtils.getNodeHoverColor(a),h=DvtNBoxStyleUtils.getNodeSelectionColor(a),k=new DvtRect(a.getCtx(),-e/2,-e/2,e,e);k.setFill(null);d&&(k.setRx(d),k.setRy(d));k.setHoverStroke(new DvtSolidStroke(g,null,2),new DvtSolidStroke(h,null,4));k.setSelectedStroke(new DvtSolidStroke(h,null,4),null);k.setSelectedHoverStroke(new DvtSolidStroke(g,
null,2),new DvtSolidStroke(h,null,6));c.addChild(k);c.setSelectionShape(k);e=new DvtRect(a.getCtx(),-e/2,-e/2,e,e);d&&(e.setRx(d),e.setRy(d));a=DvtNBoxStyleUtils.getCategoryNodeColor(a,b);e.setSolidFill(a);c.addChild(e)};DvtNBoxCategoryNodeRenderer.getSideLength=function(a){return a.__scale*Math.sqrt(a.nodeIndices.length)-a.__gap};
DvtNBoxCategoryNodeRenderer._renderNodeIndicator=function(a,b,c,d,e){var g=!1,h=a.getOptions().__layout.markerGap,k=DvtAgent.isRightToLeft(a.getCtx()),m=d*Math.sqrt(b.nodeIndices.length)-e;d=DvtNBoxStyleUtils.getCategoryNodeColor(a,b);var n=DvtColorUtils.getContrastingTextColor(d),t=m/4,u=1,v=k?m/2-t:-m/2;(e=DvtNBoxStyleUtils.getStyledCategoryIndicatorIcon(a,b))&&(u=Math.min(t/(e[DvtNBoxConstants.WIDTH]+2*h),m/(e[DvtNBoxConstants.HEIGHT]+2*h)));if(h=DvtNBoxStyleUtils.getCategoryNodeIndicatorColor(a,
b))n=DvtColorUtils.getContrastingTextColor(h),g=new DvtRect(a.getCtx(),v,-m/2,t,m),g.setSolidFill(h),c.addChild(g),g=!0;e&&(g=e[DvtNBoxConstants.COLOR]?e[DvtNBoxConstants.COLOR]:n,k=new DvtSimpleMarker(a.getCtx(),e[DvtNBoxConstants.SHAPE],DvtCSSStyle.SKIN_ALTA,(k?1:-1)*(m-t)/2,0,e[DvtNBoxConstants.WIDTH]*u,e[DvtNBoxConstants.HEIGHT]*u,null),e[DvtNBoxConstants.PATTERN]&&"none"!=e[DvtNBoxConstants.PATTERN]?k.setFill(new DvtPatternFill(e[DvtNBoxConstants.PATTERN],g,d)):k.setSolidFill(g),c.addChild(k),
DvtNBoxDataUtils.setDisplayable(a,b,k,DvtNBoxConstants.INDICATOR_ICON),g=!0);return g};
DvtNBoxCategoryNodeRenderer._renderNodeCount=function(a,b,c,d,e,g){var h=a.getOptions().__layout.categoryNodeLabelGap,k=DvtAgent.isRightToLeft(a.getCtx()),m=DvtNBoxStyleUtils.getFadedNodeAlpha(a),n=DvtNBoxDataUtils.getHighlightedItems(a),t=DvtNBoxDataUtils.getDisplayable(a,b,"label");if(n){if(n=b.highlightedCount,0==n){t&&t.setTextString("");c.setAlpha(m);return}}else n=b.nodeIndices.length;d=d*Math.sqrt(b.nodeIndices.length)-g;e=e?.75*d:d;k=(k?-1:1)*(d-e)/2;g=DvtNBoxStyleUtils.getCategoryNodeColor(a,
b);g=DvtColorUtils.getContrastingTextColor(g);m=new DvtRectangle(0,0,e-2*h,d-2*h);t?t.setTextString(""+n):(t=DvtNBoxRenderer.createText(a.getCtx(),""+n,DvtNBoxStyleUtils.getCategoryNodeLabelStyle(a),DvtOutputText.H_ALIGN_CENTER,DvtOutputText.V_ALIGN_MIDDLE),DvtNBoxDataUtils.setDisplayable(a,b,t,"label"));a=t.getOptimalFontSize(m);t.setFontSize(a);DvtTextUtils.fitText(t,e-2*h,d-2*h,c)&&(DvtNBoxRenderer.positionText(t,k,0),t.setSolidFill(g))};
DvtNBoxCategoryNodeRenderer.animateUpdate=function(a,b,c){var d=DvtNBoxRenderer.getGlobalMatrix(b),e=DvtNBoxRenderer.getGlobalMatrix(c),g=c.getMatrix(),h=c.getParent();b.setAlpha(0);a.getNewNBox().addChild(c);c.setMatrix(d);b=new DvtAnimMoveTo(c.getCtx(),c,new DvtPoint(e.getTx(),e.getTy()),a.getAnimationDuration());DvtPlayable.appendOnEnd(b,function(){h.addChild(c);c.setMatrix(g)});a.add(b,DvtNBoxDataAnimationHandler.UPDATE)};
DvtNBoxCategoryNodeRenderer.animateDelete=function(a,b){var c=DvtNBoxDataAnimationHandler.UPDATE,d=a.getOldNBox(),e=a.getNewNBox();DvtNBoxCategoryNodeRenderer.isMaximizeEqual(d,e)&&DvtNBoxCategoryNodeRenderer.isGroupingEqual(d,e)&&(c=DvtNBoxDataAnimationHandler.DELETE);d=new DvtAnimScaleTo(e.getCtx(),b,new DvtPoint(.01,.01),a.getAnimationDuration());a.add(d,c);d=new DvtAnimFadeOut(e.getCtx(),b,a.getAnimationDuration());a.add(d,c);b.setMatrix(DvtNBoxRenderer.getGlobalMatrix(b));e.getDeleteContainer().addChild(b)};
DvtNBoxCategoryNodeRenderer.animateInsert=function(a,b){var c=DvtNBoxDataAnimationHandler.UPDATE,d=a.getOldNBox(),e=a.getNewNBox();DvtNBoxCategoryNodeRenderer.isMaximizeEqual(d,e)&&DvtNBoxCategoryNodeRenderer.isGroupingEqual(d,e)&&(c=DvtNBoxDataAnimationHandler.INSERT);b.setScaleX(.01);b.setScaleY(.01);d=new DvtAnimScaleTo(e.getCtx(),b,new DvtPoint(1,1),a.getAnimationDuration());a.add(d,c);b.setAlpha(0);e=new DvtAnimFadeIn(e.getCtx(),b,a.getAnimationDuration());a.add(e,c)};
DvtNBoxCategoryNodeRenderer.isGroupingEqual=function(a,b){var c=DvtNBoxDataUtils.getGroupBehavior(a),d=DvtNBoxDataUtils.getGroupBehavior(b),e=DvtNBoxDataUtils.getNodeCount(a),g=DvtNBoxDataUtils.getNodeCount(b),h=!1;if(c==d&&e==g)for(h=!0,c=0;c<e;c++)if(d=DvtNBoxDataUtils.getNodeGroupId(DvtNBoxDataUtils.getNode(a,c)),g=DvtNBoxDataUtils.getNodeGroupId(DvtNBoxDataUtils.getNode(b,c)),d!=g){h=!1;break}return h};
DvtNBoxCategoryNodeRenderer.isMaximizeEqual=function(a,b){var c=DvtNBoxDataUtils.getMaximizedRow(a),d=DvtNBoxDataUtils.getMaximizedColumn(a),e=DvtNBoxDataUtils.getMaximizedRow(b),g=DvtNBoxDataUtils.getMaximizedColumn(b);return c==e&&d==g};DvtNBoxCategoryNodeRenderer._addAccessibilityAttributes=function(a,b){b.setAriaRole("img");if(!DvtAgent.deferAriaCreation()){var c=b.getAriaLabel();c&&b.setAriaProperty(DvtNBoxConstants.LABEL,c)}};var DvtNBoxDrawerRenderer={};
DvtObj.createSubclass(DvtNBoxDrawerRenderer,DvtObj,"DvtNBoxDrawerRenderer");DvtNBoxDrawerRenderer.render=function(a,b,c,d){d=DvtNBoxDrawerRenderer.getDrawerBounds(a,b,d);b.__drawerBounds=d;c.setTranslate(d.x,d.y);d=new DvtKeyboardFocusEffect(a.getCtx(),c,new DvtRectangle(-1,-1,d.w+2,d.h+2));DvtNBoxDataUtils.setDisplayable(a,b,d,"focusEffect");DvtNBoxDrawerRenderer._renderHeader(a,b,c);DvtNBoxDrawerRenderer._renderBody(a,b,c);DvtNBoxDrawerRenderer._addAccessibilityAttributes(a,b,c)};
DvtNBoxDrawerRenderer._renderHeader=function(a,b,c){var d=a.getOptions(),e=d.__layout.drawerButtonGap,g=d.__layout.drawerStartGap,h=d.__layout.drawerLabelGap,k=d.__layout.drawerCountHorizontalGap,m=d.__layout.drawerCountVerticalGap,n=d.__layout.drawerHeaderHeight,t=d.__layout.nodeIndicatorGap,u=d.__layout.nodeSwatchSize,v=DvtAgent.isRightToLeft(a.getCtx()),w=DvtNBoxDataUtils.getCategoryNode(a,b[DvtNBoxConstants.ID]),x=w.nodeIndices.length;b=b.__drawerBounds;var y=DvtNBoxStyleUtils.getDrawerBorderRadius(a),
z=DvtNBoxStyleUtils.getDrawerBorderColor(a),y=DvtPathUtils.roundedRectangle(0,0,b.w,n,y,y,0,0),y=new DvtPath(a.getCtx(),y);y.setSolidStroke(z);z=DvtNBoxStyleUtils.getDrawerHeaderBackground(a);DvtNBoxRenderer.setFill(y,z);c.addChild(y);var A=d._resources.close_ena,y=d._resources.close_ovr,B=d._resources.close_dwn,d=A.width,z=A.height,A=new DvtImage(a.getCtx(),A.src,0,0,A.width,A.height),y=new DvtImage(a.getCtx(),y.src,0,0,y.width,y.height),B=new DvtImage(a.getCtx(),B.src,0,0,B.width,B.height),y=new DvtButton(a.getCtx(),
A,y,B,null,null,c.closeDrawer,c);y.setTranslate(v?e:b.w-e-d,n/2-z/2);c.addChild(y);var z=DvtNBoxStyleUtils.getCategoryNodeColor(a,w),y=DvtColorUtils.getContrastingTextColor(z),A=(B=DvtNBoxStyleUtils.getCategoryNodeIndicatorColor(a,w))?DvtColorUtils.getContrastingTextColor(B):y,C=DvtNBoxStyleUtils.getStyledCategoryIndicatorIcon(a,w),D=u,F=1;if(C)var E=C[DvtNBoxConstants.WIDTH],F=u/C[DvtNBoxConstants.HEIGHT],D=F*E,A=C[DvtNBoxConstants.COLOR]?C[DvtNBoxConstants.COLOR]:A;var H=DvtNBoxStyleUtils.getDrawerCountBorderRadius(a),
E=v?DvtOutputText.H_ALIGN_RIGHT:DvtOutputText.H_ALIGN_LEFT,x=DvtNBoxRenderer.createText(a.getCtx(),""+x,DvtNBoxStyleUtils.getDrawerCountLabelStyle(a),E,DvtOutputText.V_ALIGN_MIDDLE),I=x.measureDimensions(),m=I.h+2*m,D=C?D+2*t:B?u:0,I=I.w+2*k,t=D+I,u=DvtPathUtils.roundedRectangle(0,0,t,m,H,H,H,H),u=new DvtPath(a.getCtx(),u);u.setSolidFill(z);c.addChild(u);var M=v?I:0;0<D&&(B&&(H=DvtPathUtils.roundedRectangle(M,0,D,m,v?0:H,v?H:0,v?H:0,v?0:H),H=new DvtPath(a.getCtx(),H),H.setSolidFill(B),u.addChild(H)),
C&&(F=new DvtSimpleMarker(a.getCtx(),C[DvtNBoxConstants.SHAPE],DvtCSSStyle.SKIN_ALTA,M+D/2,m/2,C[DvtNBoxConstants.WIDTH]*F,C[DvtNBoxConstants.HEIGHT]*F,null),C[DvtNBoxConstants.PATTERN]&&"none"!=C[DvtNBoxConstants.PATTERN]?F.setFill(new DvtPatternFill(C[DvtNBoxConstants.PATTERN],A,B?B:z)):F.setSolidFill(A),u.addChild(F)));u.addChild(x);x.setSolidFill(y);DvtNBoxRenderer.positionText(x,v?I-k:D+k,m/2);k=DvtNBoxDataUtils.getDisplayable(a,w).getLabel();a=DvtNBoxRenderer.createText(a.getCtx(),k,DvtNBoxStyleUtils.getDrawerLabelStyle(a),
E,DvtOutputText.V_ALIGN_MIDDLE);k=0;DvtTextUtils.fitText(a,b.w-g-h-t-e-d,n,c)&&(DvtNBoxRenderer.positionText(a,v?b.w-g:g,n/2),k=a.measureDimensions().w+h);u.setTranslate(v?b.w-g-t-k:g+k,(n-m)/2)};
DvtNBoxDrawerRenderer._renderBody=function(a,b,c){var d=a.getOptions(),e=d.__layout.gridGap,g=d.__layout.drawerHeaderHeight,h=b.__drawerBounds,d=DvtAgent.isRightToLeft(a.getCtx()),k=DvtNBoxStyleUtils.getDrawerBorderRadius(a),m=DvtNBoxStyleUtils.getDrawerBorderColor(a),k=DvtPathUtils.roundedRectangle(0,g,h.w,h.h-g,0,0,k,k),k=new DvtPath(a.getCtx(),k);DvtNBoxRenderer.setFill(k,DvtNBoxStyleUtils.getDrawerBackground(a));k.setSolidStroke(m);c.addChild(k);DvtNBoxDataUtils.setDisplayable(a,b,k,"background");
b.__childArea=new DvtRectangle(e,g+e,h.w-2*e,h.h-g-2*e);h=new DvtSimpleScrollableContainer(a.getCtx(),h.w,h.h-g);h.setTranslate(0,g);c.addChild(h);c.setChildContainer(h);c=DvtNBoxNodeRenderer.calculateNodeDrawerLayout(a,b);var g=c.indicatorSectionWidth+c.iconSectionWidth+c.labelSectionWidth+e,h=c.nodeHeight+e,m=0,n=["normal"],k=DvtNBoxStyleUtils.getFadedNodeAlpha(a),t=DvtNBoxDataUtils.getHighlightedItems(a),u={};if(t){for(n=0;n<t.length;n++)u[t[n][DvtNBoxConstants.ID]]=!0;n=["highlighted","unhighlighted"]}for(var t=
DvtNBoxDataUtils.getDisplayable(a,b).getChildContainer(),v=DvtNBoxDataUtils.getCategoryNode(a,b[DvtNBoxConstants.ID]),w=v.nodeIndices.length,x=0;x<n.length;x++)for(var y=0;y<w;y++){var z=DvtNBoxDataUtils.getNode(a,v.nodeIndices[y]);if(("normal"==n[x]||"highlighted"==n[x]&&u[z[DvtNBoxConstants.ID]]||"unhighlighted"==n[x]&&!u[z[DvtNBoxConstants.ID]])&&0!=c.drawerLayout[DvtNBoxConstants.COLUMNS]&&0!=c.drawerLayout[DvtNBoxConstants.ROWS]){var A=DvtNBoxNode.newInstance(a,z),B=b.__childArea.x+(b.__childArea.w-
c.drawerLayout[DvtNBoxConstants.COLUMNS]*g+e)/2,C=e,D=m%c.drawerLayout[DvtNBoxConstants.COLUMNS];d&&(D=c.drawerLayout[DvtNBoxConstants.COLUMNS]-D-1);A.setTranslate(B+g*D,C+h*Math.floor(m/c.drawerLayout[DvtNBoxConstants.COLUMNS]));m++;A.render(t.getScrollingPane(),c);"unhighlighted"==n[x]&&A.setAlpha(k);if(A=0<y?DvtNBoxDataUtils.getNode(a,v.nodeIndices[y-1]):null)z.__prev=A,A.__next=z}}t.prepareContentPane()};
DvtNBoxDrawerRenderer.getDrawerBounds=function(a,b,c){var d=a.getOptions(),e=d.__layout.gridGap,d=d.__layout.__cellLayout,g=new DvtRectangle(c.x+e/2,c.y+e/2,c.w-e,c.h-e);DvtNBoxDataUtils.getGroupBehavior(a)==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL&&(b=parseInt(b.id.substring(0,b[DvtNBoxConstants.ID].indexOf(":"))),DvtNBoxDataUtils.isCellMaximized(a,b)&&(g=DvtNBoxDataUtils.getCell(a,b),b=DvtNBoxDataUtils.getRowIndex(a,g[DvtNBoxConstants.ROW]),g=DvtNBoxDataUtils.getColumnIndex(a,g[DvtNBoxConstants.COLUMN]),
a=DvtNBoxCellRenderer.getCellDimensions(a,b,g,d,c),g=new DvtRectangle(a.x+e/2,a.y+e/2+d.headerSize,a.w-e,a.h-d.headerSize-e)));return g};DvtNBoxDrawerRenderer.animateUpdate=function(a,b,c){console.log("********************* DvtNBoxDrawerRenderer.animateUpdate *********************")};
DvtNBoxDrawerRenderer.animateDelete=function(a,b){var c=DvtNBoxDataAnimationHandler.UPDATE,d=a.getNewNBox(),e=b.getData().__drawerBounds,g=b.getData()[DvtNBoxConstants.ID],h=DvtNBoxDataUtils.getCategoryNode(d,g);if(h){var g=DvtNBoxCategoryNodeRenderer.getSideLength(h),k=g/e.w,e=g/e.h;if(h=DvtNBoxDataUtils.getDisplayable(d,h))h=DvtNBoxRenderer.getGlobalMatrix(h),g=new DvtMatrix(k,0,0,e,h.getTx()-g/2,h.getTy()-g/2),k=new DvtCustomAnimation(d.getCtx(),b,a.getAnimationDuration()),k.getAnimator().addProp(DvtAnimator.TYPE_MATRIX,
b,b.getMatrix,b.setMatrix,g),a.add(k,c)}d.getDeleteContainer().addChild(b);d=new DvtAnimFadeOut(d.getCtx(),b,a.getAnimationDuration());a.add(d,c)};
DvtNBoxDrawerRenderer.animateInsert=function(a,b){var c=DvtNBoxDataAnimationHandler.UPDATE,d=a.getNewNBox(),e=b.getData().__drawerBounds,g=b.getData()[DvtNBoxConstants.ID],h=DvtNBoxDataUtils.getCategoryNode(d,g);if(h){var g=DvtNBoxCategoryNodeRenderer.getSideLength(h),k=g/e.w,e=g/e.h;if(h=DvtNBoxDataUtils.getDisplayable(d,h)){h=DvtNBoxRenderer.getGlobalMatrix(h);g=new DvtMatrix(k,0,0,e,h.getTx()-g/2,h.getTy()-g/2);k=new DvtCustomAnimation(d.getCtx(),b,a.getAnimationDuration());k.getAnimator().addProp(DvtAnimator.TYPE_MATRIX,
b,b.getMatrix,b.setMatrix,b.getMatrix());var m=b.getParent();d.addChild(b);DvtPlayable.appendOnEnd(k,function(){m.addChild(b)});b.setMatrix(g);a.add(k,c)}}b.setAlpha(0);d=new DvtAnimFadeIn(d.getCtx(),b,a.getAnimationDuration());a.add(d,c)};DvtNBoxDrawerRenderer._addAccessibilityAttributes=function(a,b,c){a=DvtAgent.isTouchDevice()?DvtNBoxDataUtils.getDisplayable(a,b,"background"):c;a.setAriaRole("img");DvtAgent.deferAriaCreation()||(c=c.getAriaLabel())&&a.setAriaProperty(DvtNBoxConstants.LABEL,c)};
var DvtNBoxDataUtils={};DvtObj.createSubclass(DvtNBoxDataUtils,DvtObj,"DvtNBoxDataUtils");
DvtNBoxDataUtils.processDataObject=function(a){var b=a.getOptions(),c=b[DvtNBoxConstants.CELLS],d={};if(c)for(var e=0;e<c.length;e++){var g=c[e],h=g[DvtNBoxConstants.ROW];d[h]||(d[h]={});var k=g[DvtNBoxConstants.COLUMN];d[h][k]=g}for(var g=[],e={},c={},m=0;m<DvtNBoxDataUtils.getRowCount(a);m++)h=DvtNBoxDataUtils.getRow(a,m),e[h[DvtNBoxConstants.ID]]=m;b.__rowMap=e;for(var n=0;n<DvtNBoxDataUtils.getColumnCount(a);n++)k=DvtNBoxDataUtils.getColumn(a,n),c[k[DvtNBoxConstants.ID]]=n;b.__columnMap=c;for(m=
0;m<DvtNBoxDataUtils.getRowCount(a);m++)for(h=DvtNBoxDataUtils.getRow(a,m),h=h[DvtNBoxConstants.ID],n=0;n<DvtNBoxDataUtils.getColumnCount(a);n++)k=DvtNBoxDataUtils.getColumn(a,n),k=k[DvtNBoxConstants.ID],d[h]&&d[h][k]?g.push(d[h][k]):g.push({row:h,column:k});b[DvtNBoxConstants.CELLS]=g;d={};h=!1;for(k=0;k<DvtNBoxDataUtils.getNodeCount(a);k++)g=DvtNBoxDataUtils.getNode(a,k),d[g[DvtNBoxConstants.ID]]=k,!h&&(g[DvtNBoxConstants.GROUP_CATEGORY]||g._groupCategories||g._groupLabels)&&(h=!0);b.__nodeMap=
d;b.__grouping="none"!=b[DvtNBoxConstants.GROUP_BEHAVIOR]?h:!1;DvtNBoxDataUtils.getGrouping(a)&&DvtNBoxDataUtils.getGroupBehavior(a)==DvtNBoxConstants.GROUP_BEHAVIOR_ACROSS_CELLS&&(b[DvtNBoxConstants.MAXIMIZED_ROW]=null,DvtNBoxDataUtils.fireSetPropertyEvent(a,DvtNBoxConstants.MAXIMIZED_ROW,null),b[DvtNBoxConstants.MAXIMIZED_COLUMN]=null,DvtNBoxDataUtils.fireSetPropertyEvent(a,DvtNBoxConstants.MAXIMIZED_COLUMN,null));if(b[DvtNBoxConstants.MAXIMIZED_ROW]&&isNaN(e[b[DvtNBoxConstants.MAXIMIZED_ROW]])||
b[DvtNBoxConstants.MAXIMIZED_COLUMN]&&isNaN(c[b[DvtNBoxConstants.MAXIMIZED_COLUMN]]))b[DvtNBoxConstants.MAXIMIZED_ROW]=null,DvtNBoxDataUtils.fireSetPropertyEvent(a,DvtNBoxConstants.MAXIMIZED_ROW,null),b[DvtNBoxConstants.MAXIMIZED_COLUMN]=null,DvtNBoxDataUtils.fireSetPropertyEvent(a,DvtNBoxConstants.MAXIMIZED_COLUMN,null);if((a=b[DvtNBoxConstants.LEGEND])&&a.sections){var t="color iconFill iconShape iconPattern indicatorColor indicatorIconColor indicatorIconShape indicatorIconPattern".split(" ");a.sections=
a.sections.slice(0);a.sections.sort(function(a,b){return DvtArrayUtils.getIndex(t,a.type)-DvtArrayUtils.getIndex(t,b.type)});c=b[DvtNBoxConstants.HIDDEN_CATEGORIES];a.hideAndShowBehavior="on";a.textStyle=b.styleDefaults.__legendDefaults.itemStyle;a.layout={rowGap:2};a.symbolWidth=16;a.symbolHeight=16;for(e=0;e<a.sections.length;e++)for(d=a.sections[e],d.titleStyle=b.styleDefaults.__legendDefaults.sectionStyle,h=0;h<d.items.length;h++)k=d.items[h],k.categoryVisibility=-1!=DvtArrayUtils.getIndex(c,
k.categories&&0<k.categories.length?k.categories[0]:k.id)?"hidden":null,k.indicatorColor&&(k.color=k.indicatorColor),k.color||(k.color=b.styleDefaults.__legendDefaults.markerColor),k.shape&&(k.markerShape=k.shape)}};DvtNBoxDataUtils.getColumnCount=function(a){return a.getOptions()[DvtNBoxConstants.COLUMNS].length};DvtNBoxDataUtils.getRowCount=function(a){return a.getOptions()[DvtNBoxConstants.ROWS].length};
DvtNBoxDataUtils.getColumnLabel=function(a,b){var c=DvtNBoxDataUtils.getColumn(a,DvtNBoxDataUtils.getColumnIndex(a,b));return c&&c[DvtNBoxConstants.LABEL]?c[DvtNBoxConstants.LABEL]:null};DvtNBoxDataUtils.getRowLabel=function(a,b){var c=DvtNBoxDataUtils.getRow(a,DvtNBoxDataUtils.getRowIndex(a,b));return c&&c[DvtNBoxConstants.LABEL]?c[DvtNBoxConstants.LABEL]:null};
DvtNBoxDataUtils.getCellByRowColumn=function(a,b,c){return(b=DvtNBoxDataUtils.getCell(a,DvtNBoxDataUtils.getCellIndexByRowColumn(a,b,c)))?DvtNBoxDataUtils.getDisplayable(a,b):null};DvtNBoxDataUtils.getCellIndexByRowColumn=function(a,b,c){return DvtNBoxDataUtils.getColumnIndex(a,c)+DvtNBoxDataUtils.getRowIndex(a,b)*DvtNBoxDataUtils.getColumnCount(a)};DvtNBoxDataUtils.getColumn=function(a,b){return a.getOptions()[DvtNBoxConstants.COLUMNS][b]};DvtNBoxDataUtils.getRow=function(a,b){return a.getOptions()[DvtNBoxConstants.ROWS][b]};
DvtNBoxDataUtils.getMaximizedRow=function(a){return a.getOptions()[DvtNBoxConstants.MAXIMIZED_ROW]};DvtNBoxDataUtils.getMaximizedColumn=function(a){return a.getOptions()[DvtNBoxConstants.MAXIMIZED_COLUMN]};DvtNBoxDataUtils.getRowIndex=function(a,b){return a.getOptions().__rowMap[b]};DvtNBoxDataUtils.getColumnIndex=function(a,b){return a.getOptions().__columnMap[b]};DvtNBoxDataUtils.getCell=function(a,b){return a.getOptions()[DvtNBoxConstants.CELLS][b]};
DvtNBoxDataUtils.getNodeCount=function(a){return a.getOptions()[DvtNBoxConstants.NODES]?a.getOptions()[DvtNBoxConstants.NODES].length:0};DvtNBoxDataUtils.getNode=function(a,b){return a.getOptions()[DvtNBoxConstants.NODES][b]};DvtNBoxDataUtils.getNodeIndex=function(a,b){return a.getOptions().__nodeMap[b]};
DvtNBoxDataUtils.getCellIndex=function(a,b){var c=DvtNBoxDataUtils.getRowIndex(a,b[DvtNBoxConstants.ROW]),d=DvtNBoxDataUtils.getColumnIndex(a,b[DvtNBoxConstants.COLUMN]),e=DvtNBoxDataUtils.getColumnCount(a);return d+c*e};DvtNBoxDataUtils.getIcon=function(a,b){return b[DvtNBoxConstants.ICON]?DvtNBoxStyleUtils.getStyledIcon(a,b[DvtNBoxConstants.ICON]):null};
DvtNBoxDataUtils.getIndicatorIcon=function(a,b){return b[DvtNBoxConstants.INDICATOR_ICON]?DvtNBoxStyleUtils.getStyledIndicatorIcon(a,b[DvtNBoxConstants.INDICATOR_ICON]):null};DvtNBoxDataUtils.getSelectedItems=function(a){return a.getOptions()[DvtNBoxConstants.SELECTION]};DvtNBoxDataUtils.setSelectedItems=function(a,b){a.getOptions()[DvtNBoxConstants.SELECTION]=b};
DvtNBoxDataUtils.getHighlightedItems=function(a){var b,c=a.getOptions()[DvtNBoxConstants.HIGHLIGHTED_CATEGORIES];if(c&&0<c.length)for(b=[],c=0;c<DvtNBoxDataUtils.getNodeCount(a);c++){var d=DvtNBoxDataUtils.getNode(a,c);DvtNBoxDataUtils.isNodeHighlighted(a,d)&&b.push(d)}return b};DvtNBoxDataUtils.getGrouping=function(a){return a.getOptions().__grouping};DvtNBoxDataUtils.getGroupAttributes=function(a){return a.getOptions()[DvtNBoxConstants.GROUP_ATTRIBUTES]};DvtNBoxDataUtils.getGroupBehavior=function(a){return a.getOptions()[DvtNBoxConstants.GROUP_BEHAVIOR]};
DvtNBoxDataUtils.getNodeGroupId=function(a){return a[DvtNBoxConstants.GROUP_CATEGORY]?a[DvtNBoxConstants.GROUP_CATEGORY]:(a=a._groupCategories)&&0<a.length?a.join(";"):null};DvtNBoxDataUtils.getXPercentage=function(a,b){if(!isNaN(b[DvtNBoxConstants.X_PERCENTAGE]))return b[DvtNBoxConstants.X_PERCENTAGE];var c=DvtNBoxDataUtils.getColumnCount(a);return(DvtNBoxDataUtils.getColumnIndex(a,b[DvtNBoxConstants.COLUMN])+.5)/c};
DvtNBoxDataUtils.getYPercentage=function(a,b){if(!isNaN(b[DvtNBoxConstants.Y_PERCENTAGE]))return b[DvtNBoxConstants.Y_PERCENTAGE];var c=DvtNBoxDataUtils.getRowCount(a);return(DvtNBoxDataUtils.getRowIndex(a,b[DvtNBoxConstants.ROW])+.5)/c};DvtNBoxDataUtils.getOtherThreshold=function(a){return a.getOptions()[DvtNBoxConstants.OTHER_THRESHOLD]};DvtNBoxDataUtils.getOtherColor=function(a){return a.getOptions()[DvtNBoxConstants.OTHER_COLOR]};DvtNBoxDataUtils.getDrawer=function(a){return a.getOptions()[DvtNBoxConstants.DRAWER]};
DvtNBoxDataUtils.getCategoryNode=function(a,b){var c=DvtNBoxDataUtils.getGroupBehavior(a),d=a.getOptions().__groups,e=b;c==DvtNBoxConstants.GROUP_BEHAVIOR_WITHIN_CELL&&(c=b.substring(0,b.indexOf(":")),e=b.substring(b.indexOf(":")+1),d=d[c]);return d?d[e]:null};
DvtNBoxDataUtils.getCategoryNodeLabels=function(a,b){if(b.__labels)return b.__labels;var c=DvtNBoxDataUtils.getNode(a,b.nodeIndices[0]);if(c[DvtNBoxConstants.GROUP_CATEGORY])return b.__labels=[c[DvtNBoxConstants.GROUP_CATEGORY]];b.__labels=[];if(c._groupCategories)for(var d=a.getOptions()._groupLabels,e=0;e<c._groupCategories.length;e++)b.__labels[e]=d&&d[c._groupCategories[e]]?d[c._groupCategories[e]]:c._groupCategories[e];return b.__labels};
DvtNBoxDataUtils.setDisplayable=function(a,b,c,d){a=a.getDisplayables();d=d?"__displayable:"+d:"__displayable";b[d]?a[b[d]]=c:(b[d]=a.length,a.push(c))};DvtNBoxDataUtils.getDisplayable=function(a,b,c){b=b[c?"__displayable:"+c:"__displayable"];a=a.getDisplayables();return null==b?null:a[b]};
DvtNBoxDataUtils.isCellMinimized=function(a,b){var c=DvtNBoxDataUtils.getMaximizedRow(a),d=DvtNBoxDataUtils.getMaximizedColumn(a);if(!c&&!d)return!1;var e=DvtNBoxDataUtils.getCell(a,b),g=e[DvtNBoxConstants.ROW],e=e[DvtNBoxConstants.COLUMN];return c&&d?c!=g||d!=e:c!=g&&d!=e};
DvtNBoxDataUtils.isCellMaximized=function(a,b){var c=DvtNBoxDataUtils.getMaximizedRow(a),d=DvtNBoxDataUtils.getMaximizedColumn(a),e=DvtNBoxDataUtils.getCell(a,b),g=e[DvtNBoxConstants.COLUMN];return c==e[DvtNBoxConstants.ROW]&&d==g};DvtNBoxDataUtils.getLegend=function(a){return a.getOptions()._legend};
DvtNBoxDataUtils.isNodeHidden=function(a,b){var c=a.getOptions();c[DvtNBoxConstants.HIDDEN_CATEGORIES]&&!c.__hiddenMap&&(c.__hiddenMap=DvtArrayUtils.createBooleanMap(c[DvtNBoxConstants.HIDDEN_CATEGORIES]));return DvtArrayUtils.hasAnyMapItem(c.__hiddenMap,b[DvtNBoxConstants.CATEGORIES])};
DvtNBoxDataUtils.isNodeHighlighted=function(a,b){var c=a.getOptions();c[DvtNBoxConstants.HIGHLIGHTED_CATEGORIES]&&!c.__highlightedMap&&(c.__highlightedMap=DvtArrayUtils.createBooleanMap(c[DvtNBoxConstants.HIGHLIGHTED_CATEGORIES]));return"all"==c[DvtNBoxConstants.HIGHLIGHT_MATCH]?DvtArrayUtils.hasAllMapItems(c.__highlightedMap,b[DvtNBoxConstants.CATEGORIES]):DvtArrayUtils.hasAnyMapItem(c.__highlightedMap,b[DvtNBoxConstants.CATEGORIES])};
DvtNBoxDataUtils.getNodeScrollableContainer=function(a,b){if(!b)return null;var c=DvtNBoxDataUtils.getDrawer(a);if(c&&(c=DvtNBoxDataUtils.getDisplayable(a,c)))return c.getChildContainer();c=DvtNBoxDataUtils.getCellIndex(a,b.getData());return DvtNBoxDataUtils.isCellMaximized(a,c)?(c=DvtNBoxDataUtils.getCell(a,c),DvtNBoxDataUtils.getDisplayable(a,c).getChildContainer()):null};DvtNBoxDataUtils.fireSetPropertyEvent=function(a,b,c){var d=new DvtSetPropertyEvent;d.addParam(b,c);a.processEvent(d)};
DvtNBoxDataUtils.getMaximizedCellIndex=function(a){var b=null,c=DvtNBoxDataUtils.getMaximizedRow(a),d=DvtNBoxDataUtils.getMaximizedColumn(a);c&&d&&(b=DvtNBoxDataUtils.getColumnCount(a),b=DvtNBoxDataUtils.getColumnIndex(a,d)+b*DvtNBoxDataUtils.getRowIndex(a,c));return b};
DvtNBoxDataUtils.isDrawerSelected=function(a,b){var c=!1,d=DvtNBoxDataUtils.getSelectedItems(a);if(d){for(var e={},c=0;c<d.length;c++)e[d[c]]=!0;for(var d=b.getData().nodeIndices,c=!0,g=0;g<d.length;g++){var h=DvtNBoxDataUtils.getNode(a,d[g]);if(!e[h[DvtNBoxConstants.ID]]){c=!1;break}}}return c};
DvtNBoxDataUtils.buildAriaDesc=function(a,b,c,d){c=b instanceof DvtNBoxCategoryNode||b instanceof DvtNBoxDrawer?DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"COLON_SEP_LIST",[DvtBundle.getTranslatedString(DvtBundle.NBOX_PREFIX,"GROUP_NODE"),c]):c;var e=[];d?e.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"STATE_SELECTED")):e.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"STATE_UNSELECTED"));b instanceof DvtNBoxCategoryNode?(a=b.getData().nodeIndices.length,e.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,
"STATE_COLLAPSED")),e.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"COLON_SEP_LIST",[DvtBundle.getTranslatedString(DvtBundle.NBOX_PREFIX,"SIZE"),a]))):b instanceof DvtNBoxDrawer&&(a=DvtNBoxDataUtils.getCategoryNode(a,b.getData()[DvtNBoxConstants.ID]).nodeIndices.length,e.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"STATE_EXPANDED")),e.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"COLON_SEP_LIST",[DvtBundle.getTranslatedString(DvtBundle.NBOX_PREFIX,"SIZE"),a])));
return DvtDisplayable.generateAriaLabel(c,e)};DvtNBoxDataUtils.getFirstNavigableNode=function(a,b){var c=null;if(0<b.getNumChildren()){var c=b.getChildAt(0),d;do c instanceof DvtNBoxNode?d=c.getData().__prev:c instanceof DvtNBoxNodeOverflow&&(d=c.__prev),c=d?DvtNBoxDataUtils.getDisplayable(a,d):c;while(d)}return c};
DvtNBoxDataUtils.getLastNavigableNode=function(a,b){var c=null,d=b.getNumChildren();if(0<d){c=b.getChildAt(d-1);do c=(d=c instanceof DvtNBoxNode?c.getData().__next:null)?DvtNBoxDataUtils.getDisplayable(a,d):c;while(d)}return c};
DvtNBoxDataUtils.getNextNavigableNode=function(a,b,c){c=c.keyCode==DvtKeyboardEvent.RIGHT_ARROW||c.keyCode==DvtKeyboardEvent.DOWN_ARROW?!0:!1;var d;b instanceof DvtNBoxNode?d=c?b.getData().__next:b.getData().__prev:b instanceof DvtNBoxNodeOverflow&&(d=c?null:b.__prev);return d?DvtNBoxDataUtils.getDisplayable(a,d):b};var DvtNBoxStyleUtils={};DvtObj.createSubclass(DvtNBoxStyleUtils,DvtObj,"DvtNBoxStyleUtils");
DvtNBoxStyleUtils.getAnimationOnDisplay=function(a){a=a.getOptions()[DvtNBoxConstants.ANIMATION_ON_DISPLAY];"auto"==a&&(a=DvtBlackBoxAnimationHandler.ALPHA_FADE);return a};DvtNBoxStyleUtils.getAnimationOnDataChange=function(a){return a.getOptions()[DvtNBoxConstants.ANIMATION_ON_DATA_CHANGE]};DvtNBoxStyleUtils.getAnimationDuration=function(a){return DvtStyleUtils.getTimeMilliseconds(a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.ANIMATION_DURATION])/1E3};
DvtNBoxStyleUtils.getColumnLabelStyle=function(a,b){var c=a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.COLUMN_LABEL_STYLE],d=DvtNBoxDataUtils.getColumn(a,b);return d[DvtNBoxConstants.LABEL_STYLE]?DvtJSONUtils.merge(new DvtCSSStyle(d[DvtNBoxConstants.LABEL_STYLE]),c):c};
DvtNBoxStyleUtils.getRowLabelStyle=function(a,b){var c=a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.ROW_LABEL_STYLE],d=DvtNBoxDataUtils.getRow(a,b);return d[DvtNBoxConstants.LABEL_STYLE]?DvtJSONUtils.merge(new DvtCSSStyle(d[DvtNBoxConstants.LABEL_STYLE]),c):c};
DvtNBoxStyleUtils.getCellStyle=function(a,b){var c=a.getOptions(),d=DvtNBoxDataUtils.isCellMinimized(a,b)?"minimizedStyle":DvtNBoxConstants.STYLE,c=c[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.CELL_DEFAULTS][d],e=DvtNBoxDataUtils.getCell(a,b);return e[d]?DvtJSONUtils.merge(new DvtCSSStyle(e[d]),c):c};
DvtNBoxStyleUtils.getCellLabelStyle=function(a,b){var c=a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.CELL_DEFAULTS][DvtNBoxConstants.LABEL_STYLE],d=DvtNBoxDataUtils.getCell(a,b);return d[DvtNBoxConstants.LABEL_STYLE]?DvtJSONUtils.merge(new DvtCSSStyle(d[DvtNBoxConstants.LABEL_STYLE]),c):c};DvtNBoxStyleUtils.getCellShowCount=function(a,b){return b[DvtNBoxConstants.SHOW_COUNT]?b[DvtNBoxConstants.SHOW_COUNT]:a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.CELL_DEFAULTS][DvtNBoxConstants.SHOW_COUNT]};
DvtNBoxStyleUtils.getCellCountLabelStyle=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.CELL_DEFAULTS].countLabelStyle};DvtNBoxStyleUtils.getCellBodyCountLabelStyle=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.CELL_DEFAULTS].bodyCountLabelStyle};DvtNBoxStyleUtils.getCellDropTargetStyle=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.CELL_DEFAULTS].dropTargetStyle};
DvtNBoxStyleUtils.getNodeLabelStyle=function(a,b){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.LABEL_STYLE]};DvtNBoxStyleUtils.getNodeSecondaryLabelStyle=function(a,b){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.SECONDARY_LABEL_STYLE]};DvtNBoxStyleUtils.getNodeColor=function(a,b){return b[DvtNBoxConstants.COLOR]?b[DvtNBoxConstants.COLOR]:a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.COLOR]};
DvtNBoxStyleUtils.getNodeBorderColor=function(a,b){var c=b[DvtNBoxConstants.BORDER_COLOR]?b[DvtNBoxConstants.BORDER_COLOR]:a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.BORDER_COLOR];return c?c:null};DvtNBoxStyleUtils.getNodeBorderWidth=function(a,b){var c=b[DvtNBoxConstants.BORDER_WIDTH]?b[DvtNBoxConstants.BORDER_WIDTH]:a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.BORDER_WIDTH];return c?c:null};
DvtNBoxStyleUtils.getNodeIndicatorColor=function(a,b){return b[DvtNBoxConstants.INDICATOR_COLOR]?b[DvtNBoxConstants.INDICATOR_COLOR]:a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.INDICATOR_COLOR]};DvtNBoxStyleUtils.getStyledIcon=function(a,b){return DvtJSONUtils.merge(b,a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.ICON_DEFAULTS])};
DvtNBoxStyleUtils.getStyledIndicatorIcon=function(a,b){return DvtJSONUtils.merge(b,a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.INDICATOR_ICON_DEFAULTS])};DvtNBoxStyleUtils.getFadedNodeAlpha=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS].alphaFade};DvtNBoxStyleUtils.getScrollbarStyleMap=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS].__scrollbar};
DvtNBoxStyleUtils.getCategoryNodeColor=function(a,b){if("none"==DvtNBoxDataUtils.getGroupBehavior(a)||DvtNBoxDataUtils.getGroupAttributes(a)&&-1==DvtNBoxDataUtils.getGroupAttributes(a).indexOf("color"))return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.COLOR];if(b.otherNode)return DvtNBoxDataUtils.getOtherColor(a);var c=b.nodeIndices,d=DvtNBoxDataUtils.getNode(a,c[0])[DvtNBoxConstants.COLOR];if(!d)return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.COLOR];
for(var e=1;e<c.length;e++){var g=DvtNBoxDataUtils.getNode(a,c[e]);if(d!=g[DvtNBoxConstants.COLOR])return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.COLOR]}return d};
DvtNBoxStyleUtils.getCategoryNodeIndicatorColor=function(a,b){if("none"==DvtNBoxDataUtils.getGroupBehavior(a)||DvtNBoxDataUtils.getGroupAttributes(a)&&-1==DvtNBoxDataUtils.getGroupAttributes(a).indexOf("indicatorColor"))return null;var c=b.nodeIndices,d=DvtNBoxDataUtils.getNode(a,c[0])[DvtNBoxConstants.INDICATOR_COLOR];if(!d)return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.INDICATOR_COLOR];for(var e=1;e<c.length;e++){var g=DvtNBoxDataUtils.getNode(a,
c[e]);if(d!=g[DvtNBoxConstants.INDICATOR_COLOR])return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.INDICATOR_COLOR]}return d};
DvtNBoxStyleUtils.getStyledCategoryIndicatorIcon=function(a,b){if("none"==DvtNBoxDataUtils.getGroupBehavior(a)||DvtNBoxDataUtils.getGroupAttributes(a)&&-1==DvtNBoxDataUtils.getGroupAttributes(a).indexOf("indicatorIconShape")&&-1==DvtNBoxDataUtils.getGroupAttributes(a).indexOf("indicatorIconColor")&&-1==DvtNBoxDataUtils.getGroupAttributes(a).indexOf("indicatorIconPattern"))return null;var c={},d=b.nodeIndices,e=DvtNBoxDataUtils.getNode(a,d[0])[DvtNBoxConstants.INDICATOR_ICON];if(!e)return null;var g=
!0;if(!DvtNBoxDataUtils.getGroupAttributes(a)||-1!=DvtNBoxDataUtils.getGroupAttributes(a).indexOf("indicatorIconShape")){for(var h=e[DvtNBoxConstants.SHAPE],k=1;k<d.length;k++){var m=DvtNBoxDataUtils.getNode(a,d[k])[DvtNBoxConstants.INDICATOR_ICON];m&&h!=m[DvtNBoxConstants.SHAPE]&&(g=!1)}c[DvtNBoxConstants.SHAPE]=g?h:a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.INDICATOR_ICON_DEFAULTS][DvtNBoxConstants.SHAPE]}g=!0;if(!DvtNBoxDataUtils.getGroupAttributes(a)||
-1!=DvtNBoxDataUtils.getGroupAttributes(a).indexOf("indicatorIconColor")){h=e[DvtNBoxConstants.COLOR];for(k=1;k<d.length;k++)(m=DvtNBoxDataUtils.getNode(a,d[k])[DvtNBoxConstants.INDICATOR_ICON])&&h!=m[DvtNBoxConstants.COLOR]&&(g=!1);c[DvtNBoxConstants.COLOR]=g?h:a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.INDICATOR_ICON_DEFAULTS][DvtNBoxConstants.COLOR]}g=!0;if(!DvtNBoxDataUtils.getGroupAttributes(a)||-1!=DvtNBoxDataUtils.getGroupAttributes(a).indexOf("indicatorIconPattern")){e=
e[DvtNBoxConstants.PATTERN];for(h=1;h<d.length;h++)(m=DvtNBoxDataUtils.getNode(a,d[h])[DvtNBoxConstants.INDICATOR_ICON])&&e!=m[DvtNBoxConstants.PATTERN]&&(g=!1);c[DvtNBoxConstants.PATTERN]=g?e:a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.INDICATOR_ICON_DEFAULTS][DvtNBoxConstants.PATTERN]}return DvtJSONUtils.merge(c,a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.INDICATOR_ICON_DEFAULTS])};
DvtNBoxStyleUtils.getDrawerBackground=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS].__drawerDefaults.background};DvtNBoxStyleUtils.getDrawerHeaderBackground=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS].__drawerDefaults.headerBackground};DvtNBoxStyleUtils.getDrawerBorderColor=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS].__drawerDefaults[DvtNBoxConstants.BORDER_COLOR]};DvtNBoxStyleUtils.getDrawerBorderRadius=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS].__drawerDefaults[DvtNBoxConstants.BORDER_RADIUS]};
DvtNBoxStyleUtils.getDrawerLabelStyle=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS].__drawerDefaults[DvtNBoxConstants.LABEL_STYLE]};DvtNBoxStyleUtils.getDrawerCountLabelStyle=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS].__drawerDefaults.countLabelStyle};DvtNBoxStyleUtils.getDrawerCountBorderRadius=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS].__drawerDefaults.countBorderRadius};DvtNBoxStyleUtils.getCategoryNodeLabelStyle=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS].__categoryNodeDefaults.labelStyle};
DvtNBoxStyleUtils.getNodeBorderRadius=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS][DvtNBoxConstants.BORDER_RADIUS]};DvtNBoxStyleUtils.getNodeHoverColor=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS].hoverColor};DvtNBoxStyleUtils.getNodeSelectionColor=function(a){return a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.NODE_DEFAULTS].selectionColor};
DvtNBoxStyleUtils.getLabelHalign=function(a,b){var c=b[DvtNBoxConstants.LABEL_HALIGN];c||(c=a.getOptions()[DvtNBoxConstants.STYLE_DEFAULTS][DvtNBoxConstants.CELL_DEFAULTS][DvtNBoxConstants.LABEL_HALIGN]);var d=DvtAgent.isRightToLeft(a.getCtx());return"end"==c?d?DvtOutputText.H_ALIGN_LEFT:DvtOutputText.H_ALIGN_RIGHT:"center"==c?DvtOutputText.H_ALIGN_CENTER:d?DvtOutputText.H_ALIGN_RIGHT:DvtOutputText.H_ALIGN_LEFT};