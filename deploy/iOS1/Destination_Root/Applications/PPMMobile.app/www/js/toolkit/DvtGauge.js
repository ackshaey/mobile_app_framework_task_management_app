var DvtGauge=function(){};DvtObj.createSubclass(DvtGauge,DvtBaseComponent,"DvtGauge");DvtGauge._DEFAULT_MIN_VALUE=0;DvtGauge._DEFAULT_MAX_VALUE=100;
DvtGauge.prototype.Init=function(a,b,c,d){DvtGauge.superclass.Init.call(this,a,b,c);this._bStaticRendering=d;this._bStaticRendering||(this._eventManager=this.CreateEventManager(),this._eventManager.addListeners(this),DvtAgent.isTouchDevice()||this._eventManager.setKeyboardHandler(this.CreateKeyboardHandler(this._eventManager)),this.setId("gauge1000"+Math.floor(1E9*Math.random())),this._editingOverlay=new DvtRect(a,0,0),this._editingOverlay.setInvisibleFill(),this.addChild(this._editingOverlay));this._bEditing=
!1;this._oldValue=null};DvtGauge.prototype.SetOptions=function(a){this.Options=a;DvtAgent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none")};
DvtGauge.prototype.render=function(a,b,c){a?this.SetOptions(a):this.Options||this.SetOptions(null);this.Options.thresholds&&(this.Options.thresholds=this.Options.thresholds.sort(DvtGauge._thresholdComparator));isNaN(b)||isNaN(c)||(this.Width=b,this.Height=c);c=this.__shapes;this.__shapes=[];b=new DvtContainer(this.getCtx());this.addChildAt(b,0);this.Render(b,this.Width,this.Height);this._setAnimation(b,null!=a,c,this.Width,this.Height);this._editingOverlay&&!1===this.Options.readOnly&&(this._editingOverlay.setWidth(this.Width),
this._editingOverlay.setHeight(this.Height));this._bStaticRendering||this.Options.readOnly||(b.setAriaRole("slider"),b.setAriaProperty("valuemin",this.Options.min),b.setAriaProperty("valuemax",this.Options.max),a=DvtGaugeRenderer.getFormattedMetricLabel(this.Options.value,this),b.setAriaProperty("valuenow",a),c=DvtGaugeRenderer.getTooltipString(this),DvtAgent.isTouchDevice()&&(this._container.setAriaProperty("live","assertive"),a!=c&&(c=a+DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER")+
c)),a!=c&&b.setAriaProperty("label",c),this._renderCount=null!=this._renderCount?this._renderCount+1:0,a=this.getId()+"_"+this._renderCount,b.setId(a),this.getCtx().setActiveElement(b),(b=this.__getEventManager())&&b.associate(this._editingOverlay,this.GetLogicalObject(),!0));this.UpdateAriaAttributes()};DvtGauge.prototype.GetLogicalObject=function(){var a=DvtGaugeRenderer.getTooltipString(this),b=DvtGaugeStyleUtils.getColor(this);return new DvtSimpleObjPeer(null,a,b)};
DvtGauge.prototype.Render=function(a,b,c){};
DvtGauge.prototype._setAnimation=function(a,b,c,d,e){this._animation&&this._animation.stop();var g=!1,h=this._bEditing?"none":this.getOptions().animationOnDataChange,k=this._bEditing?"none":this.getOptions().animationOnDisplay,m=DvtStyleUtils.getTimeMilliseconds(this.getOptions().animationDuration)/1E3;if(k||h)d=new DvtRectangle(0,0,d,e),e=this.getCtx(),this._container||"none"===k||null==this.__shapes[0]?this._container&&"none"!=h&&b&&null!=this.__shapes[0]&&((this._animation=DvtBlackBoxAnimationHandler.getCombinedAnimation(e,
h,this._container,a,d,m))?g=!0:this._animation=this.CreateAnimationOnDataChange(c,this.__shapes,k,m)):(this._animation=DvtBlackBoxAnimationHandler.getInAnimation(e,k,a,d,m),this._animation||(this._animation=this.CreateAnimationOnDisplay(this.__shapes,k,m))),g||this.removeChild(this._container),this._animation&&(this._animation.play(),this._animation.setOnEnd(this._onAnimationEnd,this)),g&&(this._oldContainer=this._container),this._container=a};
DvtGauge.prototype.CreateAnimationOnDisplay=function(a,b,c){return null};DvtGauge.prototype.CreateAnimationOnDataChange=function(a,b,c,d){c=[];for(var e=0;e<a.length;e++){var g=b[e],h=a[e].getAnimationParams(),k=g.getAnimationParams();g.setAnimationParams(h);h=new DvtCustomAnimation(this.getCtx(),g,d);h.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,g,g.getAnimationParams,g.setAnimationParams,k);c.push(h)}return new DvtParallelPlayable(this.getCtx(),c)};
DvtGauge.prototype.GetValueAt=function(a,b){return null};DvtGauge.prototype.renderUpdate=function(){this.render();this.UpdateAriaLiveValue(this._container)};DvtGauge.prototype.UpdateAriaLiveValue=function(a,b){b=DvtGaugeRenderer.getFormattedMetricLabel(b?b:this.Options.value,this);a.setAriaProperty("valuenow",b);DvtAgent.isTouchDevice()&&a.setAriaProperty("label",b)};
DvtGauge.prototype._onAnimationEnd=function(){this._oldContainer&&(this.removeChild(this._oldContainer),this._oldContainer=null);this._animation=null};DvtGauge.prototype.__getEventManager=function(){return this._eventManager};DvtGauge.prototype.__processValueChangeStart=function(a,b){this._bEditing=!0;this._oldValue=this.Options.value;this.__processValueChangeMove(a,b)};
DvtGauge.prototype.__processValueChangeMove=function(a,b){null!=this._oldValue&&(this.Options.value=DvtGaugeRenderer.adjustForStep(this.Options,this.GetValueAt(a,b)),this.renderUpdate(),this.__dispatchEvent(new DvtValueChangeEvent(this._oldValue,this.Options.value,!1)))};
DvtGauge.prototype.__processValueChangeEnd=function(a,b){this.__processValueChangeMove(a,b);if(DvtAgent.isTouchDevice()){var c=DvtGaugeRenderer.getFormattedMetricLabel(this.Options.value,this),d=DvtGaugeRenderer.getTooltipString(this);c!=d&&(d=c+DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER")+d,this._container.setAriaProperty("label",d))}this.__dispatchEvent(new DvtValueChangeEvent(this._oldValue,this.Options.value,!0));this._bEditing=!1;this._oldValue=null};
DvtGauge.prototype.__increaseValue=function(){if(!this.Options.readOnly){var a=this.Options.value;this.Options.value=null!=this.Options.step?DvtGaugeRenderer.adjustForStep(this.Options,this.Options.value+this.Options.step):Math.min(Math.max(this.Options.value+(this.Options.max-this.Options.min)/100,this.Options.min),this.Options.max);this.render();this.__dispatchEvent(new DvtValueChangeEvent(a,this.Options.value,!0))}};
DvtGauge.prototype.__decreaseValue=function(){if(!this.Options.readOnly){var a=this.Options.value;this.Options.value=null!=this.Options.step?DvtGaugeRenderer.adjustForStep(this.Options,this.Options.value-this.Options.step):Math.min(Math.max(this.Options.value-(this.Options.max-this.Options.min)/100,this.Options.min),this.Options.max);this.render();this.__dispatchEvent(new DvtValueChangeEvent(a,this.Options.value,!0))}};DvtGauge.prototype.CreateEventManager=function(){return new DvtGaugeEventManager(this)};
DvtGauge._thresholdComparator=function(a,b){return null!=a.max&&null!=b.max?a.max-b.max:a.max?-Infinity:Infinity};DvtGauge.prototype.getAutomation=function(){return new DvtGaugeAutomation(this)};DvtGauge.prototype.CreateKeyboardHandler=function(a){return new DvtGaugeKeyboardHandler(a,this)};DvtGauge.prototype.GetComponentDescription=function(){return DvtBundle.getTranslation(this.getOptions(),"componentName",DvtBundle.UTIL_PREFIX,"GAUGE")};
DvtGauge.prototype.UpdateAriaAttributes=function(){if(!this._bStaticRendering){var a=DvtGaugeRenderer.getTooltipString(this);this.IsParentRoot()?this.Options.readOnly?(this.getCtx().setAriaRole("img"),this.getCtx().setAriaLabel(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"COLON_SEP_LIST",[DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DATA_VISUALIZATION"),DvtDisplayable.generateAriaLabel(DvtStringUtils.processAriaLabel(this.GetComponentDescription()),a?[a]:null)]))):(this.getCtx().setAriaRole("application"),
this.getCtx().setAriaLabel(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"COLON_SEP_LIST",[DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DATA_VISUALIZATION"),DvtStringUtils.processAriaLabel(this.GetComponentDescription())]))):this.Options.readOnly&&(this.setAriaRole("img"),this.setAriaProperty("label",DvtDisplayable.generateAriaLabel(DvtStringUtils.processAriaLabel(this.GetComponentDescription()),a?[a]:null)))}};var DvtGaugeAutomation=function(a){this._gauge=a};
DvtObj.createSubclass(DvtGaugeAutomation,DvtAutomation,"DvtGaugeAutomation");DvtGaugeAutomation.prototype.getValue=function(){return this._gauge.getOptions().value};DvtGaugeAutomation.prototype.getMetricLabel=function(){return DvtGaugeRenderer.getFormattedMetricLabel(this.getValue(),this._gauge)};DvtBundle.addDefaultStrings(DvtBundle.GAUGE_PREFIX,{});var DvtGaugeDefaults=function(){};DvtObj.createSubclass(DvtGaugeDefaults,DvtBaseComponentDefaults,"DvtGaugeDefaults");
DvtGaugeDefaults.SKIN_ALTA={skin:DvtCSSStyle.SKIN_ALTA,color:"#393737",metricLabel:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;")},_thresholdColors:["#ed6647","#fad55c","#68c182"]};
DvtGaugeDefaults.VERSION_1={skin:DvtCSSStyle.SKIN_SKYROS,min:0,max:100,color:"#313842",borderColor:null,visualEffects:"auto",emptyText:null,animationOnDataChange:"none",animationOnDisplay:"none",animationDuration:500,readOnly:"true",metricLabel:{rendered:"off",scaling:"auto",style:new DvtCSSStyle("font-family: tahoma, sans-serif;"),textType:"number"},_thresholdColors:["#D62800","#FFCF21","#84AE31"],__layout:{outerGap:1,labelGap:5}};
DvtGaugeDefaults.prototype.Init=function(a){a={skyros:DvtJSONUtils.merge(a.skyros,DvtGaugeDefaults.VERSION_1),alta:DvtJSONUtils.merge(a.alta,DvtGaugeDefaults.SKIN_ALTA)};DvtGaugeDefaults.superclass.Init.call(this,a)};DvtGaugeDefaults.isSkyrosSkin=function(a){return a.getOptions().skin==DvtCSSStyle.SKIN_SKYROS};var DvtGaugeDataUtils={};DvtObj.createSubclass(DvtGaugeDataUtils,DvtObj,"DvtGaugeDataUtils");
DvtGaugeDataUtils.hasData=function(a){a=a.getOptions();return!a||isNaN(a.value)||null===a.value?!1:!0};DvtGaugeDataUtils.getValueThresholdIndex=function(a,b){var c=a.getOptions(),d=null!=b?b:c.value,c=c.thresholds;if(!c)return-1;for(var e=0;e<c.length;e++)if(d<=c[e].max)return e;return c.length-1};DvtGaugeDataUtils.getThreshold=function(a,b){var c=a.getOptions().thresholds;return c&&0<=b&&b<c.length?c[b]:null};
DvtGaugeDataUtils.getReferenceObject=function(a,b){var c=a.getOptions().referenceLines;return c&&0<=b&&b<c.length?c[b]:null};var DvtGaugeEventManager=function(a){this.Init(a.getCtx(),a.__dispatchEvent,a);this._gauge=a;this.isEditing=!1};DvtObj.createSubclass(DvtGaugeEventManager,DvtEventManager,"DvtGaugeEventManager");
DvtGaugeEventManager.prototype.OnMouseDown=function(a){!1===this._gauge.getOptions().readOnly?(this.isEditing=!0,this.hideTooltip(),a=this.GetRelativePosition(a.pageX,a.pageY),this._gauge.__processValueChangeStart(a.x,a.y)):DvtGaugeEventManager.superclass.OnMouseDown.call(this,a)};
DvtGaugeEventManager.prototype.OnMouseUp=function(a){this.isEditing?(this.isEditing=!1,a=this.GetRelativePosition(a.pageX,a.pageY),this._gauge.__processValueChangeEnd(a.x,a.y)):DvtGaugeEventManager.superclass.OnMouseUp.call(this,a)};
DvtGaugeEventManager.prototype.OnMouseMove=function(a){if(this.isEditing){var b=this.GetRelativePosition(a.pageX,a.pageY);this._gauge.__processValueChangeMove(b.x,b.y)}!this.IsShowingTooltipWhileEditing()&&this.isEditing||DvtGaugeEventManager.superclass.OnMouseMove.call(this,a)};DvtGaugeEventManager.prototype.IsShowingTooltipWhileEditing=function(){return!1};
DvtGaugeEventManager.prototype.PreEventBubble=function(a){if(DvtTouchEvent.TOUCHSTART===a.type&&!1===this._gauge.getOptions().readOnly){this.isEditing=!0;var b=this.GetRelativePosition(a.touches[0].pageX,a.touches[0].pageY);this._gauge.__processValueChangeStart(b.x,b.y);a.preventDefault()}else DvtTouchEvent.TOUCHMOVE===a.type&&this.isEditing?(b=this.GetRelativePosition(a.touches[0].pageX,a.touches[0].pageY),this._gauge.__processValueChangeMove(b.x,b.y),a.preventDefault()):DvtTouchEvent.TOUCHEND===
a.type&&this.isEditing&&(this.isEditing=!1,b=this.GetRelativePosition(a.changedTouches[0].pageX,a.changedTouches[0].pageY),this._gauge.__processValueChangeEnd(b.x,b.y),a.preventDefault());this.isEditing&&!this.IsShowingTooltipWhileEditing()||DvtGaugeEventManager.superclass.PreEventBubble.call(this,a)};DvtGaugeEventManager.prototype.GetRelativePosition=function(a,b){var c=this.getCtx().pageToStageCoords(a,b);return this._gauge.stageToLocal(c)};
DvtGaugeEventManager.prototype.UpdateActiveElement=function(a,b){};var DvtGaugeKeyboardHandler=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtGaugeKeyboardHandler,DvtKeyboardHandler,"DvtGaugeKeyboardHandler");DvtGaugeKeyboardHandler.prototype.Init=function(a,b){DvtGaugeKeyboardHandler.superclass.Init.call(this,a);this._gauge=b};
DvtGaugeKeyboardHandler.prototype.processKeyDown=function(a){var b=a.keyCode,c=DvtAgent.isRightToLeft(this._gauge.getCtx());if(b==DvtKeyboardEvent.UP_ARROW||b==(c?DvtKeyboardEvent.LEFT_ARROW:DvtKeyboardEvent.RIGHT_ARROW))this._gauge.__increaseValue(),DvtEventManager.consumeEvent(a);else if(b==DvtKeyboardEvent.DOWN_ARROW||b==(c?DvtKeyboardEvent.RIGHT_ARROW:DvtKeyboardEvent.LEFT_ARROW))this._gauge.__decreaseValue(),DvtEventManager.consumeEvent(a)};var DvtGaugeStyleUtils={};
DvtObj.createSubclass(DvtGaugeStyleUtils,DvtObj,"DvtGaugeStyleUtils");DvtGaugeStyleUtils._THRESHOLD_COLOR_RAMP=["#ed6647","#fad55c","#68c182"];DvtGaugeStyleUtils._SKYROS_THRESHOLD_COLOR_RAMP=["#D62800","#FFCF21","#84AE31"];DvtGaugeStyleUtils._SKYROS_THRESHOLD_COLOR_RAMP=["#D62800","#FFCF21","#84AE31"];
DvtGaugeStyleUtils._ALTA_CIRCLE={startAngle:202.5,angleExtent:225,anchorX:100,anchorY:103,metricLabelBounds:{x:80,y:86,width:40,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6};DvtGaugeStyleUtils._ALTA_DOME={startAngle:202.5,angleExtent:225,anchorX:100,anchorY:103,metricLabelBounds:{x:83,y:86,width:34,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6};
DvtGaugeStyleUtils._ALTA_RECTANGLE={startAngle:202.5,angleExtent:225,anchorX:100,anchorY:103,metricLabelBounds:{x:83,y:86,width:34,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6};DvtGaugeStyleUtils._ANTIQUE_CIRCLE={startAngle:220.5,angleExtent:261.1,anchorX:100,anchorY:100,metricLabelBounds:{x:82,y:133,width:36,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:61,majorTickCount:6};
DvtGaugeStyleUtils._ANTIQUE_DOME={startAngle:195.5,angleExtent:210.8,anchorX:100,anchorY:100,metricLabelBounds:{x:84,y:135,width:32,height:35},indicatorLength:.98,tickLabelHeight:20,tickLabelWidth:30,radius:63,majorTickCount:6};DvtGaugeStyleUtils._ANTIQUE_RECTANGLE={startAngle:207.6,angleExtent:235,anchorX:100,anchorY:95.8,metricLabelBounds:{x:83,y:125,width:34,height:40},indicatorLength:1.05,tickLabelHeight:20,tickLabelWidth:30,radius:64,majorTickCount:6};
DvtGaugeStyleUtils._LIGHT_CIRCLE={startAngle:220.5,angleExtent:261.1,anchorX:100,anchorY:100,metricLabelBounds:{x:80,y:82,width:40,height:40},indicatorLength:.82,tickLabelHeight:20,tickLabelWidth:30,radius:58,majorTickCount:6};DvtGaugeStyleUtils._LIGHT_DOME={startAngle:201,angleExtent:222,anchorX:100.2,anchorY:89,metricLabelBounds:{x:80,y:70,width:41,height:39},indicatorLength:1.23,tickLabelHeight:20,tickLabelWidth:30,radius:56,majorTickCount:6};
DvtGaugeStyleUtils._LIGHT_RECTANGLE={startAngle:211,angleExtent:242,anchorX:100,anchorY:91.445,metricLabelBounds:{x:78,y:75,width:44,height:38},indicatorLength:1.1,tickLabelHeight:20,tickLabelWidth:30,radius:58,majorTickCount:6};DvtGaugeStyleUtils._DARK_CIRCLE={startAngle:220.5,angleExtent:261.5,metricLabelBounds:{x:80,y:82,width:40,height:40},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6};
DvtGaugeStyleUtils._DARK_DOME={startAngle:201,angleExtent:222,anchorX:100.2,anchorY:89,metricLabelBounds:{x:80,y:73,width:40,height:36},indicatorLength:1.23,tickLabelHeight:20,tickLabelWidth:30,radius:56,majorTickCount:6};DvtGaugeStyleUtils._DARK_RECTANGLE={startAngle:201,angleExtent:222,anchorX:100.2,anchorY:99.5,metricLabelBounds:{x:80,y:83,width:41,height:36},indicatorLength:1.1,tickLabelHeight:20,tickLabelWidth:30,radius:58,majorTickCount:6};DvtGaugeStyleUtils._ANTIQUE_INDICATOR={anchorX:42,anchorY:510};
DvtGaugeStyleUtils._ALTA_INDICATOR={anchorX:187,anchorY:388};DvtGaugeStyleUtils._LIGHT_INDICATOR={anchorX:227,anchorY:425};DvtGaugeStyleUtils._DARK_INDICATOR={anchorX:227,anchorY:425};DvtGaugeStyleUtils.getColor=function(a){var b=a.getOptions(),c=DvtGaugeDataUtils.getValueThresholdIndex(a),d=DvtGaugeDataUtils.getThreshold(a,c);return!d||a instanceof DvtStatusMeterGauge&&!(a instanceof DvtStatusMeterGauge&&"onIndicator"==b.thresholdDisplay)?b.color:DvtGaugeStyleUtils.getThresholdColor(a,d,c)};
DvtGaugeStyleUtils.getBorderColor=function(a){var b=a.getOptions(),c=DvtGaugeDataUtils.getValueThresholdIndex(a);return(c=DvtGaugeDataUtils.getThreshold(a,c))&&c.borderColor&&(!(a instanceof DvtStatusMeterGauge)||a instanceof DvtStatusMeterGauge&&"onIndicator"==b.thresholdDisplay)?c.borderColor:b.borderColor};
DvtGaugeStyleUtils.getPlotAreaColor=function(a){var b=a.getOptions(),c=DvtGaugeDataUtils.getValueThresholdIndex(a),d=DvtGaugeDataUtils.getThreshold(a,c);return!d||a instanceof DvtStatusMeterGauge&&!(a instanceof DvtStatusMeterGauge&&"onIndicator"!=b.thresholdDisplay)?b.plotArea.color:DvtGaugeStyleUtils.getThresholdColor(a,d,c)};DvtGaugeStyleUtils.getThresholdColor=function(a,b,c){if(b.color)return b.color;a=a.getOptions();return a._thresholdColors[c%a._thresholdColors.length]};
DvtGaugeStyleUtils.getDialBackground=function(a){return"rectangleAlta"===a?DvtGaugeStyleUtils._ALTA_RECTANGLE:"domeAlta"===a?DvtGaugeStyleUtils._ALTA_DOME:"circleAntique"===a?DvtGaugeStyleUtils._ANTIQUE_CIRCLE:"rectangleAntique"===a?DvtGaugeStyleUtils._ANTIQUE_RECTANGLE:"domeAntique"===a?DvtGaugeStyleUtils._ANTIQUE_DOME:"circleLight"===a?DvtGaugeStyleUtils._LIGHT_CIRCLE:"rectangleLight"===a?DvtGaugeStyleUtils._LIGHT_RECTANGLE:"domeLight"===a?DvtGaugeStyleUtils._LIGHT_DOME:"circleDark"===a?DvtGaugeStyleUtils._DARK_CIRCLE:
"rectangleDark"===a?DvtGaugeStyleUtils._DARK_RECTANGLE:"domeDark"===a?DvtGaugeStyleUtils._DARK_DOME:DvtGaugeStyleUtils._ALTA_CIRCLE};DvtGaugeStyleUtils.getDialIndicator=function(a){return"needleAntique"===a?DvtGaugeStyleUtils._ANTIQUE_INDICATOR:"needleLight"===a?DvtGaugeStyleUtils._LIGHT_INDICATOR:"needleDark"===a?DvtGaugeStyleUtils._DARK_INDICATOR:DvtGaugeStyleUtils._ALTA_INDICATOR};var DvtGaugeRenderer={};DvtObj.createSubclass(DvtGaugeRenderer,DvtObj,"DvtGaugeRenderer");
DvtGaugeRenderer.renderEmptyText=function(a,b,c){var d=a.getOptions(),e=d.emptyText;e||(e=DvtBundle.getTranslation(d,"labelNoData",DvtBundle.UTIL_PREFIX,"NO_DATA",null));d.metricLabel.style.getStyle("font-size")||d.metricLabel.style.setStyle("font-size","13px");DvtTextUtils.renderEmptyText(b,e,new DvtRectangle(c.x,c.y,c.w,c.h),a.__getEventManager(),d.metricLabel.style)};
DvtGaugeRenderer.getFormattedMetricLabel=function(a,b){var c=b.getOptions(),d=null,e="percent"==c.metricLabel.textType;"on"==c.metricLabel.rendered&&c.metricLabel.converter&&(d=c.metricLabel.converter);var g=null;"on"==c.metricLabel.rendered&&c.metricLabel.scaling&&(g=c.metricLabel.scaling);return DvtGaugeRenderer._formatLabelValue(a,b,d,g,c.metricLabel.autoPrecision?c.metricLabel.autoPrecision:"on",e)};
DvtGaugeRenderer.formatTickLabelValue=function(a,b){var c=b.getOptions(),d=null,e="percent"==c.tickLabel.textType;"on"==c.tickLabel.rendered&&c.tickLabel.converter&&(d=c.tickLabel.converter);var g=null;"on"==c.tickLabel.rendered&&c.tickLabel.scaling&&(g=c.tickLabel.scaling);return DvtGaugeRenderer._formatLabelValue(a,b,d,g,c.tickLabel.autoPrecision?c.tickLabel.autoPrecision:"on",e)};
DvtGaugeRenderer._formatLabelValue=function(a,b,c,d,e,g){var h=b.getOptions(),k=null,m=h.min,n=h.max,t=n-m,u=1E3>t?100:1E3,v=null;isNaN(t)||(v=t/u);g&&(a=DvtGaugeRenderer.getFillPercentage(h,h.min,h.max,a),k=b.getCtx().getNumberConverter({style:"percent",maximumFractionDigits:0}));b=new DvtLinearScaleAxisValueFormatter(b.getCtx(),m,n,v,d,e);a=c&&c.getAsString?b.format(a,c):c&&c.format?b.format(a,c):k?b.format(a,k):g?b.format(100*a):b.format(a);return!g||k&&!c?a:String(a)+"%"};
DvtGaugeRenderer.getFillPercentage=function(a,b,c,d){a=(d-b)/(a.max-a.min);return a=Math.min(Math.max(0,a),1)};DvtGaugeRenderer.getTooltipString=function(a){var b=a.getOptions(),c=DvtGaugeDataUtils.getValueThresholdIndex(a);return(c=DvtGaugeDataUtils.getThreshold(a,c))&&null!=c.shortDesc?c.shortDesc:null!=b.shortDesc?b.shortDesc:DvtGaugeRenderer.getFormattedMetricLabel(b.value,a)};
DvtGaugeRenderer.renderLabel=function(a,b,c,d,e){var g=a.getOptions();if("on"==g.metricLabel.rendered){var h=DvtGaugeRenderer.getFormattedMetricLabel(g.value,a),k=DvtGaugeRenderer.getFormattedMetricLabel(g.min,a),m=DvtGaugeRenderer.getFormattedMetricLabel(g.max,a),n=c.w,t=c.h,u=new DvtOutputText(a.getCtx(),h,c.x+c.w/2,c.y+c.h/2);u.setCSSStyle(g.metricLabel.style);g=(g=g.metricLabel.style.getStyle("font-size"))?parseInt(g):null;g||(g=DvtGaugeRenderer.calcLabelFontSize([h,k,m],u,c),u.setTextString(h),
u.setFontSize(g));u.alignMiddle();u.alignCenter();null!=d&&u.setSolidFill(d);DvtTextUtils.fitText(u,n,t,b)&&(e?u.setMouseEnabled(!1):u.isTruncated()&&a.__getEventManager().associate(u,new DvtSimpleObjPeer(h)))}};DvtGaugeRenderer.calcLabelFontSize=function(a,b,c){for(var d=0,e=null,g=0,h=0;h<a.length;h++)b.setTextString(a[h]),g=b.measureDimensions().w,g>d&&(e=a[h],d=g);b.setTextString(e);return b.getOptimalFontSize(c)};
DvtGaugeRenderer.adjustForStep=function(a,b){var c=Number(a.step);if(c&&0<c){var d=(b-a.min)/c;return.5<d?(c=Math.round(d)*c+a.min,Math.max(Math.min(a.max,c),a.min)):a.min}return b};var DvtLedGauge=function(){};DvtObj.createSubclass(DvtLedGauge,DvtGauge,"DvtLedGauge");DvtLedGauge.newInstance=function(a,b,c,d){var e=new DvtLedGauge;e.Init(a,b,c,d);return e};DvtLedGauge.prototype.Init=function(a,b,c,d){DvtLedGauge.superclass.Init.call(this,a,b,c,d);this.Defaults=new DvtLedGaugeDefaults};
DvtLedGauge.prototype.SetOptions=function(a){DvtLedGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(a));"auto"==this.Options.animationOnDisplay&&(this.Options.animationOnDisplay="zoom");"auto"==this.Options.animationOnDataChange&&(this.Options.animationOnDataChange="alphaFade");this.Options.readOnly=!0};DvtLedGauge.prototype.Render=function(a,b,c){DvtLedGaugeRenderer.render(this,a,b,c)};var DvtLedGaugeDefaults=function(){this.Init({skyros:DvtLedGaugeDefaults.VERSION_1,alta:{}})};
DvtObj.createSubclass(DvtLedGaugeDefaults,DvtGaugeDefaults,"DvtLedGaugeDefaults");DvtLedGaugeDefaults.VERSION_1={type:"circle"};var DvtLedGaugeRenderer={};DvtObj.createSubclass(DvtLedGaugeRenderer,DvtObj,"DvtLedGaugeRenderer");DvtLedGaugeRenderer.__RECTANGLE_CORNER_RADIUS=1/6;DvtLedGaugeRenderer._SKYROS_SHAPE_TRIANGLE_CMDS="M-42,36.6Q-50,36.6,-46.54,28.6L-4,-43.07Q0,-50,4,-43.07L46.54,28.6Q50,36.6,42,36.6Z";DvtLedGaugeRenderer._SHAPE_TRIANGLE_CMDS=[-50,36.6,0,-50,50,36.6];
DvtLedGaugeRenderer._SKYROS_SHAPE_TRIANGLE_INNER_CMDS=[-50,36.6,0,-50,50,36.6];DvtLedGaugeRenderer._SKYROS_SHAPE_STAR_CMDS=[-13.05,-12.94,-50,-11.13,-21.06,11.9,-30.74,47.6,.1,27.18,31.06,47.44,21.17,11.79,50,-11.39,13.05,-13.01,-.06,-47.59];DvtLedGaugeRenderer._SHAPE_STAR_CMDS=[-50,-11.22,-16.69,-17.94,0,-47.55,16.69,-17.94,50,-11.22,26.69,13.8,30.9,47.56,0,33.42,-30.9,47.56,-26.69,13.8];DvtLedGaugeRenderer._SKYROS_SHAPE_ARROW_CMDS="M0,45L21,45Q24.414,44.414,25,41L25,10L42,10Q48.5,9.1,45,4L2,-38Q0,-39,-2,-38L-45,4Q-48.5,9.1,-42,10L-25,10L-25,41Q-24.414,44.414,-21,45Z";
DvtLedGaugeRenderer._SHAPE_ARROW_CMDS=[25,48,25,8,47.5,8,0,-39,-47.5,8,-25,8,-25,48];DvtLedGaugeRenderer._SKYROS_SHAPE_ARROW_INNER_CMDS=[25,48,25,8,47.5,8,0,-39,-47.5,8,-25,8,-25,48];
DvtLedGaugeRenderer.render=function(a,b,c,d){if(DvtGaugeDataUtils.hasData(a)){var e=a.getOptions(),g=e.__layout.outerGap,h=e&&(0<=e.size||1>e.size)?Math.sqrt(e.size):1;c=new DvtRectangle(g+(c-2*g)*(1-h)/2,g+(d-2*g)*(1-h)/2,(c-2*g)*h,(d-2*g)*h);DvtLedGaugeRenderer._renderShape(a,b,c);DvtLedGaugeRenderer._renderVisualEffects(a,b,c);"on"==e.metricLabel.rendered&&(DvtAgent.isHighContrast()||null==e.metricLabel.style.getStyle("color")?(d=DvtColorUtils.getContrastingTextColor(DvtGaugeStyleUtils.getColor(a)),
e.metricLabel.style.setStyle("color",d),DvtGaugeRenderer.renderLabel(a,b,DvtLedGaugeRenderer._getLabelBounds(a,b,c),d,!0)):DvtGaugeRenderer.renderLabel(a,b,DvtLedGaugeRenderer._getLabelBounds(a,b,c),null,!0))}else DvtGaugeRenderer.renderEmptyText(a,b,new DvtRectangle(0,0,c,d))};
DvtLedGaugeRenderer._renderShape=function(a,b,c){var d=a.getCtx(),e=a.getOptions(),g=e.type,h=DvtGaugeStyleUtils.getColor(a),k=DvtGaugeStyleUtils.getBorderColor(a),m=c.x+c.w/2,n=c.y+c.h/2,t=Math.min(c.w,c.h)/2,u=DvtGaugeDefaults.isSkyrosSkin(a),v,w=Math.min(c.w/100,c.h/100);"rectangle"==g?d=new DvtRect(d,c.x,c.y,c.w,c.h):"diamond"==g?d=new DvtPolygon(d,[m-t,n,m,n-t,m+t,n,m,n+t]):"star"==g||"triangle"==g||"arrow"==g?("star"==g?v=u?DvtLedGaugeRenderer._SKYROS_SHAPE_STAR_CMDS:DvtLedGaugeRenderer._SHAPE_STAR_CMDS:
"triangle"==g?v=u?DvtLedGaugeRenderer._SKYROS_SHAPE_TRIANGLE_CMDS:DvtLedGaugeRenderer._SHAPE_TRIANGLE_CMDS:"arrow"==g&&(v=u?DvtLedGaugeRenderer._SKYROS_SHAPE_ARROW_CMDS:DvtLedGaugeRenderer._SHAPE_ARROW_CMDS),u&&"triangle"==g||u&&"arrow"==g?(v=DvtPathUtils.transformPath(v,c.x+c.w/2,c.y+c.h/2,w,w),d=new DvtPath(d,v)):(v=DvtPolygonUtils.scale(v,w,w),v=DvtPolygonUtils.translate(v,c.x+c.w/2,c.y+c.h/2),d=new DvtPolygon(d,v))):d=new DvtCircle(d,m,n,t);u||"none"==e.visualEffects?d.setSolidFill(h):(m=[DvtColorUtils.adjustHSL(h,
0,-.09,.04),DvtColorUtils.adjustHSL(h,0,-.04,-.05)],n=e&&0==e.rotation%90?e.rotation:0,d.setFill(new DvtLinearGradientFill("arrow"==g||"star"==g||"triangle"==g?n-90:270,m,[1,1],[0,1])));k&&d.setSolidStroke(k);k=a.__getEventManager();(m=DvtGaugeRenderer.getTooltipString(a))&&k&&k.associate(d,new DvtSimpleObjPeer(null,m,h));n=u?e.rotation+90:e.rotation;0==n||"arrow"!=g&&"triangle"!=g||(d=DvtLedGaugeRenderer._rotate(a,b,d,c));b.addChild(d)};
DvtLedGaugeRenderer._rotate=function(a,b,c,d){var e=a.getOptions();a=new DvtContainer(a.getCtx());b.addChild(a);a.addChild(c);b=e&&0==e.rotation%90?e.rotation:0;e=new DvtMatrix;e.rotate(Math.PI*b/180);c.setMatrix(e);b=a.getDimensions();c=d.x+d.w/2-(b.x+b.w/2);d=d.y+d.h/2-(b.y+b.h/2);b=new DvtMatrix;b.translate(c,d);a.setMatrix(b);return a};
DvtLedGaugeRenderer._renderVisualEffects=function(a,b,c){var d=a.getOptions(),e=d.type;"none"!=d.visualEffects&&DvtGaugeDefaults.isSkyrosSkin(a)&&("rectangle"==e?DvtLedGaugeRenderer._renderOverlayRectangle(a,b,c):"diamond"==e?DvtLedGaugeRenderer._renderOverlayDiamond(a,b,c):"triangle"==e?DvtLedGaugeRenderer._renderOverlayTriangle(a,b,c):"star"==e?DvtLedGaugeRenderer._renderOverlayStar(a,b,c):"arrow"==e?DvtLedGaugeRenderer._renderOverlayArrow(a,b,c):DvtLedGaugeRenderer._renderOverlayCircle(a,b,c))};
DvtLedGaugeRenderer._renderOverlayRectangle=function(a,b,c){var d=.05*c.w,e=.05*c.h;c=new DvtRectangle(c.x+d,c.y+e,c.w-2*d,c.h-2*e);a=new DvtRect(a.getCtx(),c.x,c.y,c.w,c.h);a.setMouseEnabled(!1);b.addChild(a);b=new DvtLinearGradientFill(270,"#FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF".split(" "),[.75,.5,.15,0,.2,.4,.2],[0,.05,.4,.6,.8,.9,1]);a.setFill(b)};
DvtLedGaugeRenderer._renderOverlayDiamond=function(a,b,c){var d=.05*c.w,e=.05*c.h,e=new DvtRectangle(c.x+d,c.y+e,c.w-2*d,c.h-2*e);c=e.x+e.w/2;d=e.y+e.h/2;e=Math.min(e.w,e.h)/2;a=new DvtPolygon(a.getCtx(),[c-e,d,c,d-e,c+e,d,c,d+e]);a.setMouseEnabled(!1);b.addChild(a);b=new DvtLinearGradientFill(270,"#FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF".split(" "),[.75,.5,.15,0,.2,.4,.2],[0,.05,.4,.6,.8,.9,1]);a.setFill(b)};
DvtLedGaugeRenderer._renderOverlayTriangle=function(a,b,c){var d=.05*c.w,e=.05*c.h,g=DvtGaugeDefaults.isSkyrosSkin(a),d=new DvtRectangle(c.x+d,c.y+e,c.w-2*d,c.h-2*e),e=DvtLedGaugeRenderer._SKYROS_SHAPE_TRIANGLE_INNER_CMDS,h=Math.min(d.w/100,d.h/100),e=DvtPolygonUtils.scale(e,h,h),e=DvtPolygonUtils.translate(e,c.x+c.w/2,c.y+c.h/2);c=new DvtPolygon(a.getCtx(),e);e=(e=a.getOptions())&&0==e.rotation%90?e.rotation:0;g=new DvtLinearGradientFill(g?e-90:360-e,["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],
[.3,.55,0,.25,.1],[0,.05,.4,.9,1]);c.setFill(g);c=DvtLedGaugeRenderer._rotate(a,b,c,d);c.setMouseEnabled(!1);b.addChild(c)};
DvtLedGaugeRenderer._renderOverlayArrow=function(a,b,c){var d=.05*c.w,e=.05*c.h,g=DvtGaugeDefaults.isSkyrosSkin(a),d=new DvtRectangle(c.x+d,c.y+e,c.w-2*d,c.h-2*e),e=DvtLedGaugeRenderer._SKYROS_SHAPE_ARROW_INNER_CMDS,h=Math.min(d.w/100,d.h/100),e=DvtPolygonUtils.scale(e,h,h),e=DvtPolygonUtils.translate(e,c.x+c.w/2,c.y+c.h/2);c=new DvtPolygon(a.getCtx(),e);e=(e=a.getOptions())&&0==e.rotation%90?e.rotation:0;g=new DvtLinearGradientFill(g?e-90:360-e,["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],
[.3,.55,0,.25,.1],[0,.05,.4,.9,1]);c.setFill(g);c=DvtLedGaugeRenderer._rotate(a,b,c,d);c.setMouseEnabled(!1);b.addChild(c)};
DvtLedGaugeRenderer._renderOverlayStar=function(a,b,c){var d=.05*c.w,e=.05*c.h;new DvtRectangle(c.x+d,c.y+e,c.w-2*d,c.h-2*e);c=new DvtPath(a.getCtx(),DvtLedGaugeRenderer._SKYROS_SHAPE_STAR_CMDS);d=a.getOptions();d=360-(d&&0==d.rotation%90?d.rotation:0);a=DvtGaugeStyleUtils.getColor(a);a=[DvtColorUtils.getDarker(a,.9),a,DvtColorUtils.getBrighter(a,.7)];a=new DvtLinearGradientFill(d,a,[1,1,1],[.1,.4,.8]);c.setFill(a);c.setMouseEnabled(!1);b.addChild(c)};
DvtLedGaugeRenderer._renderOverlayCircle=function(a,b,c){var d=.05*c.w,e=.05*c.h;c=new DvtRectangle(c.x+d,c.y+e,c.w-2*d,c.h-2*e);var d=c.x+c.w/2,e=c.y+c.h/2,g=Math.min(c.w,c.h)/2,h=new DvtCircle(a.getCtx(),d,e,g);h.setMouseEnabled(!1);b.addChild(h);var k=new DvtRadialGradientFill(["#FFFFFF","#FFFFFF","#FFFFFF"],[0,.25,.5],[.15,.7,.95],d,e-.6*g,1.5*g,[c.x,c.y,c.w,c.h]);h.setFill(k);h=.6*g;g*=.4;e-=.3*g;a=new DvtOval(a.getCtx(),d,e-g,h,g);a.setMouseEnabled(!1);b.addChild(a);b=new DvtRadialGradientFill(["#FFFFFF",
"#FFFFFF","#FFFFFF"],[0,.2,.5],[.6,.8,1],d,e,h,[c.x,c.y,c.w,c.h]);a.setFill(b)};
DvtLedGaugeRenderer._getLabelBounds=function(a,b,c){b=a.getOptions();a=b.type;b=0==b.rotation%90?b.rotation:0;var d=Math.min(c.w,c.h),e=c.x+c.w/2-d/2;c=c.y+c.h/2-d/2;var g=d,h=d;"triangle"==a?0==b?(e+=.2*d,c+=.25*d,g-=.4*d,h-=.3*d):90==b?(e+=.05*d,c+=.2*d,g-=.3*d,h-=.4*d):180==b?(e+=.2*d,c+=.05*d,g-=.4*d,h-=.3*d):270==b&&(e+=.25*d,c+=.2*d,g-=.3*d,h-=.4*d):"arrow"==a?0==b?(e+=.2*d,c+=.2*d,g-=.4*d,h-=.4*d):90==b?(e+=.05*d,c+=.2*d,g-=.28*d,h-=.4*d):180==b?(e+=.2*d,c+=.2*d,g-=.4*d,h-=.4*d):270==b&&(e+=
.23*d,c+=.2*d,g-=.28*d,h-=.4*d):"star"==a?(e+=.25*d,c+=.25*d,g-=.5*d,h-=.4*d):"diamond"==a?(e+=.15*d,c+=.15*d,g-=.3*d,h-=.3*d):"rectangle"==a?(e+=.1*d,c+=.1*d,g-=.2*d,h-=.2*d):"circle"==a&&(e+=.15*d,c+=.15*d,g-=.3*d,h-=.3*d);return new DvtRectangle(e,c,g,h)};var DvtStatusMeterGauge=function(){};DvtObj.createSubclass(DvtStatusMeterGauge,DvtGauge,"DvtStatusMeterGauge");DvtStatusMeterGauge.newInstance=function(a,b,c){var d=new DvtStatusMeterGauge;d.Init(a,b,c);return d};
DvtStatusMeterGauge.prototype.Init=function(a,b,c){DvtStatusMeterGauge.superclass.Init.call(this,a,b,c);this.Defaults=new DvtStatusMeterGaugeDefaults;this.__axisInfo=null};DvtStatusMeterGauge.prototype.SetOptions=function(a){DvtStatusMeterGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(a))};DvtStatusMeterGauge.prototype.Render=function(a,b,c){DvtStatusMeterGaugeRenderer.render(this,a,b,c)};
DvtStatusMeterGauge.prototype.CreateAnimationOnDisplay=function(a,b,c){b=[];for(var d=0;d<a.length;d++){var e=a[d],g=e.getAnimationParams();"horizontal"==this.Options.orientation?e.setAnimationParams([g[0],g[0],g[2],g[3]]):"vertical"==this.Options.orientation?e.setAnimationParams([g[0],g[1],g[3],g[3]]):"circular"==this.Options.orientation&&e.setAnimationParams([g[0],g[1],0,g[3],g[4]]);var h=new DvtCustomAnimation(this.getCtx(),e,c);h.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,e,e.getAnimationParams,
e.setAnimationParams,g);h.getAnimator().setEasing(function(a){return DvtEasing.backOut(a,.7)});b.push(h)}return new DvtParallelPlayable(this.getCtx(),b)};
DvtStatusMeterGauge.prototype.GetValueAt=function(a,b){if("horizontal"==this.Options.orientation)return this.__axisInfo.getBoundedValueAt(a);if("vertical"==this.Options.orientation)return this.__axisInfo.getBoundedValueAt(b);if("circular"==this.Options.orientation){var c=Math.atan2(b-this.Height/2,a-this.Width/2),c=DvtMath.radsToDegrees(c)-270,c=(c+720)%360;0<=c&&360>=c||(c=360<c?360-c<c-360?0:360:0-c<c?0:360);if(DvtAgent.isRightToLeft(this.getCtx()))for(c=360-c;0>c;)c+=360;var d=this.Options.min;
return c/360*(this.Options.max-d)+d}};var DvtStatusMeterGaugeDefaults=function(){this.Init({skyros:DvtStatusMeterGaugeDefaults.VERSION_1,alta:DvtStatusMeterGaugeDefaults.SKIN_ALTA})};DvtObj.createSubclass(DvtStatusMeterGaugeDefaults,DvtGaugeDefaults,"DvtStatusMeterGaugeDefaults");DvtStatusMeterGaugeDefaults.SKIN_ALTA={color:"#393737",metricLabel:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;")},plotArea:{color:"#f5f6f7",borderColor:"#D6DFE6"}};
DvtStatusMeterGaugeDefaults.VERSION_1={color:"#313842",indicatorSize:1,metricLabel:{style:new DvtCSSStyle("font-family: tahoma, sans-serif; color: #333333;")},orientation:"horizontal",plotArea:{color:"#AAAAAA",borderColor:"#C6C6C6",rendered:"auto"},thresholdDisplay:"onIndicator"};var DvtStatusMeterGaugeRenderer={};DvtObj.createSubclass(DvtStatusMeterGaugeRenderer,DvtObj,"DvtStatusMeterGaugeRenderer");
DvtStatusMeterGaugeRenderer.render=function(a,b,c,d){if(DvtGaugeDataUtils.hasData(a)){var e=a.getOptions(),g=e.__layout.outerGap;c=new DvtRectangle(g,g,c-2*g,d-2*g);"horizontal"==e.orientation||"vertical"==e.orientation?(DvtStatusMeterGaugeRenderer._renderLabel(a,b,c),DvtStatusMeterGaugeRenderer._renderShape(a,b,c)):"circular"==e.orientation&&(e=Math.min(c.w,c.h),e=new DvtRectangle(c.x+c.w/2-.3*e,c.y+c.h/2-.25*e,.6*e,.5*e),DvtGaugeRenderer.renderLabel(a,b,e,null,!0),DvtStatusMeterGaugeRenderer._renderCircularShape(a,
b,c))}else DvtGaugeRenderer.renderEmptyText(a,b,new DvtRectangle(0,0,c,d))};
DvtStatusMeterGaugeRenderer._renderCircularShape=function(a,b,c){var d=a.getOptions(),e=0,g=d.value,h=d.thresholds,k=Math.min(c.w,c.h),m=.35*k,n=.5*k,t=1.5*Math.PI,e=2*e*Math.PI;if(h&&"off"!=d.plotArea.rendered&&"all"==d.thresholdDisplay)for(var u=0;u<h.length;u++){var v=DvtGaugeStyleUtils.getThresholdColor(a,h[u],u),e=h[u].max<d.max?h[u].max:d.max,w=0==u?d.min:h[u-1].max,t=1.5*Math.PI+2*Math.PI*DvtGaugeRenderer.getFillPercentage(d,d.min,e,w),e=DvtGaugeRenderer.getFillPercentage(d,w,e,e),e=2*e*Math.PI;
DvtStatusMeterGaugeRenderer._drawCircularArc(a,b,c,t,e,m,n,v,!0)}else"off"==d.plotArea.rendered||"auto"==d.plotArea.rendered&&"onIndicator"==d.thresholdDisplay||"all"==d.thresholdDisplay||(v=DvtGaugeStyleUtils.getPlotAreaColor(a),t=1.5*Math.PI,e=2*Math.PI,DvtStatusMeterGaugeRenderer._drawCircularArc(a,b,c,t,e,m,n,v,!0));(h=d.indicatorSize)&&1!=h&&(k*=.075*(1-h),m+=k,n-=k);t=1.5*Math.PI;e=DvtGaugeRenderer.getFillPercentage(d,d.min,d.max,g);e=2*e*Math.PI;DvtStatusMeterGaugeRenderer._drawCircularArc(a,
b,c,t,e,m,n,DvtGaugeStyleUtils.getColor(a),!1);if(m=d.referenceLines)for(n=0;n<m.length;n++)k=m[n].color?m[n].color:"black",h=m[n].lineWidth?m[n].lineWidth:2,t=m[n].lineStyle,g=m[n].value,g=1.5*Math.PI+2*DvtGaugeRenderer.getFillPercentage(d,d.min,d.max,g)*Math.PI,DvtStatusMeterGaugeRenderer._drawCircularReferenceLine(a,b,c,g,k,h,t);c=new DvtRect(a.getCtx(),c.x,c.y,c.w,c.h);c.setInvisibleFill();b.addChild(c);((b=DvtGaugeRenderer.getTooltipString(a))||!1===a.getOptions().readOnly)&&a.__getEventManager().associate(c,
new DvtSimpleObjPeer(null,b,DvtGaugeStyleUtils.getColor(a)))};
DvtStatusMeterGaugeRenderer._renderShape=function(a,b,c){var d=a.getOptions(),e=DvtAgent.isRightToLeft(a.getCtx()),g="vertical"==d.orientation,h={layout:{}};h.layout.gapRatio=0;h.timeAxisType="disabled";h.position=g?"left":"bottom";h.min=d.min;h.max=d.max;h.dataMin=d.min;h.dataMax=d.max;h.tickLabel={rendered:"off"};h=DvtAxisInfo.newInstance(a.getCtx(),h,c);a.__axisInfo=h;var k=0;0>=d.max?k=d.max:0<=d.min&&(k=d.min);k=h.getCoordAt(k);"off"==d.plotArea.rendered||"auto"==d.plotArea.rendered&&"onIndicator"==
d.thresholdDisplay||(k=h.getUnboundedCoordAt(d.min));var m=h.getUnboundedCoordAt(d.value),m=g?Math.max(c.y,Math.min(c.y+c.h,m)):Math.max(c.x,Math.min(c.x+c.w,m)),n=c.x,t=c.x+c.w,u=c.y,v=c.y+c.h,w,x,y,z=0;g?(w=c.x+(1-d.indicatorSize)/2*c.w+.5,x=c.x+c.w*(1-(1-d.indicatorSize)/2)-.5,z=k-.5,y=m+.5):(w=e?k-.5:k+.5,x=e?m+.5:m-.5,y=c.y+(1-d.indicatorSize)/2*c.h+.5,z=c.y+c.h*(1-(1-d.indicatorSize)/2)-.5);var A=!0;m==k&&(A=!1);var B=DvtGaugeStyleUtils.getBorderColor(a),C=d.plotArea.borderColor,D=d.thresholds,
m=g?0:270;if(D&&"off"!=d.plotArea.rendered&&"all"==d.thresholdDisplay)for(k=D.length-1;0<=k;k--){var F=k,E=DvtStatusMeterGaugeRenderer._createShape(a,a.getCtx(),n,t,u,v),H=new DvtClipPath("pacp"+a.getId());k==D.length-1?g?H.addRect(0,0,c.w+2,v-u+2,0,0):e?H.addRect(h.getUnboundedCoordAt(d.max),0,c.w+2,v-u+2,0,0):H.addRect(0,0,c.w+2,v-u+2,0,0):g?H.addRect(0,h.getUnboundedCoordAt(d.max),t-n+2,1*(d.max-D[D.length-2-F].max)/Math.abs(d.min-d.max)*c.h,0,0):e?H.addRect(0,0,1*(d.max-(null==D[D.length-2-F].max?
100:D[D.length-2-F].max))/Math.abs(d.min-d.max)*c.w,v-u+2,0,0):H.addRect(0,0,1*(D[F].max-d.min)/Math.abs(d.min-d.max)*c.w,v-u+2,0,0);E.setClipPath(H);if(e||g)F=D.length-1-k;E.setSolidFill(DvtGaugeStyleUtils.getThresholdColor(a,D[F],F));E.setSolidStroke(C);DvtStatusMeterGaugeRenderer._renderPlotAreaVisualEffects(a,b,E,DvtGaugeStyleUtils.getThresholdColor(a,D[F],F),m)}else"off"==d.plotArea.rendered||"auto"==d.plotArea.rendered&&"onIndicator"==d.thresholdDisplay||"all"==d.thresholdDisplay||(E=g?DvtStatusMeterGaugeRenderer._createShape(a,
a.getCtx(),n,t,h.getUnboundedCoordAt(d.max),h.getUnboundedCoordAt(d.min)):DvtStatusMeterGaugeRenderer._createShape(a,a.getCtx(),h.getUnboundedCoordAt(d.min),h.getUnboundedCoordAt(d.max),u,v),k=DvtGaugeStyleUtils.getPlotAreaColor(a),E.setSolidFill(k),E.setSolidStroke(C),DvtStatusMeterGaugeRenderer._renderPlotAreaVisualEffects(a,b,E,k,m));k=DvtStatusMeterGaugeRenderer._createShape(a,a.getCtx(),w,x,y,z);a.__shapes.push(k);e=DvtGaugeStyleUtils.getColor(a);DvtGaugeDefaults.isSkyrosSkin(a)||"none"==d.visualEffects?
k.setSolidFill(e):(n=[DvtColorUtils.adjustHSL(e,0,-.09,.04),DvtColorUtils.adjustHSL(e,0,-.04,-.05)],n=new DvtLinearGradientFill(m,n,[1,1],[0,1]),k.setFill(n));B&&k.setSolidStroke(B);A&&b.addChild(k);k=DvtStatusMeterGaugeRenderer._createShape(a,a.getCtx(),w,x,y,z);DvtStatusMeterGaugeRenderer._renderVisualEffects(a,b,k,A,m);if(A=d.referenceLines)for(k=0;k<A.length;k++)w=A[k].color?A[k].color:"white",z=A[k].value,m=d.indicatorSize,g?(y=((1-m)/2+m)*c.w,x=c.x+(1-m)/4*c.w,z=h.getUnboundedCoordAt(z),x=new DvtLine(a.getCtx(),
x,z,x+y,z)):(y=((1-m)/2+m)*c.h,x=h.getUnboundedCoordAt(z),z=c.y+(1-m)/4*c.h,x=new DvtLine(a.getCtx(),x,z,x,z+y)),w=new DvtSolidStroke(w,1,A[k].lineWidth?A[k].lineWidth:2),A[k].lineStyle&&w.setStyle(DvtStroke.convertTypeString(A[k].lineStyle)),x.setStroke(w),b.addChild(x),DvtAgent.isPlatformIE()||(w=DvtColorUtils.makeRGBA(0,0,0,.8),w=new DvtShadow(w,.75,3,3,50,1,2,!1,!1,!1),x.addDrawEffect(w));c=new DvtRect(a.getCtx(),c.x,c.y,c.w,c.h);c.setInvisibleFill();b.addChild(c);((b=DvtGaugeRenderer.getTooltipString(a))||
!1===d.readOnly)&&a.__getEventManager().associate(c,new DvtSimpleObjPeer(null,b,e))};DvtStatusMeterGaugeRenderer._createShape=function(a,b,c,d,e,g){return new DvtStatusMeterGaugeIndicator(a,b,c,d,e,g)};DvtStatusMeterGaugeRenderer._renderVisualEffects=function(a,b,c,d,e){"none"!=a.getOptions().visualEffects&&DvtGaugeDefaults.isSkyrosSkin(a)&&(e=new DvtLinearGradientFill(e,["#FFFFFF","#FFFFFF","#FFFFFF"],[.5,.3125,0],[0,.3,1]),c.setFill(e),a.__shapes.push(c),c.setMouseEnabled(!1),d&&b.addChild(c))};
DvtStatusMeterGaugeRenderer._renderPlotAreaVisualEffects=function(a,b,c,d,e){var g=a.getOptions();c.setMouseEnabled(!1);b.addChild(c);"none"!=g.visualEffects&&(DvtGaugeDefaults.isSkyrosSkin(a)?(a=[DvtColorUtils.getDarker(d,.9),d,DvtColorUtils.getBrighter(d,.7)],e=new DvtLinearGradientFill(e,a,[1,1,1],[0,.04,.73])):(a=[DvtColorUtils.adjustHSL(d,0,-.04,-.05),DvtColorUtils.adjustHSL(d,0,-.09,.04)],e=new DvtLinearGradientFill(e,a,[1,1],[0,1])),c.setFill(e))};
DvtStatusMeterGaugeRenderer._renderLabel=function(a,b,c){var d=a.getOptions(),e=DvtAgent.isRightToLeft(a.getCtx()),g="vertical"==d.orientation,h=new DvtOutputText(a.getCtx(),""),k=DvtGaugeRenderer.getFormattedMetricLabel(d.value,a),m=d.__layout.labelGap;h.setCSSStyle(d.metricLabel.style);if(g&&"on"==d.metricLabel.rendered){var n=0<d.max?d.max:d.min,n=DvtGaugeRenderer.getFormattedMetricLabel(n,a),t=new DvtOutputText(a.getCtx(),n);t.setCSSStyle(d.metricLabel.style);e=new DvtRectangle(c.x,c.y+.8*c.h,
c.w,.2*c.h);g=(g=d.metricLabel.style.getStyle("font-size"))?parseInt(g):t.getOptimalFontSize(e);t=t.measureDimensions();c.h-=t.h;n=t.w;h.setFontSize(g);h.setTextString(k);h.setX(c.x+c.w/2);h.setY(c.y+c.h);c.h-=m;h.alignCenter();DvtTextUtils.fitText(h,c.w,c.h,b)}else if(!g&&"on"==d.metricLabel.rendered){var g=(g=d.metricLabel.style.getStyle("font-size"))?parseInt(g):13,u=DvtGaugeRenderer.getFormattedMetricLabel(d.min,a),t=DvtGaugeRenderer.getFormattedMetricLabel(d.max,a);18>c.h&&(g=DvtGaugeRenderer.calcLabelFontSize([k,
u,t],h,c));h.setFontSize(g);var v;if(0<d.max||"off"!=d.plotArea.rendered||"auto"!=d.plotArea.rendered||"onIndicator"!=d.thresholdDisplay)n=0<d.max?d.max:d.min,n=DvtGaugeRenderer.getFormattedMetricLabel(n,a),t=new DvtOutputText(a.getCtx(),n),t.setCSSStyle(d.metricLabel.style),t.setFontSize(g),t=t.measureDimensions(),v=e?c.x+t.w:c.x+c.w,n=t.w,e&&(c.x+=t.w+m),c.w-=t.w+m;if(0>d.min&&"on"!=d.plotArea.rendered&&("auto"!=d.plotArea.rendered||"onIndicator"!=d.thresholdDisplay)){g=DvtGaugeRenderer.getFormattedMetricLabel(d.min,
a);u=new DvtOutputText(a.getCtx(),g);u.setCSSStyle(d.metricLabel.style);a=u.measureDimensions();if(0>d.value||0>=d.max)v=e?c.x+c.w:c.x+a.w,n=a.w;e||(c.x+=a.w+m);c.w-=a.w+m}h.setTextString(k);h.setX(v);h.setY(c.y+c.h/2);h.alignMiddle();h.alignRight();DvtTextUtils.fitText(h,n,c.h,b)}};DvtStatusMeterGaugeRenderer._calcPointOnArc=function(a,b,c){var d=Math.cos(c)*b+a.w/2+a.x;a=Math.sin(c)*b+a.h/2+a.y;return{x:d,y:a}};
DvtStatusMeterGaugeRenderer._drawCircularArc=function(a,b,c,d,e,g,h,k,m){var n=a.getCtx();DvtAgent.isRightToLeft(a.getCtx())&&(d=Math.PI-d-e,d=0<d?d:d+2*Math.PI);m?c=new DvtPath(n,DvtStatusMeterGaugeRenderer.createCircularPathCmd(c,d,e,g,h)):(c=new DvtStatusMeterGaugeCircularIndicator(n,c,d,e,g,h),a.__shapes.push(c));c.setSolidFill(k);(a=DvtGaugeStyleUtils.getBorderColor(a))&&!m&&c.setSolidStroke(a);b.addChild(c)};
DvtStatusMeterGaugeRenderer._drawCircularReferenceLine=function(a,b,c,d,e,g,h){var k=a.getCtx(),m=Math.min(c.w,c.h),n=.275*m,m=.5*m;DvtAgent.isRightToLeft(a.getCtx())&&(d=Math.PI-d,d=0<d?d:d+2*Math.PI);a=DvtStatusMeterGaugeRenderer._calcPointOnArc(c,n,d);c=DvtStatusMeterGaugeRenderer._calcPointOnArc(c,m,d);k=new DvtLine(k,a.x,a.y,c.x,c.y);e=new DvtSolidStroke(e,1,g);h&&e.setStyle(DvtStroke.convertTypeString(h));k.setStroke(e);b.addChild(k)};
DvtStatusMeterGaugeRenderer.createCircularPathCmd=function(a,b,c,d,e){var g,h,k;c<2*Math.PI?(g=DvtStatusMeterGaugeRenderer._calcPointOnArc(a,e,b),h=DvtStatusMeterGaugeRenderer._calcPointOnArc(a,e,b+c),k=DvtStatusMeterGaugeRenderer._calcPointOnArc(a,d,b+c),a=DvtStatusMeterGaugeRenderer._calcPointOnArc(a,d,b),e=DvtPathUtils.moveTo(g.x,g.y)+DvtPathUtils.arcTo(e,e,c,1,h.x,h.y)+DvtPathUtils.lineTo(k.x,k.y)+DvtPathUtils.arcTo(d,d,c,0,a.x,a.y)+DvtPathUtils.closePath()):(g=DvtStatusMeterGaugeRenderer._calcPointOnArc(a,
e,b),h=DvtStatusMeterGaugeRenderer._calcPointOnArc(a,e,b+c/2),k=DvtStatusMeterGaugeRenderer._calcPointOnArc(a,d,b),a=DvtStatusMeterGaugeRenderer._calcPointOnArc(a,d,b+c/2),e=DvtPathUtils.moveTo(g.x,g.y)+DvtPathUtils.arcTo(e,e,c/2,1,h.x,h.y)+DvtPathUtils.arcTo(e,e,c/2,1,g.x,g.y),0<d&&(e+=DvtPathUtils.moveTo(a.x,a.y)+DvtPathUtils.arcTo(d,d,c/2,0,k.x,k.y)+DvtPathUtils.arcTo(d,d,c/2,0,a.x,a.y)),e+=DvtPathUtils.closePath());return e};
var DvtStatusMeterGaugeIndicator=function(a,b,c,d,e,g){this.Init(a,b,c,d,e,g)};DvtObj.createSubclass(DvtStatusMeterGaugeIndicator,DvtRect,"DvtStatusMeterGaugeIndicator");DvtStatusMeterGaugeIndicator._MIN_CORNER_RADIUS=2.5;DvtStatusMeterGaugeIndicator.prototype.Init=function(a,b,c,d,e,g){DvtStatusMeterGaugeIndicator.superclass.Init.call(this,b);this._gauge=a;this._isVert="vertical"==a.getOptions().orientation;this.setCoords(c,d,e,g)};
DvtStatusMeterGaugeIndicator.prototype.setCoords=function(a,b,c,d){this._x1=a;this._x2=b;this._y1=c;this._y2=d;var e=Math.min(a,b),g=Math.min(c,d);a=Math.abs(a-b);c=Math.abs(d-c);this.setRect(e,g,a,c);e=(this._isVert?a:c)*(DvtGaugeDefaults.isSkyrosSkin(this._gauge)?.25:.15);e>=DvtStatusMeterGaugeIndicator._MIN_CORNER_RADIUS&&this.setCornerRadius(e,e)};DvtStatusMeterGaugeIndicator.prototype.getAnimationParams=function(){return[this._x1,this._x2,this._y1,this._y2]};
DvtStatusMeterGaugeIndicator.prototype.setAnimationParams=function(a){a&&4==a.length&&this.setCoords(a[0],a[1],a[2],a[3])};var DvtStatusMeterGaugeCircularIndicator=function(a,b,c,d,e,g){this.Init(a,b,c,d,e,g)};DvtObj.createSubclass(DvtStatusMeterGaugeCircularIndicator,DvtPath,"DvtStatusMeterGaugeCircularIndicator");DvtStatusMeterGaugeCircularIndicator.prototype.Init=function(a,b,c,d,e,g){DvtStatusMeterGaugeCircularIndicator.superclass.Init.call(this,a);this.setPath(b,c,d,e,g)};
DvtStatusMeterGaugeCircularIndicator.prototype.setPath=function(a,b,c,d,e){a&&a instanceof DvtRectangle?this._bounds=a:a=this._bounds;this._startAngle=b;this._angleExtent=c;this._innerRadius=d;this._outerRadius=e;this.setCmds(DvtStatusMeterGaugeRenderer.createCircularPathCmd(a,b,c,d,e))};DvtStatusMeterGaugeCircularIndicator.prototype.getAnimationParams=function(){return[this._bounds,this._startAngle,this._angleExtent,this._innerRadius,this._outerRadius]};
DvtStatusMeterGaugeCircularIndicator.prototype.setAnimationParams=function(a){a&&5==a.length&&this.setPath(a[0],a[1],a[2],a[3],a[4])};var DvtDialGauge=function(){};DvtObj.createSubclass(DvtDialGauge,DvtGauge,"DvtDialGauge");DvtDialGauge.newInstance=function(a,b,c){var d=new DvtDialGauge;d.Init(a,b,c);return d};DvtDialGauge.prototype.Init=function(a,b,c){DvtDialGauge.superclass.Init.call(this,a,b,c);this.Defaults=new DvtDialGaugeDefaults;this.__anchorPt=null};
DvtDialGauge.prototype.SetOptions=function(a){var b=a.background,c=a.indicator;"string"===typeof b&&(a.background=DvtGaugeStyleUtils.getDialBackground(b),a.background.images=a._backgroundImages);"string"===typeof c&&(a.indicator=DvtGaugeStyleUtils.getDialIndicator(c),a.indicator.images=a._indicatorImages);DvtDialGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(a))};DvtDialGauge.prototype.Render=function(a,b,c){DvtDialGaugeRenderer.render(this,a,b,c)};
DvtDialGauge.prototype.renderUpdate=function(){DvtDialGaugeRenderer.updateIndicatorAndLabel(this,this._container,this.Width,this.Height);var a=this.__getEventManager();a&&a.associate(this._editingOverlay,this.GetLogicalObject(),!0);this.UpdateAriaLiveValue(this._container)};
DvtDialGauge.prototype.CreateAnimationOnDisplay=function(a,b,c){b=[];for(var d=0;d<a.length;d++){var e=a[d],g=e.getAnimationParams(),h=DvtDialGaugeRenderer.__getStartAngle(this);e.setAngle(h);h=new DvtCustomAnimation(this.getCtx(),e,c);h.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,e,e.getAnimationParams,e.setAnimationParams,g);h.getAnimator().setEasing(function(a){return DvtEasing.backOut(a,.7)});b.push(h)}return new DvtParallelPlayable(this.getCtx(),b)};
DvtDialGauge.prototype.GetValueAt=function(a,b){var c=Math.atan2(b-this.__anchorPt.y,a-this.__anchorPt.x),d=DvtMath.radsToDegrees(c);0>=d&&(d+=360);var c=DvtAgent.isRightToLeft(this.getCtx()),e=this.getOptions().background,g=c?180+e.startAngle:360-e.startAngle,e=e.angleExtent,h=g+e;if(c)for(h=g,g-=e;0>g;)g+=360,h+=360;d+360>=g&&d+360<=h?d+=360:d>=g&&d<=h||(d=d>h?g+360-d<d-h?g:h:g-d<d+360-h?g:h);d=(d-g)/e;c&&(d=1-d);c=this.Options.min;return d*(this.Options.max-c)+c};
var DvtDialGaugeDefaults=function(){this.Init({skyros:DvtDialGaugeDefaults.VERSION_1,alta:{}})};DvtObj.createSubclass(DvtDialGaugeDefaults,DvtGaugeDefaults,"DvtDialGaugeDefaults");DvtDialGaugeDefaults.VERSION_1={background:{startAngle:180,angleExtent:180,indicatorLength:.7},metricLabel:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;")},tickLabel:{scaling:"auto",style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;")}};
var DvtDialGaugeRenderer={};DvtObj.createSubclass(DvtDialGaugeRenderer,DvtObj,"DvtDialGaugeRenderer");DvtDialGaugeRenderer.render=function(a,b,c,d){DvtGaugeDataUtils.hasData(a)?(c=new DvtRectangle(0,0,c,d),DvtDialGaugeRenderer._renderShape(a,b,c),DvtDialGaugeRenderer._renderLabel(a,b,c)):DvtGaugeRenderer.renderEmptyText(a,b,new DvtRectangle(0,0,c,d))};
DvtDialGaugeRenderer.updateIndicatorAndLabel=function(a,b,c,d){a.__indicatorContainer.setAngle(DvtDialGaugeRenderer._getRotation(a,a.getOptions().value));b.removeChild(a.__label);DvtDialGaugeRenderer._renderLabel(a,b,new DvtRectangle(0,0,c,d))};
DvtDialGaugeRenderer._renderShape=function(a,b,c){var d=a.getOptions(),e=DvtDialGaugeRenderer._createBackground(a,c);b.addChild(e);d.background.majorTickCount&&d.background.radius&&DvtDialGaugeRenderer._renderTickLabels(a,b,c);var g=DvtDialGaugeRenderer._createIndicator(a,c),h=new DvtContainer(a.getCtx()),k=new DvtDialGaugeIndicator(a.getCtx());b.addChild(h);h.addChild(k);k.addChild(g);var m=g.getDimensions(),n=DvtDialGaugeRenderer._getRotation(a,d.value),e=DvtDialGaugeRenderer._getBackgroundAnchorPoint(a,
c),t=DvtDialGaugeRenderer._getIndicatorAnchorPoint(a,c,m);c=DvtDialGaugeRenderer._getIndicatorScaleFactor(a,c,m);m=new DvtMatrix;m.translate(-t.x,-t.y);m.scale(c,c);g.setMatrix(m);k.setAngle(n);m=new DvtMatrix;m.translate(e.x,e.y);h.setMatrix(m);a.__shapes.push(k);a.__indicatorContainer=k;((d=d.shortDesc)||!1===a.getOptions().readOnly)&&a.__getEventManager().associate(b,new DvtSimpleObjPeer(null,d));a.__anchorPt=e};
DvtDialGaugeRenderer._createBackground=function(a,b){var c=a.getOptions().background,d=DvtAgent.isRightToLeft(a.getCtx()),e=DvtAgent.isTouchDevice(),g=e?2*b.w:b.w,h=e?2*b.h:b.h,k=c.images;if(k&&0<k.length){var m,n,t,e=[];for(m=0;m<k.length;m++){var u="rtl"==k[m].dir;d&&u?e.push(k[m]):d||u||e.push(k[m])}k=0<e.length?e:k;for(m=0;m<k.length;m++){var v=k[m],u=v.src,e=v.width,v=v.height,w=u&&-1<u.search(".svg");0==m&&(n=e,t=v);if(w||e>=g&&v>=h||m==k.length-1){var g=new DvtImage(a.getCtx(),u,0,0,e,v),x=
new DvtMatrix,h=Math.min(b.w/e,b.h/v),k=(b.w-h*e)/2;m=(b.h-h*v)/2;x.scale(h,h);x.translate(k,m);g.setMatrix(x);w&&DvtAgent.isPlatformWebkit()&&(u=DvtImageLoader.loadImage(a.getCtx(),u,DvtObj.createCallback(g,g.__setDimensions)))&&g.__setDimensions(u);b.x+=k;b.y+=m;b.w=h*e;b.h=h*v;isNaN(c.anchorX)||isNaN(c.anchorY)||(c._anchorX=d?b.x+b.w-b.w*c.anchorX/n:b.x+b.w*c.anchorX/n,c._anchorY=b.y+b.h*c.anchorY/t);c.metricLabelBounds&&(e={},e.width=b.w*c.metricLabelBounds.width/n,e.height=b.h*c.metricLabelBounds.height/
t,e.y=b.y+b.h*c.metricLabelBounds.y/t,e.x=d?b.x+b.w-b.w*c.metricLabelBounds.x/n-e.width:b.x+b.w*c.metricLabelBounds.x/n,c._metricLabelBounds=e);d=Math.min(b.w/n,b.h/t);c._radius=c.radius*d;c._tickLabelHeight=c.tickLabelHeight*b.h/t;c._tickLabelWidth=c.tickLabelWidth*b.w/n;return g}}}return null};
DvtDialGaugeRenderer._createIndicator=function(a,b){var c=a.getOptions().indicator,d=DvtDialGaugeRenderer._getIndicatorLength(a,b),e=DvtAgent.isTouchDevice()?2*d:d,g,h,k=c.images;if(k&&0<k.length)for(var m=0;m<k.length;m++){var n=k[m],d=n.src,t=n.width,n=n.height,u=d&&-1<d.search(".svg");0==m&&(g=t,h=n);if(u||n>=e||m==k.length-1)return e=new DvtImage(a.getCtx(),d,0,0,t,n),u&&DvtAgent.isPlatformWebkit()&&DvtImageLoader.loadImage(a.getCtx(),d,DvtObj.createCallback(e,e.__setDimensions))&&(e.setWidth(t),
e.setHeight(n)),isNaN(c.anchorX)||isNaN(c.anchorY)||(c._anchorX=c.anchorX*t/g,c._anchorY=c.anchorY*n/h),e}return null};DvtDialGaugeRenderer.__getStartAngle=function(a){var b=a.getOptions().background;a=DvtAgent.isRightToLeft(a.getCtx())?180-b.startAngle:b.startAngle;return Math.PI*(90-a)/180};
DvtDialGaugeRenderer._getRotation=function(a,b){var c=a.getOptions(),d=c.background,e=c.min,c=c.max;b=Math.max(Math.min(b,c),e);e=(b-e)/(c-e);c=DvtAgent.isRightToLeft(a.getCtx());return Math.PI*(90-((c?180-d.startAngle:d.startAngle)-e*(c?-d.angleExtent:d.angleExtent)))/180};DvtDialGaugeRenderer._getBackgroundAnchorPoint=function(a,b){var c=a.getOptions().background,d=c._anchorX,c=c._anchorY;return isNaN(d)||isNaN(c)?new DvtPoint(b.x+b.w/2,b.y+b.h/2):new DvtPoint(d,c)};
DvtDialGaugeRenderer._getIndicatorLength=function(a,b){var c=Math.min(b.w,b.h)/2;return a.getOptions().background.indicatorLength*c};DvtDialGaugeRenderer._getIndicatorAnchorPoint=function(a,b,c){b=a.getOptions().indicator;a=b._anchorX;b=b._anchorY;return isNaN(a)||isNaN(b)?new DvtPoint(c.x+c.w/2,c.y+c.h):new DvtPoint(a,b)};DvtDialGaugeRenderer._getIndicatorScaleFactor=function(a,b,c){return DvtDialGaugeRenderer._getIndicatorLength(a,b)/c.h};
DvtDialGaugeRenderer._renderLabel=function(a,b,c){var d=a.getOptions();if("on"==d.metricLabel.rendered){var e=DvtGaugeRenderer.getFormattedMetricLabel(d.value,a),g=DvtGaugeRenderer.getFormattedMetricLabel(d.min,a),h=DvtGaugeRenderer.getFormattedMetricLabel(d.max,a),k=c.x+c.w/2,m=c.y+c.h/2,n=c.w,t=c.h,u=d.background._metricLabelBounds;u&&(k=u.x+u.width/2,m=u.y+u.height/2,c.w=u.width,c.h=u.height);k=new DvtOutputText(a.getCtx(),e,k,m);!d.metricLabel.style.getStyle("color")&&d.background._isDark&&d.metricLabel.style.setStyle("color",
"#CCCCCC");k.setCSSStyle(d.metricLabel.style);d=(d=parseInt(d.metricLabel.style.getFontSize()))?parseInt(d):null;d||(d=DvtGaugeRenderer.calcLabelFontSize([e,g,h],k,c),k.setTextString(e),k.setFontSize(d));k.alignCenter();k.alignMiddle();DvtTextUtils.fitText(k,n,t,b)&&(a.__label=k,k.isTruncated()&&a.__getEventManager().associate(k,new DvtSimpleObjPeer(e)))}};
DvtDialGaugeRenderer._renderTickLabels=function(a,b,c){var d=a.getOptions(),e=DvtAgent.isRightToLeft(a.getCtx());if(d.background.radius&&d.background.majorTickCount){var g=d.background._radius,h=d.min,k=d.max,m=d.background.majorTickCount,n=12,t=new DvtRectangle(y,w,c.w,c.h),u=d.metricLabel.style.getStyle("font-size");d.background._tickLabelHeight&&!u&&(t.h=d.background._tickLabelHeight);d.background._tickLabelWidth&&!u&&(t.w=d.background._tickLabelWidth);if(!u)var v=new DvtOutputText(a.getCtx(),
"",y,w),n=DvtGaugeRenderer.calcLabelFontSize([DvtGaugeRenderer.formatTickLabelValue(d.max,a),DvtGaugeRenderer.formatTickLabelValue(d.min,a)],v,t);for(u=0;u<m;u++){y=h+Math.abs(k-h)*u/(m-1);e&&(y=h+Math.abs(k-h)*(m-1-u)/(m-1));var v=DvtGaugeRenderer.formatTickLabelValue(y,a),w=DvtDialGaugeRenderer._getRotation(a,y),x=DvtDialGaugeRenderer._getBackgroundAnchorPoint(a,c),y=x.x+g*Math.cos(w-Math.PI/2),w=x.y+g*Math.sin(w-Math.PI/2),v=new DvtOutputText(a.getCtx(),v,y,w);!d.tickLabel.style.getStyle("color")&&
d.background._isDark&&d.tickLabel.style.setStyle("color","#CCCCCC");v.setCSSStyle(d.tickLabel.style);d.tickLabel.style.getStyle("font-size")||v.setFontSize(n);v.alignCenter();v.alignMiddle();DvtTextUtils.fitText(v,t.w+.5,t.h+.5,b)&&v.isTruncated()&&a.__getEventManager().associate(v,new DvtSimpleObjPeer(v.getUntruncatedTextString()))}}};var DvtDialGaugeIndicator=function(a){this.Init(a)};DvtObj.createSubclass(DvtDialGaugeIndicator,DvtContainer,"DvtDialGaugeIndicator");
DvtDialGaugeIndicator.prototype.setAngle=function(a){var b=new DvtMatrix;b.rotate(a);this.setMatrix(b);this._angleRads=a};DvtDialGaugeIndicator.prototype.getAnimationParams=function(){return[this._angleRads]};DvtDialGaugeIndicator.prototype.setAnimationParams=function(a){a&&1==a.length&&this.setAngle(a[0])};var DvtRatingGauge=function(){};DvtObj.createSubclass(DvtRatingGauge,DvtGauge,"DvtRatingGauge");DvtRatingGauge.newInstance=function(a,b,c){var d=new DvtRatingGauge;d.Init(a,b,c);return d};
DvtRatingGauge.prototype.Init=function(a,b,c){DvtRatingGauge.superclass.Init.call(this,a,b,c);this.Defaults=new DvtRatingGaugeDefaults};DvtRatingGauge.prototype.SetOptions=function(a){DvtRatingGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(a))};
DvtRatingGauge.prototype.Render=function(a,b,c){var d=this.getOptions().__layout.outerGap,e=this.Options.max;this._size=Math.min(c-2*d,(b-2*d)/e);this._bounds=new DvtRectangle((this.Width-this._size*e)/2,d,this._size*e,this.Height-2*d);DvtRatingGaugeRenderer.render(this,a,b,c)};DvtRatingGauge.prototype.GetLogicalObject=function(){return new DvtRatingGaugePeer(this)};
DvtRatingGauge.prototype.GetValueAt=function(a,b){if(DvtGaugeDataUtils.hasData(this)){a=Math.max(Math.min(a,this._bounds.x+this._bounds.w),this._bounds.x);var c=0,c=DvtAgent.isRightToLeft(this.getCtx())?Math.max((this._bounds.x+this._bounds.w-a)/this._size,this.Options.min):Math.max((a-this._bounds.x)/this._size,this.Options.min);return DvtGaugeRenderer.adjustForStep(this.Options,c)}return null};
DvtRatingGauge.prototype.__processHoverStart=function(a,b){this.__updateClipRects(this.GetValueAt(a,b),"hover")};DvtRatingGauge.prototype.__processHoverEnd=function(a,b){this.__updateClipRects(this.Options.value,"render")};DvtRatingGauge.prototype.__processValueChangeStart=function(a,b){this.__processHoverStart(a,b)};
DvtRatingGauge.prototype.__processValueChangeMove=function(a,b){var c=this.GetValueAt(a,b);this.__updateClipRects(c,"hover");this.__dispatchEvent(new DvtValueChangeEvent(this.Options.value,c,!1))};DvtRatingGauge.prototype.__processValueChangeEnd=function(a,b){var c=this.Options.value;this.Options.value=this.GetValueAt(a,b);this.Options.changed=!0;this.render();this.__dispatchEvent(new DvtValueChangeEvent(c,this.Options.value,!1));this.__dispatchEvent(new DvtValueChangeEvent(c,this.Options.value,!0))};
DvtRatingGauge.prototype.__updateClipRects=function(a,b,c){if(DvtGaugeDataUtils.hasData(this)){c||(c=this._container);var d=DvtAgent.isRightToLeft(this.getCtx());a=Math.max(Math.min(a,this.Options.max),0);var e=0,g=a*this._size,h=a*this._size;"render"==b&&(e=a*this._size,g=0);d?(b=c.getChildAt(0),d=new DvtClipPath("unsel"+this.getId()),d.addRect(this._bounds.x,this._bounds.y,this._bounds.w-h,this._bounds.h),b.setClipPath(d),b=c.getChildAt(1),d=new DvtClipPath("sel"+this.getId()),d.addRect(this._bounds.x+
this._bounds.w-h,this._bounds.y,e,this._bounds.h),b.setClipPath(d),e=c.getChildAt(2),b=new DvtClipPath("hover"+this.getId()),b.addRect(this._bounds.x+this._bounds.w-h,this._bounds.y,g,this._bounds.h)):(b=c.getChildAt(0),d=new DvtClipPath("unsel"+this.getId()),d.addRect(this._bounds.x+h,this._bounds.y,this._bounds.w-h,this._bounds.h),b.setClipPath(d),b=c.getChildAt(1),d=new DvtClipPath("sel"+this.getId()),d.addRect(this._bounds.x,this._bounds.y,e,this._bounds.h),b.setClipPath(d),e=c.getChildAt(2),
b=new DvtClipPath("hover"+this.getId()),b.addRect(this._bounds.x,this._bounds.y,g,this._bounds.h));e.setClipPath(b);this.UpdateAriaLiveValue(c,a)}};DvtRatingGauge.prototype.CreateEventManager=function(){return new DvtRatingGaugeEventManager(this)};var DvtRatingGaugeDefaults=function(){this.Init({skyros:DvtRatingGaugeDefaults.VERSION_1,alta:DvtRatingGaugeDefaults.SKIN_ALTA})};DvtObj.createSubclass(DvtRatingGaugeDefaults,DvtGaugeDefaults,"DvtRatingGaugeDefaults");
DvtRatingGaugeDefaults.SKIN_ALTA={unselectedState:{shape:"star",color:"#C4CED7",borderColor:null},selectedState:{shape:"star",color:"#F8C15A",borderColor:null},hoverState:{shape:"star",color:"#007CC8",borderColor:null},changedState:{shape:"star",color:"#ED2C02",borderColor:null}};
DvtRatingGaugeDefaults.VERSION_1={min:0,max:5,unselectedState:{shape:"star",color:"#F2F2F2",borderColor:"#B6B6B6"},selectedState:{shape:"star",color:"#F8C15A",borderColor:"#F5A700"},hoverState:{shape:"star",color:"#66A7DA",borderColor:"#4A86C5"},changedState:{shape:"star",color:"#F8C15A",borderColor:"#959595"},step:1};var DvtRatingGaugePeer=function(a){this.Init();this._gauge=a};DvtObj.createSubclass(DvtRatingGaugePeer,DvtSimpleObjPeer,"DvtRatingGaugePeer");
DvtRatingGaugePeer.prototype.getDatatip=function(a,b,c){a=this._gauge.getOptions();b=this._gauge.__getEventManager().isEditing?DvtGaugeDataUtils.getValueThresholdIndex(this._gauge,this._gauge.GetValueAt(b,c)):DvtGaugeDataUtils.getValueThresholdIndex(this._gauge);return(b=DvtGaugeDataUtils.getThreshold(this._gauge,b))&&b.shortDesc?b.shortDesc:a.shortDesc};var DvtRatingGaugeRenderer={};DvtObj.createSubclass(DvtRatingGaugeRenderer,DvtObj,"DvtRatingGaugeRenderer");
DvtRatingGaugeRenderer._VALID_SHAPES=["circle","diamond","rectangle","star","triangle"];
DvtRatingGaugeRenderer.render=function(a,b,c,d){if(DvtGaugeDataUtils.hasData(a)){var e=DvtAgent.isRightToLeft(a.getCtx()),g=a.getOptions(),h=g.__layout.outerGap,k=g.max,m=Math.min(d-2*h,(c-2*h)/k);c=new DvtRectangle((c-m*k)/2,h,m*k,d-2*h);d=DvtGaugeDataUtils.getValueThresholdIndex(a);d=DvtGaugeDataUtils.getThreshold(a,d);var n=g.selectedState.color,t=g.changedState.color,u=g.selectedState.borderColor,v=g.changedState.borderColor;d&&d.color&&(t=n=d.color);d&&d.borderColor&&(v=u=d.borderColor);h={value:0,
type:g.unselectedState.shape,color:g.unselectedState.color,borderColor:g.unselectedState.borderColor,visualEffects:g.visualEffects};n={value:0,type:g.selectedState.shape,color:n,borderColor:u,visualEffects:g.visualEffects};t={value:0,type:g.changedState.shape,color:t,borderColor:v,visualEffects:g.visualEffects};v={value:0,type:g.hoverState.shape,color:g.hoverState.color,borderColor:g.hoverState.borderColor,visualEffects:g.visualEffects};"dot"==g.unselectedState.shape&&(h.type="circle",h.visualEffects=
"none",h.size=.05);u=new DvtContainer(a.getCtx());b.addChild(u);var w=new DvtContainer(a.getCtx());b.addChild(w);var x=new DvtContainer(a.getCtx());b.addChild(x);a.__updateClipRects(g.value,"render",b);for(var y=0;y<k;y++){if("none"!=g.unselectedState.shape){var z=DvtLedGauge.newInstance(a.getCtx(),null,null,!0);u.addChild(z);e?z.setTranslate(c.x+c.w-(y+1)*m,c.y+c.h/2-m/2):z.setTranslate(c.x+y*m,c.y+c.h/2-m/2);-1==DvtArrayUtils.getIndex(DvtRatingGaugeRenderer._VALID_SHAPES,h.type)&&(h.type="star");
z.render(h,m,m)}g.changed?(z=DvtLedGauge.newInstance(a.getCtx(),null,null,!0),w.addChild(z),e?z.setTranslate(c.x+c.w-(y+1)*m,c.y+c.h/2-m/2):z.setTranslate(c.x+y*m,c.y+c.h/2-m/2),-1==DvtArrayUtils.getIndex(DvtRatingGaugeRenderer._VALID_SHAPES,t.type)&&(t.type="star"),z.render(t,m,m)):(z=DvtLedGauge.newInstance(a.getCtx(),null,null,!0),w.addChild(z),e?z.setTranslate(c.x+c.w-(y+1)*m,c.y+c.h/2-m/2):z.setTranslate(c.x+y*m,c.y+c.h/2-m/2),-1==DvtArrayUtils.getIndex(DvtRatingGaugeRenderer._VALID_SHAPES,n.type)&&
(n.type="star"),z.render(n,m,m));z=DvtLedGauge.newInstance(a.getCtx(),null,null,!0);x.addChild(z);e?z.setTranslate(c.x+c.w-(y+1)*m,c.y+c.h/2-m/2):z.setTranslate(c.x+y*m,c.y+c.h/2-m/2);-1==DvtArrayUtils.getIndex(DvtRatingGaugeRenderer._VALID_SHAPES,v.type)&&(v.type="star");z.render(v,m,m)}e=new DvtRect(a.getCtx(),c.x,c.y,c.w,c.h);e.setInvisibleFill();b.addChild(e);(d&&d.shortDesc?d.shortDesc:g.shortDesc)&&a.__getEventManager().associate(e,new DvtRatingGaugePeer(a))}else DvtGaugeRenderer.renderEmptyText(a,
b,new DvtRectangle(0,0,c,d))};var DvtRatingGaugeEventManager=function(a){this.Init(a.getCtx(),a.__dispatchEvent,a);this._gauge=a;this._bValueChanged=this.isEditing=!1;this._isIE=DvtAgent.isPlatformIE();this._stopAutoMouseOut=!1};DvtObj.createSubclass(DvtRatingGaugeEventManager,DvtGaugeEventManager,"DvtRatingGaugeEventManager");
DvtRatingGaugeEventManager.prototype.OnMouseOver=function(a){if(!1===this._gauge.getOptions().readOnly&&!this._bValueChanged){var b=this.GetRelativePosition(a.pageX,a.pageY);this._gauge.__processHoverStart(b.x,b.y);this.isEditing=!0}DvtGaugeEventManager.superclass.OnMouseOver.call(this,a)};
DvtRatingGaugeEventManager.prototype.OnMouseOut=function(a){if(!1===this._gauge.getOptions().readOnly){if(this._isIE&&this._bValueChanged&&this._stopAutoMouseOut){this._stopAutoMouseOut=!1;return}var b=this.GetRelativePosition(a.pageX,a.pageY);this._gauge.__processHoverEnd(b.x,b.y);this._bValueChanged=!1}DvtGaugeEventManager.superclass.OnMouseOut.call(this,a)};
DvtRatingGaugeEventManager.prototype.OnMouseMove=function(a){var b=this.GetRelativePosition(a.pageX,a.pageY);!1===this._gauge.getOptions().readOnly&&this._bValueChanged&&this._gauge.getOptions().value!=this._gauge.GetValueAt(b.x,b.y)&&(this.isEditing=!0,this._bValueChanged=!1);DvtRatingGaugeEventManager.superclass.OnMouseMove.call(this,a)};
DvtRatingGaugeEventManager.prototype.OnMouseDown=function(a){this._bValueChanged||(!1===this._gauge.getOptions().readOnly?(this.isEditing=!0,this.hideTooltip(),a=this.GetRelativePosition(a.pageX,a.pageY),this._gauge.__processValueChangeStart(a.x,a.y)):DvtGaugeEventManager.superclass.OnMouseDown.call(this,a))};
DvtRatingGaugeEventManager.prototype.OnMouseUp=function(a){this.isEditing&&(!1===this._gauge.getOptions().readOnly?(this.isEditing=!1,a=this.GetRelativePosition(a.pageX,a.pageY),this._gauge.__processValueChangeEnd(a.x,a.y),this._gauge.__processHoverEnd(a.x,a.y),this._bValueChanged=!0,this._isIE&&(this._stopAutoMouseOut=!0)):DvtGaugeEventManager.superclass.OnMouseUp.call(this,a))};DvtRatingGaugeEventManager.prototype.IsShowingTooltipWhileEditing=function(){return!0};