(function(){function a(a,b,c,d){if(!b.isTreeNodeIterator()){var e={};b=b.getRowKey().toString().replace("'","\\'");e[c]=d.appendIndex(b);a.__pushElReplacements(e)}}function b(a,b){b.isTreeNodeIterator()||a.__popElReplacements()}function c(a,b,c){var d=a.getVolatileState();void 0===d&&(d={},a.setVolatileState(d));d[b]=c}function d(a){if(null==a)return a;if("string"===typeof a||a instanceof String)a=-1<a.indexOf(",")?a.split(","):-1<a.indexOf(" ")?a.split(" "):[a];else if("number"===typeof a||a instanceof
Number)a=[a];return a}function e(a,b){var d=b.getAttributeExpression("selectedRowKeys");b.setAttributeResolvedValue("_selectedRowKey",a);void 0===d||null==d?c(b,"selectedRowKey",a):adf.mf.api.amx.getPageRootNode().visit(new adf.mf.api.amx.VisitContext({amxNodes:[b]}),function(b,c){adf.mf.el.setValue({name:d,value:[a]},function(){},null);return adf.mf.api.amx.VisitResult.COMPLETE})}function g(a){var b=a.getAttributeExpression("selectedRowKeys");if(void 0===b||null==b){if(a=a.getVolatileState(),null!=
a)return a=a.selectedRowKey,void 0===a?null:a}else if(a=d(adf.mf.el.getLocalValue(b)),null!=a)return a[0];return null}function h(a,b){null!=a.getTag().getAttribute("selectionListener")&&(b.classList.add("amx-listItem-selected"),b.setAttribute("aria-selected",!0))}function k(a){a.classList.remove("amx-listItem-selected");a.setAttribute("aria-selected",!1)}function m(a,b){for(var c=a.childNodes,d=c.length,e=b.length,g=[],h=0,k=0;k<d&&h<e;++k)for(var m=c[k],n=0;n<e;++n)if(m.classList.contains(b[n])){g[n]=
m;++h;break}return g}function n(a){var b=null,c=null,d=null,e=null,g=null,h=m(a,["amx-listItem-handle"])[0];null!=h&&adf.mf.api.amx.addDragListener(h,{start:function(h,k){k.requestDragLock(this,!0,!0);d=c=void 0;e=a.offsetHeight;g=a.parentNode.scrollHeight+1+e/2;var m=adf.mf.internal.amx._getNonPrimitiveElementData(a,"amxNode");null!=m&&(c=m.getStampKey());a.classList.add("move");b=document.createElement("div");b.className="amx-listItem amx-listItem-drop-spacer";v(a.parentNode,a,b)},drag:function(c,
d){c.preventDefault();c.stopPropagation();d.preventDefault=!0;d.stopPropagation=!0;var h=adf.mf.internal.amx.getElementTop(a),k=d.pageY,m=h+d.deltaPageY,h=a.parentNode,n=adf.mf.internal.amx.getElementTop(h);m<n&&(m=n);m<=n+5?(h.setAttribute("data-stop",!1),u(h,-1)):m+e>=n+h.offsetHeight-5?(h.setAttribute("data-stop",!1),u(h,1)):h.setAttribute("data-stop",!0);m=e/2;k=Math.min(g,k-m-n+h.scrollTop);a.style.top=k+"px";h.classList.add("notSelect");for(var t=h.childNodes,k=[],n=0,w=t.length;n<w;++n){var x=
t[n];!x.classList.contains("amx-listItem")||x.classList.contains("amx-listItem-drop-spacer")||x.classList.contains("move")||x.classList.contains("amx-listItem-moreRows")||k.push(x)}n=0;for(t=k.length;n<t;++n){var w=k[n],x=w.offsetTop,y=w.offsetHeight,z=a.offsetTop+m;if(x<=z&&z<=x+y){z<=x+y/2?h.insertBefore(b,w):v(h,w,b);break}}},end:function(e,g){var h=a.cloneNode(!0),k=a.parentNode;k.appendChild(h);a.style.display="none";var m=b.nextSibling;null!=m&&(m=adf.mf.internal.amx._getNonPrimitiveElementData(m,
"amxNode"),null!=m&&(d=m.getStampKey()));$(h).animate({opacity:0,height:0},function(){adf.mf.api.amx.removeDomNode(h);v(k,b,a);a.style.display="";a.classList.remove("move");a.style.top=""});$(b).animate({height:32},function(){adf.mf.api.amx.removeDomNode(b)});k.classList.remove("notSelect");k.setAttribute("data-stop",!0);if("undefined"!==typeof c){var m=new adf.mf.internal.amx.MoveEvent(c,d),n=t(a);null!=n&&(n=adf.mf.internal.amx._getNonPrimitiveElementData(n,"amxNode"),adf.mf.api.amx.processAmxEvent(n,
"move",void 0,void 0,m))}}})}function t(a){if(void 0!==typeof a)for(a=a.parentNode;null!=a;){if(a.classList.contains("amx-listView"))return a;a=a.parentNode}}function u(a,b){b=1==b?1:-1;var c=adf.mf.api.amx.isValueTrue(a.getAttribute("data-stop"));a.scrollTop+=5*b;c||setTimeout(function(){u(a,b)},300)}function v(a,b,c){b=b.nextSibling;null==b?a.appendChild(c):a.insertBefore(c,b)}function w(a){for(var b=0,c=["webkit","ms","moz","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=
window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var c=(new Date).getTime(),d=Math.max(0,16-(c-b)),e=window.setTimeout(function(){a(c+d)},d);b=c+d;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimationFrame(a)}var x=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,
"listView");x.prototype.createChildrenNodes=function(c){c.setAttributeResolvedValue("_selectedRowKey",g(c));if(!c.isAttributeDefined("value"))return!1;var d;if(adf.mf.environment.profile.dtMode)d=[{},{},{}],c.setAttributeResolvedValue("value",d);else{d=c.getAttribute("value");if(void 0===d)return c.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER),c.setAttributeResolvedValue("_placeholder","yes"),adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.DEFERRED;if(null==d)return!0}var e=Infinity,h=null,
k=c.getAttribute("fetchSize");null!=k&&adf.mf.internal.amx.isFiniteNumber(parseInt(k,10))&&(e=parseInt(k,10),0>e?e=Infinity:0==e&&(e=25));c.setAttributeResolvedValue("fetchSize",e);var k=adf.mf.api.amx.createIterator(d),m=c.getClientState();null!=m&&(h=m.maxRows,null!=h&&c.setAttributeResolvedValue("maxRows",h));null==h&&(0==c.isAttributeDefined("maxRows")?(h=e,c.setAttributeResolvedValue("maxRows",e)):(h=parseInt(c.getAttribute("maxRows"),10),isNaN(h)&&(h=e,c.setAttributeResolvedValue("maxRows",
e))));c.setAttributeResolvedValue("_oldMaxRows",h);if(k.getTotalCount()>k.getAvailableCount()&&k.getAvailableCount()<h)return adf.mf.api.amx.showLoadingIndicator(),adf.mf.api.amx.bulkLoadProviders(d,0,h,function(){try{var a=new adf.mf.api.amx.AmxNodeUpdateArguments;a.setAffectedAttribute(c,"value");a.setAffectedAttribute(c,"_bulkLoad");adf.mf.api.amx.markNodeForUpdate(a)}finally{adf.mf.api.amx.hideLoadingIndicator()}},function(a,b){adf.mf.api.adf.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,
"createChildrenNodes","MSG_ITERATOR_FIRST_NEXT_ERROR",a,b);adf.mf.api.amx.hideLoadingIndicator()}),c.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER),c.setAttributeResolvedValue("_placeholder","yes"),adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.DEFERRED;c.setAttributeResolvedValue("_placeholder","nomore");c.createStampedChildren(null,["header","footer"]);d=c.getAttribute("var");e=c.getAttributeExpression("value",!1,!0);for(m=0;m<h&&k.hasNext();++m){var n=k.next(),t=c.createStampedChildren(k.getRowKey(),
[null]);adf.mf.el.pushVariable(d,n);try{a(c,k,d,e),this._evaluateDividerAttribute(c,t[0])}finally{adf.mf.el.popVariable(d),b(c,k)}}c.setAttributeResolvedValue("_rowCount",k.getCurrentIndex()+1);c.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER);return!0};x.prototype.attributeChangeResult=function(a,b,c){switch(b){case "dividerAttribute":return adf.mf.api.amx.AmxNodeChangeResult.REPLACE;case "value":return b=c.getCollectionChange("value"),c.hasChanged("_bulkLoad")||null!=b&&b.isItemized()?this._updateChildrenForCollectionChange(a,
c,b):adf.mf.api.amx.AmxNodeChangeResult.REPLACE;case "_bulkLoad":return adf.mf.api.amx.AmxNodeChangeResult.NONE;case "maxRows":return this._updateChildrenForCollectionChange(a,c,c.getCollectionChange("value"));case "showMoreStrategy":return adf.mf.api.amx.AmxNodeChangeResult.REFRESH;case "editMode":return a=a.getAttribute("editMode"),c=c.getOldValue("editMode"),a==c?adf.mf.api.amx.AmxNodeChangeResult.NONE:adf.mf.api.amx.isValueTrue(a)?adf.mf.api.amx.AmxNodeChangeResult.REFRESH:adf.mf.api.amx.AmxNodeChangeResult.RERENDER;
case "selectedRowKeys":return a.setAttributeResolvedValue("_selectedRowKey",g(a)),adf.mf.api.amx.AmxNodeChangeResult.REFRESH;default:return x.superclass.attributeChangeResult.call(this,a,b,c)}};x.prototype.visitChildren=function(c,d,e){var g=c.getAttribute("value");if(void 0===g)return c.visitStampedChildren(null,null,null,d,e);if(c.visitStampedChildren(null,["header","footer"],null,d,e))return!0;for(var g=adf.mf.api.amx.createIterator(g),h=c.getAttribute("var"),k=c.getAttributeExpression("value",
!1,!0);g.hasNext();){var m=g.next();adf.mf.el.pushVariable(h,m);try{if(a(c,g,h,k),c.visitStampedChildren(g.getRowKey(),[null],null,d,e))return!0}finally{b(c,g),adf.mf.el.popVariable(h)}}return!1};x.prototype.render=function(a,b){var c=document.createElement("div");c.className="amx-listView";"cards"!=a.getAttribute("layout")||adf.mf.api.amx.isValueTrue(a.getAttribute("editMode"))?c.classList.add("amx-listView-rows"):c.classList.add("amx-listView-cards");if("yes"==a.getAttribute("_placeholder")){var d=
document.createElement("div");d.id=b+"_placeholder";d.className="amx-listView-placeholder amx-deferred-loading";var e=adf.mf.resource.getInfoString("AMXInfoBundle","MSG_LOADING");d.setAttribute("aria-label",e);c.appendChild(d);a.setState(adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED);return c}this._renderHeaderFacet(a,c);var g=document.createElement("div");c.appendChild(g);g.className="amx-listView-main";d=document.createElement("div");g.appendChild(d);d.setAttribute("role","list");d.id=b+"_innerList";
d.className="amx-listView-innerList";switch(a.getAttribute("halign")){case "start":d.style.textAlign="rtl"==document.documentElement.dir?"right":"left";break;case "end":d.style.textAlign="rtl"==document.documentElement.dir?"left":"right";break;case "center":d.style.textAlign="center";break;case "left":d.style.textAlign="left";break;case "right":d.style.textAlign="right"}adf.mf.api.amx.enableScrolling(d);var k=a.getAttribute("_selectedRowKey"),e=a.getAttribute("maxRows"),m=a.getAttribute("dividerAttribute");
null!=m&&""!=m?"off"!==a.getAttribute("sectionIndex")&&"firstLetter"===a.getAttribute("dividerMode")&&(a.setAttributeResolvedValue("_indexBarRegister",{}),m=document.createElement("div"),m.className="amx-listView-index",g.appendChild(m)):(d.classList.add("amx-listView-content"),g=a.getAttribute("contentStyle"),null!=g&&(m=d.getAttribute("style"),null!=m&&""!=m?d.setAttribute("style",m+";"+g):d.setAttribute("style",g)));g=a.getAttribute("value");m=!1;if(void 0!==g){for(var k=adf.mf.api.amx.createIterator(g),
n=m=null,g=0;g<e&&k.hasNext();++g){k.next();var t=a.getRenderedChildren(null,k.getRowKey());0<t.length&&(t=t[0],n=this._renderStampedItem(a,d,t,m,n),m=t)}m=k.getTotalCount()>e||!k.isAllDataLoaded();adf.mf.api.amx.isValueTrue(a.getAttribute("showDividerCount"))&&null!=a.getAttribute("_dividerAttrEl")&&this._displayDividerCount(d);adf.mf.api.amx.isValueTrue(a.getAttribute("editMode"))&&d.classList.add("amx-listView-editMode")}else for(e=a.renderDescendants(),g=0,n=e.length;g<n;++g){var t=e[g],u=""+
g;k==u&&h(a,t);t.setAttribute("data-listViewRk",u);d.appendChild(t)}this._addOrRemoveLoadMoreRowsDom(a,b,d,m);this._createScrollHandler(a,d);this._appendFooter(a,c);return c};x.prototype.__getTestJavaScriptURI=function(a){return"js/testing/amx-listView.js"};x.prototype._evaluateDividerAttribute=function(a,b){var c=a.getAttribute("dividerAttribute");if(null!=c&&""!=c){var d=a.getAttribute("_dividerAttrEl");null==d&&(d="#{"+a.getAttribute("var")+"."+c+"}",a.setAttributeResolvedValue("_dividerAttrEl",
d));c=this._getCurrentDivider(a,d);b.setAttributeResolvedValue("_dividerValue",c)}};x.prototype._endLoadMoreRows=function(a){var b=a.getAttribute("_loadMoreRowsPerf");if(null!=b){var c=a.getAttribute("_loadMoreRowsPerfTimeout");a.setAttributeResolvedValue("_loadMoreRowsPerf",null);a.setAttributeResolvedValue("_loadMoreRowsPerfTimeout",null);null!=c&&window.clearTimeout(c);b.stop()}};x.prototype._createChildForKey=function(a,b,c,d){c.setCurrentRowKey(b);return c.getCurrentIndex()<d&&(created=a.createStampedChildren(b,
[null]),1==created.length)?(this._evaluateDividerAttribute(a,created[0]),!0):!1};x.prototype._updateChildrenForCollectionChange=function(c,d,e){var g=c.getAttribute("value");if(void 0===g)return adf.mf.api.amx.AmxNodeChangeResult.REPLACE;var h=!1,k={created:{},removed:[],updated:[],rowsAdded:!1};d.setCustomValue("amxNodeCollectionChanges",k);d=c.getAttribute("_rowCount");var m=c.getAttribute("maxRows"),n,t,u,v,w,x=adf.mf.api.amx.createIterator(g),y=c.getAttribute("var"),z=c.getAttributeExpression("value",
!1,!0);if(null!=e){var A=e.getDirtiedKeys();if(0<A.length){var B=[];n=0;for(P=A.length;n<P;++n){var C=A[n];x.setCurrentRowKey(C);x.getCurrentIndex()<m&&B.push(C)}if(0<B.length){var P=B.length,U=0,N=!1;for(n=0;n<P;++n)g.setCurrentRowKey(B[n]),g.nextSet(function(){if(!N&&++U==P){var a=new adf.mf.api.amx.AmxNodeUpdateArguments;a.setAffectedAttribute(c,"value");var b=new adf.mf.api.amx.AmxCollectionChange({itemized:!0,updated:B});a.setCollectionChanges(c.getId(),"value",b);adf.mf.api.amx.markNodeForUpdate(a)}},
function(){N=!0})}}var A=e.getUpdatedKeys(),C=e.getCreatedKeys(),T=e.getDeletedKeys();if(0<C.length||0<A.length||0<T.length){n=0;for(e=T.length;n<e;++n)if(t=c.removeChildrenByKey(T[n]),0<t.length)for(--d,h=!0,v=0,u=t.length;v<u;++v)k.removed.push(t[v].getId());n=0;for(e=A.length;n<e;++n)if(t=A[n],x.setCurrentRowKey(t)){adf.mf.el.pushVariable(y,x.getCurrent());try{a(c,x,y,z);var Q=c.getChildren(null,t).slice();v=0;for(u=Q.length;v<u;++v){c.removeChild(Q[v]);w=c.createStampedChildren(t,[null]);if(1!=
w.length)return adf.mf.api.amx.AmxNodeChangeResult.REPLACE;this._evaluateDividerAttribute(c,w[0])}}finally{adf.mf.el.popVariable(y),b(c,x)}k.updated.push(t)}n=0;for(e=C.length;n<e;++n)if(t=C[n],x.setCurrentRowKey(t),x.getCurrentIndex()<m&&0==c.getChildren(null,t).length){adf.mf.el.pushVariable(y,x.getCurrent());try{if(a(c,x,y,z),this._createChildForKey(c,t,x,m))++d,h=!0,k.created[t]=!0,k.rowsAdded=!0;else return adf.mf.api.amx.AmxNodeChangeResult.REPLACE}finally{adf.mf.el.popVariable(y),b(c,x)}}if(d>
m){for(x.setCurrentIndex(m-1);d>m&&x.hasNext();)if(x.next(),t=x.getRowKey(),t=c.removeChildrenByKey(t),0<t.length)for(--d,h=!0,v=0,u=t.length;v<u;++v)k.removed.push(t[v].getId());if(d>m)return adf.mf.api.amx.AmxNodeChangeResult.REPLACE}}}if(d<m&&x.getTotalCount()>d){x.setCurrentIndex(d-1);for(n=d;n<m&&x.hasNext();++n){u=x.next();t=x.getRowKey();adf.mf.el.pushVariable(y,u);try{if(a(c,x,y,z),this._createChildForKey(c,t,x,m))++d,h=!0,k.created[t]=!0,k.rowsAdded=!0;else return adf.mf.api.amx.AmxNodeChangeResult.REPLACE}finally{adf.mf.el.popVariable(y),
b(c,x)}}x.getTotalCount()>x.getAvailableCount()&&x.getAvailableCount()<m&&(adf.mf.api.amx.showLoadingIndicator(),adf.mf.api.amx.bulkLoadProviders(g,0,m,function(){try{var a=new adf.mf.api.amx.AmxNodeUpdateArguments;a.setAffectedAttribute(c,"value");a.setAffectedAttribute(c,"_bulkLoad");adf.mf.api.amx.markNodeForUpdate(a)}finally{adf.mf.api.amx.hideLoadingIndicator()}},function(a,b){adf.mf.log.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"createChildrenNodes","MSG_ITERATOR_FIRST_NEXT_ERROR",
a,b);adf.mf.api.amx.hideLoadingIndicator()}))}h&&c.setAttributeResolvedValue("_rowCount",d);return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};x.prototype._createScrollHandler=function(a,b){var c=!1,d=a.getAttribute("showMoreStrategy");if("autoScroll"==d||"forceScroll"==d)c=!0;var e=!1;"viewport"==a.getAttribute("bufferStrategy")&&(e=!0);adf.mf.api.amx.removeBubbleEventListener(b,"scroll");var g=a.getAttribute("_useSticky"),g=!1;if(!0===g||c||e){var h=function(a){var b=a.data[0],d=a.data[1],h=b.getId();
a=a.target;if(a.id==h+"_innerList"){var k=a.offsetHeight;if(null!=k&&0!=k){k=a.classList.contains("amx-listView-editMode");if(!k&&!0===g)for(var m=a.childNodes,n=0;n<m.length;n++){var t=m[n],u=t.childNodes[0],v=t.offsetTop,x=t.offsetHeight,y=u.offsetHeight,z=a.scrollTop;v<=z&&z<=v+x-y?t.classList.contains("amx-static")||t.classList.add("amx-static"):t.classList.contains("amx-static")&&t.classList.remove("amx-static");z>v+x-y?(u.classList.contains("amx-bottom")||u.classList.add("amx-bottom"),u.style.opacity=
Math.max(1-(z-v-x+y)/y,.5)):u.classList.contains("amx-bottom")&&(u.classList.remove("amx-bottom"),u.style.opacity=1)}!k&&c&&(h=document.getElementById(h+"_loadMoreRows"),null!=h&&a.scrollHeight!=a.offsetHeight&&(h.classList.contains("amx-listItem-scrollStrategy")||h.classList.add("amx-listItem-scrollStrategy"),k=0,"cards"!=b.getAttribute("layout")||adf.mf.api.amx.isValueTrue(b.getAttribute("editMode"))||(m=a.querySelectorAll(".amx-listItem.amx-node:last-child"),null!=m&&(n=m.length,0==n&&(m=a.querySelectorAll(".amx-listItem.amx-node")),
null!=m&&(n=m.length,1<n&&(k=m[n-1].offsetHeight)))),a.scrollTop>a.scrollHeight-a.offsetHeight-h.offsetHeight-k&&!h.classList.contains("amx-listItem-scrollStrategyLoading")&&(h.classList.add("amx-listItem-scrollStrategyLoading"),w(function(){b.getTypeHandler()._handleMoreRowsAction(b)}))));e&&d._updateViewportBuffer(b,a)}}};adf.mf.api.amx.addBubbleEventListener(b,"scroll",h,[a,this]);var k=this;w(function(){h({target:b,data:[a,k]})})}};x.prototype._updateViewportBuffer=function(a,b){var c=parseInt(a.getAttribute("bufferSize"),
10);if(isNaN(c)||0>c)c=100;for(var d=Math.max(0,b.scrollTop),e=b.offsetHeight,d=Math.min(d,b.scrollHeight-e),g=b.childNodes,h=d-c,c=d+e+c,d={outsideViewport:[],insideViewport:[]},e=0,k=g.length;e<k;++e){var m=g[e];if(!m.classList.contains("amx-listItem-moreRows"))if(m.classList.contains("amx-listView-group"))for(var n=m.childNodes,t=0,u=n.length;t<u;++t){var v=n[t],w=m.offsetTop;v.classList.contains("amx-listView-divider")||v.classList.contains("amx-listItem-undisclosed")||(m.classList.contains("amx-static")&&
(w=0),this._gatherViewportChildInfo(v,h,c,w,d))}else this._gatherViewportChildInfo(m,h,c,0,d)}this._adjustViewportChildren(d.outsideViewport,!1);this._adjustViewportChildren(d.insideViewport,!0)};x.prototype._gatherViewportChildInfo=function(a,b,c,d,e){d=a.offsetTop+d;d+a.offsetHeight<b?e.outsideViewport.push(a):d>c?e.outsideViewport.push(a):e.insideViewport.push(a)};x.prototype._adjustViewportChildren=function(a,b){i=0;for(aboveCount=a.length;i<aboveCount;++i){var c=a[i];b?c.classList.contains("amx-listItem-outsideOfBuffer")&&
(c.style.height=c.getAttribute("data-sh"),c.style.width=c.getAttribute("data-sw"),c.classList.remove("amx-listItem-outsideOfBuffer")):c.classList.contains("amx-listItem-outsideOfBuffer")||(c.setAttribute("data-sh",c.style.height),c.setAttribute("data-sw",c.style.width),c.style.height=c.offsetHeight+"px",c.style.width=c.offsetWidth+"px",c.classList.add("amx-listItem-outsideOfBuffer"))}};x.prototype.postDisplay=function(a,b){if("yes"!=b.getAttribute("_placeholder")){"nomore"==b.getAttribute("_placeholder")&&
(b.setAttributeResolvedValue("_placeholder",null),b.getState()==adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED&&b.setState(adf.mf.api.amx.AmxNodeStates.RENDERED));var d=a.querySelector(".amx-listView-innerList");this._restoreScrollPosition(b,d);z(a,b);d={innerListElement:d,typeHandler:this,amxNode:b};c(b,"resizeData",d);adf.mf.api.amx.addBubbleEventListener(window,"resize",this._handleResize,d);adf.mf.api.amx.addBubbleEventListener(a,"resize",this._handleResize,d)}};x.prototype._handleResize=function(a){var b=
a.data.innerListElement,c=a.data.typeHandler;a=a.data.amxNode;null!=b&&"viewport"==a.getAttribute("bufferStrategy")&&c._updateViewportBuffer(a,b)};var y=function(a){a=a.data;var b=a.getId(),b=document.getElementById(b),c=b.querySelector(".amx-listView-index");null!=c&&(c._amxLinkHeight=null,c._amxTotalHeight=null);z(b,a,!1)},z=function(a,b,c){var d=a.querySelector(".amx-listView-index"),e=document.getElementById(b.getId()+"_innerList");if(null!==d){var g=b.getAttribute("_indexBarRegister");if(g){a.classList.add("amx-listView-has-index");
var h=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_STRING").toUpperCase(),k=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_OTHERS").toUpperCase();a=String.fromCharCode(9679);adf.mf.api.amx.emptyHtmlElement(d);var m=document.createElement("div");m.className="amx-extendedTarget";d.appendChild(m);var m=A(e,d,h.charAt(0),null!=g[h.charAt(0)],"amx-listView-indexCharacter",null),n=d._amxLinkHeight;null==n&&(n=m.offsetHeight,d._amxLinkHeight=n);if(!1!==c){adf.mf.api.amx.addBubbleEventListener(window,
"resize",y,b);var t=void 0;adf.mf.api.amx.addDragListener(d,{start:function(a,b){e.classList.add("amx-listView-scrollable-disabled");t=void 0},drag:function(a,b){a.preventDefault();a.stopPropagation();var c=adf.mf.internal.amx.getElementTop(d);t=B(d,e,b.pageY-c,n,h,k,g,t,!1)},end:function(a,b){e.classList.remove("amx-listView-scrollable-disabled")}});adf.mf.api.amx.addBubbleEventListener(d,"tap",function(a){a.preventDefault();a.stopPropagation();var b=adf.mf.internal.amx.getElementTop(d);t=B(d,e,
(a.touches&&0<a.touches.length?a.touches[0].pageY:a.changedTouches&&0<a.changedTouches.length?a.changedTouches[0].pageY:a.pageY)-b,n,h,k,g,t,!0)})}b=d._amxTotalHeight;null==b&&(b=d.offsetHeight,d._amxTotalHeight=b);0===b&&(b=n);var u=Math.floor(b/n),m=h.length,v=m+1;u<v&&1==u%2&&--u;if(4>u)adf.mf.api.amx.removeDomNode(d);else{b=m-1;c=0;u<v&&(c=Math.floor((u-3)/2),u=c+1,m=m-2-c,v=m/u,c=Math.floor(v),m>c*u+1&&(c=Math.ceil(v)));m=h[0];u="_";v=c+1;for(c=1;c<b;++c)0==c%v&&c+v<=b?(m+=h[c],u+="_"):(m+="_",
u+=h[c]);var u=u+"_",m=m+h[b],v=!1,w=null;for(c=1;c<=b;++c){var x=m[c];"_"==x?(x=u[c],v=v||g[x],null==w&&(w=[]),w.push(x)):(null!=w&&A(e,d,a,v,"amx-listView-indexBullet",w.join("")),v=void 0!==g[x],A(e,d,x,v,"amx-listView-indexCharacter",x),v=!1,w=null)}A(e,d,k,null!=g[k],"amx-listView-indexOther",null)}}else adf.mf.api.amx.removeDomNode(d)}},A=function(a,b,c,d,e,g){a=document.createElement("div");var h="amx-listView-indexItem";d&&(h+=" amx-listView-indexItem-active");a.className=h+" "+e;a.textContent=
""+c;null==g&&(g=c);a.setAttribute("data-range",g);b.appendChild(a);return a},B=function(a,b,c,d,e,g,h,k,m){a=Math.round(c/((a.offsetHeight-d)/e.length));c=e.length;if(a<c){if(k!==a||m)if(h[e.charAt(a)])k=a,h[e.charAt(a)]();else for(k=void 0,m=0;m<c;++m){d=a-m;var n=a+m;if(n>=c){h[g]?(k=-1,h[g]()):(k=void 0,b.scrollTop=b.scrollHeight);break}else if(0<=d&&h[e.charAt(d)]){k=d;h[e.charAt(d)]();break}else if(n<c&&h[e.charAt(n)]){k=n;h[e.charAt(n)]();break}}}else if(-1!==k||m)h[g]?(k=-1,h[g]()):(k=void 0,
b.scrollTop=b.scrollHeight);return k};x.prototype.refresh=function(a,b,c){x.superclass.refresh.call(this,a,b,c);if("yes"!=a.getAttribute("_placeholder")){c=a.getId();var d=document.getElementById(c),e=document.getElementById(c+"_innerList");b.getCollectionChange("value");var g=b.getCustomValue("amxNodeCollectionChanges");null!=g&&this._refreshCollectionChanges(a,g,d,e);if(b.hasChanged("editMode")){if(null!=a&&void 0!==a.getAttribute("value")){e.classList.add("amx-listView-editMode");var m=t(e).querySelector(".amx-listView-index");
m&&(adf.mf.api.amx.removeDomNode(m),adf.mf.api.amx.removeBubbleEventListener(window,"resize",y,a));for(var m=e.childNodes,u=0;u<m.length;++u){var v=m[u];if(v.classList.contains("amx-listView-group")){for(var w=v.childNodes,z=0;z<w.length;++z){var A=w[z];v.removeChild(A);!A.classList.contains("amx-listItem")||A.classList.contains("amx-listItem-moreRows")||A.classList.contains("amx-listView-divider")||e.appendChild(A);--z}adf.mf.api.amx.removeDomNode(v);--u}else v.classList.contains("amx-listItem")&&
!v.classList.contains("amx-listItem-moreRows")?(w=document.createElement("div"),w.className="amx-listItem-handle",v.appendChild(w),n(v)):v.classList.contains("amx-listView-divider")&&(adf.mf.api.amx.removeDomNode(v),--u)}this._createScrollHandler(a,e)}d.classList.contains("amx-listView-cards")&&(d.classList.remove("amx-listView-cards"),d.classList.add("amx-listView-rows"))}b.hasChanged("selectedRowKeys")&&(m=a.getAttribute("_selectedRowKey"),null!=b.getOldValue("selectedRowKeys")&&(d=d.querySelector(".amx-listItem-selected"),
null!=d&&k(d)),d=a.getChildren(null,m),0<d.length&&(d=document.getElementById(d[0].getId()),null!=d&&h(a,d)));if(b.hasChanged("showMoreStrategy")||b.hasChanged("value")||null!=g)d=!1,m=a.getAttribute("value"),null!=m&&(d=adf.mf.api.amx.createIterator(m),m=a.getAttribute("maxRows"),d=d.getTotalCount()>m||!d.isAllDataLoaded()),this._addOrRemoveLoadMoreRowsDom(a,c,e,d),b.hasChanged("showMoreStrategy")&&this._createScrollHandler(a,e),"viewport"==a.getAttribute("bufferStrategy")&&this._updateViewportBuffer(a,
e);this._storeClientState(a,e);null!=g&&g.rowsAdded&&null!=a.getAttribute("_loadMoreRowsPerf")&&this._endLoadMoreRows(a)}};x.prototype.preDestroy=function(a,b){if(null==b.getAttribute("_placeholder")){this._storeClientState(b,document.getElementById(b.getId()+"_innerList"));var c=b.getVolatileState();c&&(c=c.resizeData)&&adf.mf.api.amx.removeBubbleEventListener(window,"resize",this._handleResize,c);adf.mf.api.amx.removeBubbleEventListener(window,"resize",y,b)}};x.prototype.destroy=function(a,b){if(null==
b.getAttribute("_placeholder")){var c=a.querySelector(".amx-listView-innerList");c&&adf.mf.api.amx.removeBubbleEventListener(c,"scroll");a.querySelector(".amx-listView-index")&&adf.mf.api.amx.removeBubbleEventListener(window,"resize",y,b)}};x.prototype._refreshCollectionChanges=function(a,b,c,d){var e,g,h,k,m,n=b.updated;g=0;for(h=n.length;g<h;++g)e=n[g],k=a.getRenderedChildren(null,e),0<k.length&&(m=k[0],m.rerender());m=b.removed;g=0;for(h=m.length;g<h;++g)e=document.getElementById(m[g]),null!=e&&
null!=e.parentNode&&(k=e.parentNode,adf.mf.api.amx.removeDomNode(e),k.classList.contains("amx-listView-group")&&null==k.querySelector(".amx-listItem.amx-node")&&adf.mf.api.amx.removeDomNode(k));g=b.created;if(b.rowsAdded){b=a.getAttribute("value");b=adf.mf.api.amx.createIterator(b);for(h=null;b.hasNext();)b.next(),e=b.getRowKey(),m=null,k=a.getRenderedChildren(null,e),0<k.length&&(m=k[0]),null!=m&&1==g[e]&&(e=null==h?null:document.getElementById(h.getId()),this._renderStampedItem(a,d,m,h,e)),null!=
m&&(h=m);b=document.getElementById(a.getId()+"_loadMoreRows");null!=b&&b.classList.remove("amx-listItem-scrollStrategyLoading")}a.getState()==adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED&&a.setState(adf.mf.api.amx.AmxNodeStates.RENDERED);z(c,a,!1);adf.mf.api.amx.isValueTrue(a.getAttribute("showDividerCount"))&&null!=a.getAttribute("_dividerAttrEl")&&this._displayDividerCount(d)};x.prototype._storeClientState=function(a,b){if(null!=b){var c=b.scrollLeft,d=b.scrollTop,e=a.getClientState()||{};if(null!=
c||null!=d)e.scrollLeft=c,e.scrollTop=d;e.maxRows=a.getAttribute("maxRows");a.setClientState(e)}};x.prototype._restoreScrollPosition=function(a,b){var c=a.getClientState();if(null!=c){var e=c.scrollLeft;null!=e&&(b.scrollLeft=e);c=c.scrollTop;null!=c&&(b.scrollTop=c)}else if(c=d(a.getAttribute("initialScrollRowKeys")),c=null!=c?c[0]:null,null!=c&&(c=(""+c).replace(/[\\]/g,"\\\\"),c=c.replace(/["]/g,'\\"'),c=b.querySelector('.amx-listItem[data-listViewRk\x3d"'+c+'"]')))b.scrollTop=c.offsetTop};x.prototype._getDividerElement=
function(a,b,c,d,e){var g=null,h=c.getAttribute("_dividerValue");if(null!=h){var k,m=null==d?null:d.getAttribute("_dividerValue"),n=null==e?null:e.parentNode;d=c.getClientState()||{};g=null;if(h==m)k=n,g=e.nextSibling;else{e=null==n?b.querySelector(".amx-listView-group"):n.nextSibling;if(null!=e&&e.classList.contains("amx-listView-group")&&(m=e.querySelector(".amx-listItem"),null!=m)){var t=adf.mf.api.amx.AmxNode.getAmxNodeForElement(m);h==t.getAttribute("_dividerValue")&&(k=e,g=m)}null==k&&(d.isHidden=
!1,k=document.createElement("div"),k.classList.add("amx-listView-group"),k.classList.add("amx-listView-content"),e=a.getAttribute("contentStyle"),null!=e&&k.setAttribute("style",e),this._appendToListView(b,k,n),this._createDivider(a,h,k),n=a.getAttribute("_indexBarRegister"),null!=n&&null==n[h]&&(n[h]=this._createIndexBarHandler(b,k)),a.setAttributeResolvedValue("_indexBarRegister",n))}d.isHidden=k.classList.contains("amx-listView-undisclosed");c.setClientState(d);g={insertBefore:g,element:k}}return g};
x.prototype._renderStampedItem=function(a,b,c,d,e){d=this._getDividerElement(a,b,c,d,e);a=c.render();null!=a&&(null!=d?(c.getClientState().isHidden&&a.classList.add("amx-listItem-undisclosed"),null!=d.insertBefore?d.element.insertBefore(a,d.insertBefore):d.element.appendChild(a)):null!=e?this._appendToListView(b,a,e):(c=b.querySelector(".amx-listItem.amx-node"),null==c?this._appendToListView(b,a,null):b.insertBefore(a,c)));return a};x.prototype._createIndexBarHandler=function(a,b){if(b&&a)return function(){a.scrollTop=
b.offsetTop}};x.prototype._displayDividerCount=function(a){a=a.childNodes;for(var b=0,c=a.length;b<c;++b){var d=a[b];if(d.classList.contains("amx-listView-group")){for(var e=d.childNodes,g=0,h=0;h<e.length;h++)!e[h].classList.contains("amx-listItem")||e[h].classList.contains("amx-listItem-moreRows")||e[h].classList.contains("amx-listView-divider")||g++;d=d.querySelectorAll(".amx-listView-divider");for(e=0;e<d.length;e++)if(h=d[e].querySelector(".amx-listView-dividerCounterText"))h.textContent=g}}};
x.prototype._collapseDividerIfNecessary=function(a,b,c){if(a.getAttribute("collapsedDividers")&&(a=a.getAttribute("collapsedDividers"),null!=a&&-1!=a.indexOf(c)))for(b=b.childNodes,c=0,a=b.length;c<a;++c){var d=b[c];d.classList.contains("amx-listView-disclosedIcon")&&(d.classList.remove("amx-listView-disclosedIcon"),d.classList.add("amx-listView-undisclosedIcon"),d=d.parentNode.parentNode,d.classList.contains("amx-listView-undisclosed")||d.classList.add("amx-listView-undisclosed"))}};x.prototype._renderHeaderFacet=
function(a,b,c){a=a.getRenderedChildren("header");if(a.length){c=document.createElement("div");c.className="amx-listView-header";b.appendChild(c);b=document.createElement("div");b.className="amx-listView-facet-header";c.appendChild(b);c=0;for(var d=a.length;c<d;++c){var e=a[c].render();e&&b.appendChild(e)}}};x.prototype._appendToListView=function(a,b,c){c?v(a,c,b):a.appendChild(b)};x.prototype._appendFooter=function(a,b){var c=a.getRenderedChildren("footer");if(c.length){var d=document.createElement("div");
d.className="amx-listView-footer";b.appendChild(d);var e=document.createElement("div");e.className="amx-listView-facet-footer";d.appendChild(e);for(var d=0,g=c.length;d<g;++d){var h=c[d].render();h&&e.appendChild(h)}}};x.prototype._getCurrentDivider=function(a,b){var c=adf.mf.el.getLocalValue(b);if(adf.mf.environment.profile.dtMode)return b;if(void 0===c)throw new adf.mf.PropertyNotFoundException(adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_LABEL_UNKNOWN_DIVIDER_ATTRIBUTE",a.getAttribute("dividerAttribute")));
if("firstLetter"===a.getAttribute("dividerMode")&&null!=c){var c=c.charAt(0),c=c.toUpperCase(),d=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_STRING").toUpperCase(),e=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_OTHERS").toUpperCase(),g=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_ACCENT_MAP").toUpperCase();if(-1<d.indexOf(c))return""+c;d=g.indexOf(c);if(0<d){for(;"|"!==g.charAt(d)&&"|"!==g.charAt(--d);)c=g.charAt(d);return c}return""+
e}return""+c};x.prototype._createDivider=function(a,b,c){var d=document.createElement("div");c.appendChild(d);d.setAttribute("tabindex","0");if(adf.mf.api.amx.isValueTrue(a.getAttribute("collapsibleDividers"))){if(d.className="amx-listView-divider",c=document.createElement("div"),c.className="amx-listView-disclosedIcon",c.setAttribute("role","button"),c.setAttribute("aria-expanded","true"),d.appendChild(c),c=document.createElement("div"),c.setAttribute("role","heading"),c.className="amx-listView-dividerText",
c.textContent=b,d.appendChild(c),adf.mf.api.amx.isValueTrue(a.getAttribute("showDividerCount"))){c=document.createElement("div");c.className="amx-listView-dividerCounter";d.appendChild(c);var e=document.createElement("div");e.className="amx-listView-dividerCounterText";c.appendChild(e)}}else d.className="amx-listView-divider amx-listView-nonCollapsibleDivider",c=document.createElement("div"),c.setAttribute("role","heading"),c.className="amx-listView-nonCollapsibleDivider amx-listView-dividerText",
c.textContent=b,d.appendChild(c),adf.mf.api.amx.isValueTrue(a.getAttribute("showDividerCount"))&&(c=document.createElement("div"),c.className="amx-listView-dividerCounter",d.appendChild(c),e=document.createElement("div"),e.className="amx-listView-dividerCounterText",c.appendChild(e));adf.mf.internal.amx._setNonPrimitiveElementData(d,"items",[]);if(adf.mf.api.amx.isValueTrue(a.getAttribute("collapsibleDividers"))){this._collapseDividerIfNecessary(a,d,b);var g=this;adf.mf.api.amx.addDragListener(d,
{start:function(a,b){},drag:function(a,b){},end:function(a,b){},threshold:5});adf.mf.api.amx.addBubbleEventListener(d,"tap",function(b){if(adf.mf.api.amx.acceptEvent()){var c=this;w(function(){return function(){for(var b=c.nextSibling,d=!1,e=b.className;null!=b&&-1==e.indexOf("amx-listItem-moreRows")&&-1!=e.indexOf("amx-listItem")&&-1==e.indexOf("amx-listView-divider");){var e=adf.mf.internal.amx._getNonPrimitiveElementData(b,"amxNode"),h=e.getClientState();null==h&&(h={});b.classList.contains("amx-listItem-undisclosed")?
(b.classList.remove("amx-listItem-undisclosed"),h.isHidden=!1):(b.classList.add("amx-listItem-undisclosed"),d=h.isHidden=!0);e.setClientState(h);b=b.nextSibling;e=null!=b?b.className:""}e=a.getId();b=document.getElementById(e+"_innerList");!0===d&&b.scrollTop>c.parentNode.offsetTop&&(c.classList.remove("amx-bottom"),b.scrollTop=c.parentNode.offsetTop);b.scrollHeight<=b.offsetHeight&&(d=document.getElementById(e+"_loadMoreRows"),null!=d&&d.classList.remove("amx-listItem-scrollStrategy"));d=[a,g];e=
document.createEvent("HTMLEvents");e.initEvent("scroll",!0,!0);e.view=window;e.altKey=!1;e.ctrlKey=!1;e.shiftKey=!1;e.metaKey=!1;e.keyCode=0;e.charCode="a";null!=d&&(e.triggerExtra=d);b.dispatchEvent(e)}}());b=c.childNodes;for(var d=0,e=b.length;d<e;++d){var h=b[d];h.classList.contains("amx-listView-disclosedIcon")?(h.classList.remove("amx-listView-disclosedIcon"),h.classList.add("amx-listView-undisclosedIcon"),h.setAttribute("aria-expanded","false"),h=h.parentNode.parentNode,h.classList.add("amx-listView-undisclosed")):
h.classList.contains("amx-listView-undisclosedIcon")&&(h.classList.remove("amx-listView-undisclosedIcon"),h.classList.add("amx-listView-disclosedIcon"),h.setAttribute("aria-expanded","true"),h=h.parentNode.parentNode,h.classList.remove("amx-listView-undisclosed"))}}})}return d};x.prototype._createAndAppendTheMoreRowsDom=function(a,b,c,d){var e=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_MSG_LOAD_MORE_ROWS"),g=document.createElement("div");g.id=b+"_loadMoreRows";g.setAttribute("role",
"button");g.setAttribute("tabindex","0");d&&c.scrollHeight<=c.offsetHeight&&(d=!1);d?(g.className="amx-listItem amx-listItem-moreRows amx-listItem-scrollStrategy",g.setAttribute("aria-label",e)):g.className="amx-listItem amx-listItem-moreRows";b=document.createElement("span");b.appendChild(document.createTextNode(e));b.className="amx-outputText";g.appendChild(b);c.appendChild(g);adf.mf.api.amx.addBubbleEventListener(g,"tap",this._handleMoreRowsTap,a)};x.prototype._addOrRemoveLoadMoreRowsDom=function(a,
b,c,d){var e=document.getElementById(b+"_loadMoreRows"),g=a.getAttribute("showMoreStrategy");"off"==g?d=!1:"forceLink"==g?d=!0:"forceScroll"==g&&(d=!0);g="autoScroll"==g||"forceScroll"==g;document.getElementById(b);var h=a.getAttribute("_renderedScrollStrategy");a.setAttributeResolvedValue("_renderedScrollStrategy",g);d&&null==e?this._createAndAppendTheMoreRowsDom(a,b,c,g):d||null==e?null!=e&&h!=g&&(adf.mf.api.amx.removeDomNode(e),this._createAndAppendTheMoreRowsDom(a,b,c,g)):adf.mf.api.amx.removeDomNode(e)};
x.prototype._handleMoreRowsTap=function(a){a=a.data;a.getTypeHandler()._handleMoreRowsAction(a)};x.prototype._queueRangeChangeListener=function(a,b,c,d){if(null!=a.getAttributeExpression("rangeChangeListener")){var e=a.getId(),g=null;if(null!=b&&(g=b.getRowKey(),0<c)){var h=b.getRowKey();b.setCurrentIndex(c-1);g=b.getRowKey();null!=h&&b.setCurrentRowKey(h)}b=null;c=a.getAttributeExpression("value");null!=c&&(b=adf.mf.util.getContextFreeExpression(c));d=new adf.mf.api.amx.RangeChangeEvent(e,b,g,d);
adf.mf.api.amx.processAmxEvent(a,"rangeChange",void 0,void 0,d)}};x.prototype._handleMoreRowsAction=function(a){var b=a.getAttribute("fetchSize"),c=a.getAttribute("maxRows"),d=a.getAttribute("value"),e=adf.mf.internal.perf.startOperation("amx:listView.loadMoreRows","Load more rows for list view with ID "+a.getId());a.setAttributeResolvedValue("_loadMoreRowsPerf",e);e=window.setTimeout(function(){null!=a.getAttribute("_loadMoreRowsPerf")&&a.getTypeHandler()._endLoadMoreRows(a)},1E4);a.setAttributeResolvedValue("_loadMoreRowsPerfTimeout",
e);if(void 0===b||void 0===c||void 0===d)this._queueRangeChangeListener(a,null,0,0);else if(Infinity==c&&Infinity==b)this._queueRangeChangeListener(a,null,0,0);else{var g=c;adf.mf.api.amx.showLoadingIndicator();if(Infinity!=c&&0<b){a.setAttributeResolvedValue("_oldMaxRows",g);c+=b;a.setAttributeResolvedValue("maxRows",c);e=document.getElementById(a.getId()+"_innerList");this._storeClientState(a,e);var e=adf.mf.api.amx.createIterator(d),h=e.getAvailableCount(),k=e.getTotalCount();(k>h||!e.isAllDataLoaded())&&
h<c?(this._queueRangeChangeListener(a,e,h,b),e.isTreeNodeIterator()?(a.setState(adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED),adf.mf.api.amx.bulkLoadProviders(d,g,c,function(){try{var b=a.getAttribute("_oldMaxRows");if(g==b){var c=new adf.mf.api.amx.AmxNodeUpdateArguments;c.setAffectedAttribute(a,"maxRows");adf.mf.api.amx.markNodeForUpdate(c)}}finally{adf.mf.api.amx.hideLoadingIndicator()}},function(a,b){adf.mf.api.adf.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"_handleMoreRowsAction",
"MSG_ITERATOR_FIRST_NEXT_ERROR",a,b);adf.mf.api.amx.hideLoadingIndicator()})):adf.mf.api.amx.hideLoadingIndicator()):(k<=h&&h<c&&null!=a.getAttributeExpression("rangeChangeListener")?this._queueRangeChangeListener(a,e,h,b):(b=new adf.mf.api.amx.AmxNodeUpdateArguments,b.setAffectedAttribute(a,"maxRows"),adf.mf.api.amx.markNodeForUpdate(b)),adf.mf.api.amx.hideLoadingIndicator())}}};var C=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"listItem");C.prototype.render=function(a,
b){var c=document.createElement("div"),d=a.getAttribute("shortDesc");c.setAttribute("tabindex","0");null!=d&&c.setAttribute("title",d);adf.mf.api.amx.isValueFalse(a.getAttribute("showLinkIcon"))?c.className="amx-listItem-noCaret":(d=document.createElement("div"),d.className="amx-listItem-caret",c.appendChild(d));null!=a.getAttribute("action")?c.setAttribute("role","button listitem"):c.setAttribute("role","listitem");for(var d=a.renderDescendants(),e=0,g=d.length;e<g;++e)c.appendChild(d[e]);adf.mf.api.amx.enableAmxEvent(a,
c,"swipe");adf.mf.api.amx.enableAmxEvent(a,c,"tapHold");d=a.getParent();e=d.getAttribute("_selectedRowKey");null!==e&&e==a.getStampKey()&&h(d,c);c.setAttribute("data-listViewRk",a.getStampKey());d=a.getClientState();null!=d&&1==d.isHidden&&c.classList.add("amx-listItem-undisclosed");d=a.getParent();void 0!==d.getAttribute("value")&&adf.mf.api.amx.isValueTrue(d.getAttribute("editMode"))&&(d=document.createElement("div"),d.className="amx-listItem-handle",c.appendChild(d),n(c));adf.mf.api.amx.addBubbleEventListener(c,
"tap",this._handleTap,{elementId:b,itemAmxNode:a});return c};C.prototype._handleTap=function(a){a.stopPropagation();a.preventDefault();var b=document.getElementById(a.data.elementId),c=t(b),d=a.data.itemAmxNode;a=d.getParent();var g=a.getAttribute("_selectedRowKey"),m=b.getAttribute("data-listViewRk");c.classList.contains("amx-listView-editMode")||b.classList.contains("amx-listItem-moreRows")||(c=c.querySelector(".amx-listItem-selected"),null!=c&&k(c),h(a,b),e(m,a),adf.mf.api.amx.isValueTrue(a.getAttribute("editMode"))||
(adf.mf.api.amx.acceptEvent()&&(c=new adf.mf.api.amx.SelectionEvent(g,[m]),adf.mf.api.amx.processAmxEvent(a,"selection",void 0,void 0,c)),adf.mf.api.amx.validate(b,function(){if(adf.mf.api.amx.acceptEvent()){var a=new adf.mf.api.amx.ActionEvent;adf.mf.api.amx.processAmxEvent(d,"action",void 0,void 0,a,function(){var a=d.getAttributeExpression("action",!0);null!=a&&adf.mf.api.amx.doNavigation(a)})}})))};C=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"iterator");C.prototype.createChildrenNodes=
function(a){if(!a.isAttributeDefined("value"))return!1;var b;if(adf.mf.environment.profile.dtMode)b=[{},{},{}],a.setAttributeResolvedValue("value",b);else{b=a.getAttribute("value");if(void 0===b)return a.setState(adf.mf.api.amx.AmxNodeStates.INITIAL),!0;if(null==b)return!0}var c=adf.mf.api.amx.createIterator(b);if(c.getTotalCount()>c.getAvailableCount())return adf.mf.api.amx.showLoadingIndicator(),adf.mf.api.amx.bulkLoadProviders(b,0,-1,function(){try{var b=new adf.mf.api.amx.AmxNodeUpdateArguments;
b.setAffectedAttribute(a,"value");b.setAffectedAttribute(a,"_bulkLoad");adf.mf.api.amx.markNodeForUpdate(b)}finally{adf.mf.api.amx.hideLoadingIndicator()}},function(a,b){adf.mf.log.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"createChildrenNodes","MSG_ITERATOR_FIRST_NEXT_ERROR",a,b);adf.mf.api.amx.hideLoadingIndicator()}),a.setState(adf.mf.api.amx.AmxNodeStates.INITIAL),!0;for(;c.hasNext();)c.next(),a.createStampedChildren(c.getRowKey(),[null]);a.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER);
return!0};C.prototype.updateChildren=function(a,b){if(b.hasChanged("value")){var c=b.getCollectionChange("value");if(null!=c&&c.isItemized()&&0==c.getCreatedKeys().length&&0==c.getDeletedKeys().length&&0==c.getDirtiedKeys().length){for(var c=c.getUpdatedKeys(),d=0,e=c.length;d<e;++d){for(var g=c[d],h=a.removeChildrenByKey(g),k=0,m=h.length;k<m;++k)adf.mf.api.amx.removeDomNode(document.getElementById(h[k].getId()));a.createStampedChildren(g,[null])}return adf.mf.api.amx.AmxNodeChangeResult.RERENDER}return adf.mf.api.amx.AmxNodeChangeResult.REPLACE}return adf.mf.api.amx.AmxNodeChangeResult.RERENDER};
C.prototype.visitChildren=function(c,d,e){for(var g=c.getAttribute("value"),g=adf.mf.api.amx.createIterator(g),h=c.getAttribute("var"),k=c.getAttributeExpression("value",!1,!0);g.hasNext();){var m=g.next();adf.mf.el.pushVariable(h,m);try{if(a(c,g,h,k),c.visitStampedChildren(g.getRowKey(),[null],null,d,e))return!0}finally{adf.mf.el.popVariable(h),b(c,g)}}return!1};C.prototype.isFlattenable=function(a){return!0}})();