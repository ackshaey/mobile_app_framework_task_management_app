(function(){window.adf||(window.adf={});window.adf.shared=window.adf.shared||{};window.adf.shared.impl=window.adf.shared.impl||{};window.adf.shared.impl.masonryLayout=window.adf.shared.impl.masonryLayout||{};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon=function(a,b,c,d,e,g){var h=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon;null==h._agentTypeAndVersion&&(h._agentTypeAndVersion=h._getAgentTypeAndVersion(navigator.userAgent));this._elem=a;this._rtl=b;this._automationEnabled=
c;d&&d.tiles&&(this._tilesSelector=d.tiles);e&&(e.transitionComponentResizeToStyleClass&&(this._transitionComponentResizeToStyleClass=e.transitionComponentResizeToStyleClass),e.transitionComponentResizeToFastStyleClass&&(this._transitionComponentResizeToFastStyleClass=e.transitionComponentResizeToFastStyleClass),e.transitionMoveToStyleClass&&(this._transitionMoveToStyleClass=e.transitionMoveToStyleClass),e.transitionMoveToFastStyleClass&&(this._transitionMoveToFastStyleClass=e.transitionMoveToFastStyleClass),
e.transitionHideFromStyleClass&&(this._transitionHideFromStyleClass=e.transitionHideFromStyleClass),e.transitionHideToStyleClass&&(this._transitionHideToStyleClass=e.transitionHideToStyleClass),e.transitionShowFromStyleClass&&(this._transitionShowFromStyleClass=e.transitionShowFromStyleClass),e.transitionShowToStyleClass&&(this._transitionShowToStyleClass=e.transitionShowToStyleClass),e.transitionResizeToStyleClass&&(this._transitionResizeToStyleClass=e.transitionResizeToStyleClass));g&&(g.addStyleClassName&&
(this._addStyleClassNameFunc=g.addStyleClassName),g.removeStyleClassName&&(this._removeStyleClassNameFunc=g.removeStyleClassName),g.getSizeStyleClassName&&(this._getSizeStyleClassNameFunc=g.getSizeStyleClassName),g.getTileSpan&&(this._getTileSpanFunc=g.getTileSpan),g.showTileOnEndFunc&&(this._showTileOnEndFunc=g.showTileOnEndFunc),g.hideTileOnEndFunc&&(this._hideTileOnEndFunc=g.hideTileOnEndFunc),g.layoutOnEndFunc&&(this._layoutOnEndFunc=g.layoutOnEndFunc));b=document.createElement("div");c=b.style;
c.display="inline-block";c.overflow="hidden";c.visibility="hidden";d=document.createElement("div");c=d.style;c.display="inline-block";b.appendChild(d);a.insertBefore(b,a.firstChild);this._sizeDivWrapper=b;this._sizeDiv=d;var k=this;this._handleTransitionEndFunc=function(a){k._handleTransitionEnd(a)};this._hideTilesFunc=function(){k._hideTiles()};this._handleHideTransitionEndFunc=function(a){k._handleHideTransitionEnd(a)};this._handleShowTransitionEndFunc=function(a){k._handleShowTransitionEnd(a)}};
window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype.setup=function(a,b){var c=!1;a?c=this._layout()?!0:!1:(this._transitionStart(b),c=this._transitionLayout());return c};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype.destroy=function(){this._elem.removeChild(this._sizeDivWrapper);this._layoutOnEndFunc=this._hideTileOnEndFunc=this._showTileOnEndFunc=this._getTileSpanFunc=this._getSizeStyleClassNameFunc=this._removeStyleClassNameFunc=this._addStyleClassNameFunc=this._elem=
this._arFireHideOnEnd=this._arInfoletsToHide=this._arInfoletsToShow=this._arInfoletsToResize=this._arMovedInfolets=this._handleShowTransitionEndFunc=this._handleHideTranitionEndFunc=this._hideTilesFunc=this._handleTransitionEndFunc=this._sizeDiv=this._sizeDivWrapper=null};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype.resizeTile=function(a,b){var c=this._elem.querySelector(a);if(c){this._arInfoletsToResize||(this._arInfoletsToResize=[]);var d=this._arInfoletsToResize;d.push(c);
d.push(b);this._resizingInfolet=!0;this._queueRelayout()}};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype.insertTileDomElem=function(a,b){var c=this._getTileChildren(),d=null;0<=b&&b<c.length&&(d=c[b]);this._elem.insertBefore(a,d);this._queueRelayout()};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype.showTile=function(a){if(a=this._elem.querySelector(a))this._arInfoletsToShow||(this._arInfoletsToShow=[]),this._arInfoletsToShow.push(a),this._showingInfolets=!0,
a=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon,this._layoutPhase!==a._PHASE_HIDE&&this._layoutPhase!==a._PHASE_LAYOUT?this._queueRelayout():this._showingInfolets=!1};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype.hideTile=function(a){if(a=this._elem.querySelector(a))this._arInfoletsToHide||(this._arInfoletsToHide=[]),this._arInfoletsToHide.push(a),this._hidingInfolets=!0,this._queueRelayout()};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype.resizeNotify=
function(){this._resizingInfolet||this._hidingInfolets||this._showingInfolets||(this._transitionStart(!1),this._transitionLayout())};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype.getCellSize=function(){return this._cellSize};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype.isAnimationEnabled=function(){if(!this._cachedAnimationEnabled){if(this._automationEnabled)this._animationEnabled=!1;else{var a=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon;this._animationEnabled=
a._isMinimumAgentMet(a._agentTypeAndVersion[0],a._agentTypeAndVersion[1],"gecko",16,"trident",6,"webkit",533.1)}this._cachedAnimationEnabled=!0}return this._animationEnabled};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._getElemSize=function(a){var b=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon,c=b._getComputedStyle(a),d=b._getCSSLengthAsInt(c.marginLeft)+b._getCSSLengthAsInt(c.marginRight),b=b._getCSSLengthAsInt(c.marginTop)+b._getCSSLengthAsInt(c.marginBottom);return{w:a.offsetWidth+
d,h:a.offsetHeight+b}};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._getElemInsets=function(a){var b=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon;a=b._getComputedStyle(a);return{paddingLeft:b._getCSSLengthAsInt(a.paddingLeft),paddingRight:b._getCSSLengthAsInt(a.paddingRight),paddingTop:b._getCSSLengthAsInt(a.paddingTop),paddingBottom:b._getCSSLengthAsInt(a.paddingBottom),borderLeftWidth:b._getCSSLengthAsInt(a.borderLeftWidth),borderRightWidth:b._getCSSLengthAsInt(a.borderRightWidth),
borderTopWidth:b._getCSSLengthAsInt(a.borderTopWidth),borderBottomWidth:b._getCSSLengthAsInt(a.borderBottomWidth)}};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._getComputedStyle=function(a){var b=a.ownerDocument.defaultView,c=null;return c=b?b.getComputedStyle(a,null):a.currentStyle};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._getCSSLengthAsInt=function(a){return 0<a.length&&"auto"!=a?(a=parseInt(a,10),isNaN(a)&&(a=0),a):0};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._addBubbleEventListener=
function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._removeBubbleEventListener=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._arrayIndexOf=function(a,b){if(a)for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._isMinimumAgentMet=
function(a,b){var c=arguments.length;if(0==c%2)for(var d=2;d<=c-2;d+=2)if(a==arguments[d]){if(b>=arguments[1+d])return!0;break}return!1};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._getAgentTypeAndVersion=function(a){var b=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._parseFloatVersion,c=null,d=-1;a=a.toLowerCase();-1!=a.indexOf("msie")||-1!=a.indexOf("trident")?(c="trident",d=b(a,/trident\/(\d+[.]\d+)/),-1==d&&(d=b(a,/msie (\d+\.\d+);/),-1==d&&(d=b(a,/msie (\d+\.\d+)b;/)),
d-=4),null!=document.documentMode&&(d=Math.min(d,document.documentMode-4))):-1!=a.indexOf("applewebkit")?(c="webkit",d=b(a,/applewebkit\/(\d+([.]\d+)*)/)):-1!=a.indexOf("gecko/")&&(c="gecko",d=b(a,/rv:(\d+[.]\d+)/));return[c,d]};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._parseFloatVersion=function(a,b){var c=a.match(b);return c&&(c=c[1])?parseFloat(c):-1};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._queueRelayout=function(){this._hideTilesTimeout||(this._hideTilesTimeout=
setTimeout(this._hideTilesFunc,0))};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._getTileChildren=function(){for(var a=this._elem.querySelectorAll(this._tilesSelector),b=[],c=0;c<a.length;c++){var d=a[c],e=d.style;0<d.offsetWidth&&0<d.offsetHeight&&"hidden"!=e.visibility&&b.push(d)}return b};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._transitionLayout=function(){var a=this._arMovedInfolets,b=this._layout();if(this._arInfoletsToResize){var c=this._arInfoletsToResize;
b||(b=[]);for(var d=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon,e=0;e<c.length;e+=2){var g=c[e];0>d._arrayIndexOf(b,g)&&b.push(g)}}c=!1;if(!b||1>b.length){if(!a||1>a.length)this._arMovedInfolets=null,this._handleTransitionEnd(null),c=!0}else this._arMovedInfolets=b;a=b&&0<b.length;this.isAnimationEnabled()||c||this._handleTransitionEnd(null);return a};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._layout=function(){var a=this._elem,b=this._getTileChildren(),c=this._cellSize=
null;this._cols=0;this._rows=1;this._occupancyMap=null;for(var d=[],e=[],g=[],h=this._rtl,k=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._getElemInsets(a),m=0;m<b.length;m++){var n=b[m],t=this._getTileSpanFunc(n);(c=n._afrOldSizeStyleClass)&&delete n._afrOldSizeStyleClass;if(!this._cellSize){var u=t;c&&(u=document.createElement("div"),u.className=c,u=this._getTileSpanFunc(u));this._cellSize=this._calcCellSize(n,u)}c=this._cellSize;this._occupancyMap||(this._cols=Math.max(Math.floor((a.offsetWidth-
k.paddingLeft-k.paddingRight-k.borderLeftWidth-k.borderRightWidth)/c.w),1),this._initOccupancyMap(this._cols,this._rows));t.colSpan>this._cols&&(t.colSpan=this._cols);for(var v=!1,u=0;u<this._rows;u++){for(var w=0;w<this._cols;w++)if(this._fits(w,u,t)){var v=n.style,x={top:v.top};h?x.right=v.right:x.left=v.left;e.push(x);this._position(n,w,u,t,c,k);h&&g.push(w);v=!0;break}if(v)break;u===this._rows-1&&this._addRow()}}c&&(a=this._sizeDiv.style,a.width=this._cols*c.w+"px",a.height=this._rows*c.h+"px");
for(m=0;m<b.length;m++)n=b[m],v=n.style,x=e[m],(h&&parseInt(v.right,10)!==parseInt(x.right,10)||!h&&parseInt(v.left,10)!==parseInt(x.left,10)||parseInt(v.top,10)!==parseInt(x.top,10))&&d.push(n);1>d.length&&(d=null);return d};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._initOccupancyMap=function(a,b){for(var c=this._occupancyMap=[],d=0;d<b;d++){var e=[];c.push(e);for(var g=0;g<a;g++)e[g]=!1}};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._addRow=function(){this._rows++;
var a=[];this._occupancyMap.push(a);for(var b=0;b<this._cols;b++)a[b]=!1};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._fits=function(a,b,c){var d=c.colSpan;c=c.rowSpan;for(var e=b;e<b+c;e++){e>=this._rows&&this._addRow();for(var g=a;g<a+d;g++)if(g>=this._cols||this._occupancyMap[e][g])return!1}return!0};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._position=function(a,b,c,d,e,g){var h=d.colSpan;d=d.rowSpan;for(var k=this._occupancyMap,m=c;m<c+d;m++)for(var n=
b;n<b+h;n++)k[m][n]=!0;a=a.style;a.top=g.paddingTop+c*e.h+"px";this._rtl?a.right=g.paddingRight+b*e.w+"px":a.left=g.paddingLeft+b*e.w+"px"};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._addStyleClassToTiles=function(a){for(var b=this._getTileChildren(),c=0;c<b.length;c++)this._addStyleClassNameFunc(b[c],a)};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._removeStyleClassFromTiles=function(a){for(var b=this._getTileChildren(),c=0;c<b.length;c++)this._removeStyleClassNameFunc(b[c],
a)};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._transitionStart=function(a){this._layoutTransition||(this._reorderTransitionStarted=a,this.isAnimationEnabled()&&(this._addStyleClassToTiles(a?this._transitionMoveToFastStyleClass:this._transitionMoveToStyleClass),this._addStyleClassNameFunc(this._sizeDiv,a?this._transitionComponentResizeToFastStyleClass:this._transitionComponentResizeToStyleClass),a=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon,a._addBubbleEventListener(this._elem,
"transitionend",this._handleTransitionEndFunc),a._addBubbleEventListener(this._elem,"webkitTransitionEnd",this._handleTransitionEndFunc)),this._layoutTransition=!0)};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._handleTransitionEnd=function(a){var b=!0;if(this._arMovedInfolets){var c=this._arMovedInfolets;if(a){var d=a.target;for(a=0;a<c.length;a++)if(d===c[a]){c.splice(a,1);break}}else this.isAnimationEnabled()||(c=this._arMovedInfolets=[]);0<c.length&&(b=!1)}if(b){if(this._arInfoletsToResize&&
(b=this._arInfoletsToResize,this._arInfoletsToResize=null,this.isAnimationEnabled()))for(a=0;a<b.length;a+=2)this._removeStyleClassNameFunc(b[a],this._transitionResizeToStyleClass);this._reorderTransitionStarted?(this.isAnimationEnabled()&&(this._removeStyleClassFromTiles(this._transitionMoveToFastStyleClass),this._removeStyleClassNameFunc(this._sizeDiv,this._transitionComponentResizeToFastStyleClass)),this._reorderTransitionStarted=!1):this.isAnimationEnabled()&&(this._removeStyleClassFromTiles(this._transitionMoveToStyleClass),
this._removeStyleClassNameFunc(this._sizeDiv,this._transitionComponentResizeToStyleClass));b=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon;this.isAnimationEnabled()&&(b._removeBubbleEventListener(this._elem,"transitionend",this._handleTransitionEndFunc),b._removeBubbleEventListener(this._elem,"webkitTransitionEnd",this._handleTransitionEndFunc));this._showingInfolets=this._hidingInfolets=this._resizingInfolet=this._layoutTransition=!1;this._layoutOnEndFunc&&this._layoutOnEndFunc();if(this._layoutPhase===
b._PHASE_LAYOUT)if(this.isAnimationEnabled()){var e=this;setTimeout(function(){e._showTiles()},0)}else this._showTiles()}};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._calcCellSize=function(a,b){var c=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._getElemSize(a);return{w:c.w/b.colSpan,h:c.h/b.rowSpan}};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._hideTiles=function(){this._hideTilesTimeout&&(clearTimeout(this._hideTilesTimeout),this._hideTilesTimeout=
null);var a=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon;this._layoutPhase=a._PHASE_HIDE;if(this._arInfoletsToHide&&this.isAnimationEnabled()){for(var b=this._arInfoletsToHide,c=0;c<b.length;c++){var d=b[c];a._addBubbleEventListener(d,"transitionend",this._handleHideTransitionEndFunc);a._addBubbleEventListener(d,"webkitTransitionEnd",this._handleHideTransitionEndFunc);this._addStyleClassNameFunc(d,this._transitionHideFromStyleClass)}var e=this;setTimeout(function(){for(var a=0;a<b.length;a++){var c=
b[a];e._removeStyleClassNameFunc(c,e._transitionHideFromStyleClass);e._addStyleClassNameFunc(c,e._transitionHideToStyleClass)}},0)}else this._handleHideTransitionEnd(null)};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._handleHideTransitionEnd=function(a){var b=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon;if(a){a.preventDefault();a.stopPropagation();a=a.target;this._removeStyleClassNameFunc(a,this._transitionHideToStyleClass);b._removeBubbleEventListener(a,"transitionend",
this._handleHideTransitionEndFunc);b._removeBubbleEventListener(a,"webkitTransitionEnd",this._handleHideTransitionEndFunc);var c=this._arInfoletsToHide;if(c){for(var d=0;d<c.length;d++){var e=c[d];if(e===a){c.splice(d,1);this._arFireHideOnEnd||(this._arFireHideOnEnd=[]);var g=this._arFireHideOnEnd;g.push(a);break}}1>c.length&&(this._arInfoletsToHide=null)}}else if(!this.isAnimationEnabled()&&(c=this._arInfoletsToHide)){for(d=0;d<c.length;d++)e=c[d],this._arFireHideOnEnd||(this._arFireHideOnEnd=[]),
g=this._arFireHideOnEnd,g.push(e);this._arInfoletsToHide=null}if(!this._arInfoletsToHide){if(this._arFireHideOnEnd){g=this._arFireHideOnEnd;for(d=0;d<g.length;d++)a=g[d],this.isAnimationEnabled()&&this._removeStyleClassNameFunc(a,this._transitionHideToStyleClass),this._hideTileOnEndFunc&&this._hideTileOnEndFunc(a);this._arFireHideOnEnd=null}this._layoutPhase=b._PHASE_LAYOUT;this._transitionStart(!1);if(this._arInfoletsToResize)for(b=this._arInfoletsToResize,d=0;d<b.length;d+=2)a=b[d],c=b[d+1],e=this._getSizeStyleClassNameFunc(a),
this._removeStyleClassNameFunc(a,e),this._addStyleClassNameFunc(a,c),this.isAnimationEnabled()&&(this._addStyleClassNameFunc(a,this._transitionResizeToStyleClass),a._afrOldSizeStyleClass=e);this._transitionLayout()}};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._showTiles=function(){var a=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon;this._layoutPhase=a._PHASE_SHOW;if(this._arInfoletsToShow&&this.isAnimationEnabled())for(var b=this._arInfoletsToShow,c=0;c<b.length;c++){var d=
b[c];a._addBubbleEventListener(d,"transitionend",this._handleShowTransitionEndFunc);a._addBubbleEventListener(d,"webkitTransitionEnd",this._handleShowTransitionEndFunc);this._addStyleClassNameFunc(d,this._transitionShowToStyleClass);this._removeStyleClassNameFunc(d,this._transitionShowFromStyleClass)}else this._handleShowTransitionEnd(null)};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon.prototype._handleShowTransitionEnd=function(a){if(a){a.preventDefault();a.stopPropagation();a=a.target;
this._removeStyleClassNameFunc(a,this._transitionShowToStyleClass);var b=window.adf.shared.impl.masonryLayout.MasonryLayoutCommon;b._removeBubbleEventListener(a,"transitionend",this._handleShowTransitionEndFunc);b._removeBubbleEventListener(a,"webkitTransitionEnd",this._handleShowTransitionEndFunc);if(b=this._arInfoletsToShow){for(var c=0;c<b.length;c++){var d=b[c];if(d===a){b.splice(c,1);this._showTileOnEndFunc&&this._showTileOnEndFunc(a);break}}1>b.length&&(this._arInfoletsToShow=null)}}else if(!this.isAnimationEnabled()&&
(b=this._arInfoletsToShow)){for(c=0;c<b.length;c++)d=b[c],this._showTileOnEndFunc&&this._showTileOnEndFunc(d);this._arInfoletsToShow=null}this._arInfoletsToShow||(this._layoutPhase=null)};window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._PHASE_HIDE=0;window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._PHASE_LAYOUT=1;window.adf.shared.impl.masonryLayout.MasonryLayoutCommon._PHASE_SHOW=2})();